"use strict";(self.webpackChunked_web=self.webpackChunked_web||[]).push([[8024],{56281:(J,b,r)=>{r.d(b,{m:()=>v});var u=r(99658),x=r(96272),h=r(94650);let v=(()=>{class g{}return g.\u0275fac=function(P){return new(P||g)},g.\u0275mod=h.oAB({type:g}),g.\u0275inj=h.cJS({imports:[u.m,x.Q]}),g})()},3971:(J,b,r)=>{r.d(b,{R:()=>bt});var u=r(24006),x=r(39841),h=r(4128),v=r(39646),g=r(54004),E=r(68675),P=r(18505),N=r(82722),F=r(46590),f=r(95698),c=r(45007),A=r(11302),y=r(87192),M=r(52497),q=r(77579),e=r(94650),S=r(20388),C=r(36895),Q=r(82945),G=r(49270),Y=r(34002),L=r(4602);function $(n,a){1&n&&(e.TgZ(0,"div",19),e._uU(1,"Vous avez d\xe9pass\xe9 le nombre de caract\xe8res autoris\xe9s pour la saisie"),e.qZA())}function j(n,a){1&n&&(e.TgZ(0,"div",19),e._uU(1,"Veuillez saisir un libell\xe9"),e.qZA())}const k=function(n){return{"has-error":n}},w=function(n){return{"text-danger":n}};function D(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",13)(2,"label",14),e._uU(3,"Libell\xe9"),e.qZA(),e.TgZ(4,"div",15),e._uU(5),e.qZA(),e.TgZ(6,"textarea",16,17),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.ca.libelle=o)}),e.qZA(),e.YNc(8,$,2,0,"div",18),e.YNc(9,j,2,0,"div",18),e.qZA()()}if(2&n){const t=e.MAs(7),i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(8,k,t.invalid||t.pristine&&!t.value)),e.xp6(3),e.Q6J("ngClass",e.VKq(10,w,i.ca.libelle.length>i.paramsLSU.nombreCaracteresMax)),e.xp6(1),e.AsE(" (",i.ca.libelle.length,"/",i.paramsLSU.nombreCaracteresMax," caract\xe8res) "),e.xp6(1),e.Q6J("ngModel",i.ca.libelle)("edMaxlength",i.paramsLSU.nombreCaracteresMax),e.xp6(2),e.Q6J("ngIf",i.ca.libelle.length>i.paramsLSU.nombreCaracteresMax),e.xp6(1),e.Q6J("ngIf",0===i.ca.libelle.length||!i.ca.libelle)}}function B(n,a){1&n&&(e.TgZ(0,"div",19),e._uU(1,"Vous avez d\xe9pass\xe9 le nombre de caract\xe8res autoris\xe9s pour la saisie"),e.qZA())}function K(n,a){1&n&&(e.TgZ(0,"div",19),e._uU(1,"Veuillez saisir un libell\xe9"),e.qZA())}const H=function(n,a){return{selected:n,separee:a}};function R(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.addElemProgInComposante(s.elemProg,l))}),e.TgZ(1,"span",31),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit,i=a.index,o=e.oxw(2);e.cQ8("title","",o.isElemProgInComposante(o.elemProg,t)?"Dissocier":"Associer"," la composante ",t.libelle," \xe0 l'\xe9l\xe9ment de programme ",o.elemProg.libelle,""),e.Q6J("ngClass",e.WLB(5,H,o.isElemProgInComposante(o.elemProg,t),i>3)),e.xp6(2),e.Oqu(t.codeCourt)}}function V(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",26)(1,"input",32),e.NdJ("change",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.inputFalseTrue(o.elemProg))}),e.qZA(),e.TgZ(2,"label",33),e._uU(3),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",0===t.elemProg.idProf),e.xp6(2),e.hij(" ",t.elemProg.isAFC?"Attendu de fin de cycle":"El\xe9ment de programme"," partag\xe9 par tous les enseignants ? ")}}function z(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",13)(2,"label",20),e._uU(3,"Libell\xe9"),e.qZA(),e.TgZ(4,"div",15),e._uU(5),e.qZA(),e.TgZ(6,"textarea",21,22),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.elemProg.libelle=o)}),e.qZA(),e.YNc(8,B,2,0,"div",18),e.YNc(9,K,2,0,"div",18),e.qZA(),e.TgZ(10,"div",23)(11,"p")(12,"strong"),e._uU(13,"Composantes associ\xe9es"),e.qZA()(),e.TgZ(14,"div",24),e.YNc(15,R,3,8,"button",25),e.ALo(16,"trackByProperty"),e.qZA()(),e.TgZ(17,"div",26)(18,"input",27),e.NdJ("ngModelChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.elemProg.afc=o?1:0)}),e.qZA(),e.TgZ(19,"label",28),e._uU(20,"Attendu de fin de cycle ?"),e.qZA()(),e.YNc(21,V,4,2,"div",29),e.qZA()}if(2&n){const t=e.MAs(7),i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(14,k,t.invalid||t.pristine&&!t.value)),e.xp6(3),e.Q6J("ngClass",e.VKq(16,w,i.elemProg.libelle.length>i.paramsLSU.nombreCaracteresMax)),e.xp6(1),e.AsE(" (",i.elemProg.libelle.length,"/",i.paramsLSU.nombreCaracteresMax," caract\xe8res) "),e.xp6(1),e.Q6J("ngModel",i.elemProg.libelle)("edMaxlength",i.paramsLSU.nombreCaracteresMax),e.xp6(2),e.Q6J("ngIf",i.elemProg.libelle.length>i.paramsLSU.nombreCaracteresMax),e.xp6(1),e.Q6J("ngIf",0===i.elemProg.libelle.length||!i.elemProg.libelle),e.xp6(6),e.Q6J("ngForOf",null==i.prof.parametrages?null:i.prof.parametrages.composantes)("ngForTrackBy",e.lcZ(16,12,"id")),e.xp6(3),e.Q6J("ngModel",!!i.elemProg.afc),e.xp6(3),e.Q6J("ngIf",!0===(null==i.matiereChoisie?null:i.matiereChoisie.modifiable))}}function W(n,a){if(1&n&&(e.TgZ(0,"span")(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.codeCourt),e.xp6(1),e.hij(" : ",t.libelle," ")}}function X(n,a){if(1&n&&(e.TgZ(0,"span")(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.codeCourt),e.xp6(1),e.hij(" : ",t.libelle," ")}}function ee(n,a){if(1&n&&(e.TgZ(0,"div",34)(1,"strong"),e._uU(2,"Composantes du socle :"),e.qZA(),e.TgZ(3,"div",35)(4,"div",36),e.YNc(5,W,4,2,"span",37),e.ALo(6,"slice"),e.ALo(7,"trackByProperty"),e.qZA(),e.TgZ(8,"div",36),e.YNc(9,X,4,2,"span",37),e.ALo(10,"slice"),e.ALo(11,"trackByProperty"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",e.Dn7(6,4,null==t.prof.parametrages?null:t.prof.parametrages.composantes,0,4))("ngForTrackBy",e.lcZ(7,8,"id")),e.xp6(4),e.Q6J("ngForOf",e.Dn7(10,10,null==t.prof.parametrages?null:t.prof.parametrages.composantes,4,8))("ngForTrackBy",e.lcZ(11,14,"id"))}}let U=(()=>{class n{constructor(t){this.modalRef=t,this.onClose$=new q.x}ngOnInit(){this.title=Object.isExists(this.ca)?`Gestion de la connaissance associ\xe9e de l'\xe9l\xe9ment de programme ${this.elemProg.libelle}`:this.elemProg.isAFC?"Gestion de l'attendu de fin de cycle":"Gestion de l'\xe9l\xe9ment de programme",this.editCA=Object.isExists(this.ca)}ngOnDestroy(){this.onClose$.complete()}submit(){!c.FSr.isNotEmptyString(Object.isExists(this.ca)?this.ca.libelle:this.elemProg.libelle,!0)||(this.onClose$.next(Object.isExists(this.ca)?this.ca:this.elemProg),this.modalRef.hide())}isElemProgInComposante(t,i){return t.composantes.findIndex(o=>i.id===o.id)>-1}addElemProgInComposante(t,i){const o=t.composantes.findIndex(l=>i.id===l.id);-1===o?t.composantes.push(new c.fP({id:i.id,libelle:i.libelle})):t.composantes.splice(o,1)}inputFalseTrue(t){t.idProf=0===t.idProf?this.prof.id:0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.UZ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ed-gestion-item-catalogue-lsu"]],inputs:{ca:"ca",elemProg:"elemProg",matiereChoisie:"matiereChoisie",prof:"prof",paramsLSU:"paramsLSU"},decls:15,vars:5,consts:[["name","formLSU","ngForm","","novalidate","",3,"ngSubmit"],["formLSU","ngForm"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Fermer cette fen\xeatre",1,"btn-close","d-print-none",3,"click"],["id","modal-gestion-catalogue-lsu",1,"modal-body"],[4,"ngIf"],[1,"modal-footer","modal-gestion-catalogue-lsu"],[1,"w-100"],["type","button","value","Annuler",1,"btn","btn-warning","float-start",3,"click"],["id","btn-validate","type","submit","value","Valider",1,"btn","btn-primary","float-end",3,"disabled"],[1,"clearfix"],["class","footer",4,"ngIf"],[3,"ngClass"],["for","libelleca",1,"form-label"],[1,"form-text",3,"ngClass"],["id","libelleca","name","libelleca","rows","2","required","","edNoNewline","","edAutofocus","",1,"form-control",3,"ngModel","edMaxlength","ngModelChange"],["libelleca","ngModel"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["for","libelleCreate",1,"form-label"],["id","libelleCreate","name","libelleCreate","rows","2","required","","edNoNewline","","edAutofocus","",1,"form-control",3,"ngModel","edMaxlength","ngModelChange"],["libelleCreate","ngModel"],[1,"mt-3"],[1,"btn-group-sm"],["type","button","class","btn btn-secondary btn-composante",3,"ngClass","title","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"form-check","mt-3"],["type","checkbox","name","afc","id","checkAfc",1,"form-check-input",3,"ngModel","ngModelChange"],["for","checkAfc",1,"form-check-label"],["class","form-check mt-3",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-composante",3,"ngClass","title","click"],["aria-hidden","true"],["type","checkbox","name","sharewithall","id","checkShareWithAll",1,"form-check-input",3,"checked","change"],["for","checkShareWithAll",1,"form-check-label"],[1,"footer"],[1,"legende","row"],[1,"col-lg-6"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(t,i){if(1&t&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return i.submit()}),e.TgZ(2,"div",2)(3,"h3",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.modalRef.hide()}),e.qZA()(),e.TgZ(6,"div",5),e.YNc(7,D,10,12,"div",6),e.YNc(8,z,22,18,"div",6),e.qZA(),e.TgZ(9,"div",7)(10,"div",8)(11,"input",9),e.NdJ("click",function(){return i.modalRef.hide()}),e.qZA(),e._UZ(12,"input",10),e.qZA(),e._UZ(13,"div",11),e.YNc(14,ee,12,16,"div",12),e.qZA()()),2&t){const o=e.MAs(1);e.xp6(4),e.Oqu(i.title),e.xp6(3),e.Q6J("ngIf",i.editCA),e.xp6(1),e.Q6J("ngIf",!i.editCA),e.xp6(4),e.Q6J("disabled",o.invalid||o.pristine),e.xp6(2),e.Q6J("ngIf",!i.editCA)}},dependencies:[C.mk,C.sg,C.O5,u._Y,u.Fj,u.Wl,u.JJ,u.JL,u.Q7,u.On,u.F,Q.U,G.b,Y.v,C.OU,L.$],styles:["#modal-gestion-catalogue-lsu[_ngcontent-%COMP%]   .btn-composante.selected[_ngcontent-%COMP%]{background:var(--light-primary-color)!important;color:#fff}.modal-footer.modal-gestion-catalogue-lsu[_ngcontent-%COMP%]   .legende[_ngcontent-%COMP%]{margin-top:5px}.modal-footer.modal-gestion-catalogue-lsu[_ngcontent-%COMP%]   .legende[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}"]}),n})();var te=r(95715),ie=r(4358),O=r(59245),ne=r(80125),oe=r(43422);const T=function(n){return{active:n}};function le(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",20)(1,"button",21),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.onSelectCycle(l))}),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(3);e.xp6(1),e.hYB("title","",null==t.paramsLSU?null:t.paramsLSU.numeroCycle," - ",null==t.paramsLSU?null:t.paramsLSU.libelleCycle,""),e.Q6J("ngClass",e.VKq(4,T,i.idCycleChoisi.value===t.idCycleEtab)),e.xp6(1),e.hij(" ",null==t.paramsLSU?null:t.paramsLSU.libelleCycle," ")}}function ae(n,a){if(1&n&&(e.TgZ(0,"ul",18),e.YNc(1,le,3,6,"li",19),e.ALo(2,"trackByProperty"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.cycles)("ngForTrackBy",e.lcZ(2,2,"idCycleEtab"))}}function se(n,a){if(1&n&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"button",16),e._uU(4),e.qZA(),e.YNc(5,ae,3,4,"ul",17),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("isOpen",!1),e.xp6(2),e.hij(" ",t.libelleCycle," ")}}function ce(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",20)(1,"button",29),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.onSelectClasseGESTCATLSU(l))}),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(1),e.s9C("title",t.code),e.xp6(1),e.hij(" ",t.libelle," ")}}const re=function(){return["id|asc"]};function de(n,a){if(1&n&&(e.TgZ(0,"ul",28),e.YNc(1,ce,3,2,"li",19),e.ALo(2,"orderBy"),e.ALo(3,"trackByProperty"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,2,t.listeClasses,e.DdM(7,re)))("ngForTrackBy",e.lcZ(3,5,"id"))}}const ue=function(n,a){return{"niveau-ssmatiere":n,"niveau-matiere":a}};function _e(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",32)(1,"button",29),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.onSelectMatiereGESTCATLSU(l))}),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(3);e.Q6J("ngClass",e.WLB(3,ue,t.isSousMatiere(),!t.isSousMatiere()&&(null==i.authStore.currentUser?null:i.authStore.currentUser.isProfPrimaire))),e.xp6(1),e.s9C("title",t.code),e.xp6(1),e.hij(" ",t.libelle," ")}}function ge(n,a){if(1&n&&(e.TgZ(0,"ul",30),e.YNc(1,_e,3,6,"li",31),e.ALo(2,"trackByProperty"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.listeMatieres)("ngForTrackBy",e.lcZ(2,2,"code"))}}const me=function(){return{elemsProgPrevusUniquement:!0}},pe=function(){return{elemsProgPrevusUniquement:!1}};function Ce(n,a){if(1&n&&(e.TgZ(0,"ul",37)(1,"li",20)(2,"button",38),e._UZ(3,"i",39),e._uU(4," R\xe9capitulatif des \xe9valuations pour la classe "),e._UZ(5,"br"),e.TgZ(6,"i")(7,"b"),e._uU(8,"- ne tient pas compte des \xe9l\xe9ments de programme non pr\xe9vus sur l'ann\xe9e scolaire"),e.qZA()()()(),e.TgZ(9,"li",20)(10,"button",40),e._UZ(11,"i",39),e._uU(12," R\xe9capitulatif des \xe9valuations pour la classe "),e._UZ(13,"br"),e.TgZ(14,"i")(15,"b"),e._uU(16,"- prise en compte de l'ensemble des \xe9l\xe9ments de programme du catalogue"),e.qZA()()()()()),2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("file",t.entitySelected.fileFormated)("typeFichier",t.edTypeFichier.FICHIER_CATALOGUE_LSU)("otherTypeDL",!0)("additionalData",e.DdM(8,me)),e.xp6(8),e.Q6J("file",t.entitySelected.fileFormated)("typeFichier",t.edTypeFichier.FICHIER_CATALOGUE_LSU)("otherTypeDL",!0)("additionalData",e.DdM(9,pe))}}function fe(n,a){1&n&&(e.TgZ(0,"div",33)(1,"div",34)(2,"button",35),e._uU(3,"Editions"),e.qZA(),e.YNc(4,Ce,17,10,"ul",36),e.qZA()())}function he(n,a){if(1&n&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"button",22),e._uU(4),e.qZA(),e.YNc(5,de,4,8,"ul",23),e.qZA(),e.TgZ(6,"div",24)(7,"button",25),e._uU(8),e.qZA(),e.YNc(9,ge,3,4,"ul",26),e.qZA()(),e.YNc(10,fe,5,0,"div",27),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("isOpen",!1),e.xp6(2),e.hij(" ",(null==t.entitySelected?null:t.entitySelected.libelle)||"Classe"," "),e.xp6(2),e.Q6J("isOpen",!1)("isDisabled",!t.entitySelected),e.xp6(2),e.hij(" ",(null==t.matiereSelected?null:t.matiereSelected.libelle)||"Mati\xe8re"," "),e.xp6(2),e.Q6J("ngIf",(null==t.catalogue?null:t.catalogue.matieres.length)>0)}}function be(n,a){1&n&&(e.TgZ(0,"alert",41),e._uU(1,"Le catalogue n'est pas encore configur\xe9"),e.qZA())}function xe(n,a){1&n&&(e.TgZ(0,"alert",41),e._uU(1," La saisie s'effectue sur la sous-mati\xe8re "),e.qZA())}function ve(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,l=e.oxw(4);return e.KtG(l.setSelectedCompetence(o.id))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw(2).$implicit,i=e.oxw(4);e.MGl("title","S\xe9lectionner un \xe9l\xe9ment de programme de la comp\xe9tence ",t.libelle,""),e.xp6(1),e.AsE(" ",t.libelle," (",i.getNbElemProgCompetencePeriode(t,i.periodeSelected,"N"===i.moduleSource),") ")}}const I=function(){return[]};function Ee(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,l=e.oxw(4);return e.KtG(l.deleteCompetence(o))}),e._UZ(1,"i",58),e.qZA()}2&n&&e.Q6J("routerLink",e.DdM(1,I))}function Pe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2),l=o.$implicit,s=o.index,d=e.oxw(4);return e.KtG(d.editCompetence(l,s))}),e._UZ(1,"i",60),e.qZA()}2&n&&e.Q6J("routerLink",e.DdM(1,I))}function ye(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ve,2,3,"button",53),e.YNc(2,Ee,2,2,"button",54),e.YNc(3,Pe,2,2,"button",55),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngIf",!t.editable),e.xp6(1),e.Q6J("ngIf",i.idCompetenceChoisie===t.id&&i.matiereChoisie.modifiable&&!(null!=i.competenceChoisie&&i.competenceChoisie.isSysteme)&&!i.catalogueReadOnly),e.xp6(1),e.Q6J("ngIf",i.idCompetenceChoisie===t.id&&i.matiereChoisie.modifiable&&!i.catalogueReadOnly)}}function Me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",66),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,l=e.oxw(4);return e.KtG(l.saveCompetence(o))}),e._UZ(1,"i",67),e.qZA()}}function Se(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",61)(1,"input",62),e.NdJ("keydown",function(o){e.CHM(t);const l=e.oxw().$implicit,s=e.oxw(4);return e.KtG(s.inputCompetenceKeyPress(o,l))})("ngModelChange",function(o){e.CHM(t);const l=e.oxw().$implicit;return e.KtG(l.libelle=o)}),e.qZA(),e.YNc(2,Me,2,0,"button",63),e.TgZ(3,"button",64),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(4);return e.KtG(l.cancelUpdateCompetence(o))}),e._UZ(4,"i",65),e.qZA()()}if(2&n){const t=e.oxw(),i=t.index,o=t.$implicit;e.xp6(1),e.MGl("name","input-competence-",i,"")("id","input-competence-",i,""),e.Q6J("ngModel",o.libelle),e.xp6(1),e.Q6J("ngIf",o.libelle.length>0)}}function Oe(n,a){if(1&n&&(e.TgZ(0,"li",51),e.YNc(1,ye,4,3,"ng-container",12),e.YNc(2,Se,5,4,"div",52),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(4);e.Q6J("ngClass",e.VKq(3,T,i.idCompetenceChoisie===t.id)),e.xp6(1),e.Q6J("ngIf",!t.editable),e.xp6(1),e.Q6J("ngIf",t.editable)}}function Te(n,a){if(1&n&&(e.TgZ(0,"ul",43),e.YNc(1,Oe,3,5,"li",50),e.ALo(2,"trackByProperty"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.competences)("ngForTrackBy",e.lcZ(2,2,"id"))}}function Ze(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ul",68)(1,"li")(2,"button",69),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.initNewCompetence())}),e._UZ(3,"span",70),e.qZA()()()}}const Z=function(n){return{"fa-rotate-90":n}};function Ae(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",32)(1,"button",46),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.setSelectedMatiere(l.id))}),e._UZ(2,"i",47),e._uU(3),e.qZA(),e.YNc(4,Te,3,4,"ul",48),e.YNc(5,Ze,4,0,"ul",49),e.qZA()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(7,T,i.idMatiereChoisie===t.id)),e.xp6(1),e.MGl("title","S\xe9lectionner une comp\xe9tence de l'enseignement ",t.libelle,""),e.xp6(1),e.Q6J("ngClass",e.VKq(9,Z,i.idMatiereChoisie===t.id)),e.xp6(1),e.AsE(" ",t.libelle," (",i.getNbElemProgEnseignementPeriode(t,i.periodeSelected,"N"===i.moduleSource),") "),e.xp6(1),e.Q6J("ngIf",i.idMatiereChoisie===t.id),e.xp6(1),e.Q6J("ngIf",i.idMatiereChoisie===t.id&&(null==i.matiereChoisie?null:i.matiereChoisie.modifiable)&&!i.catalogueReadOnly)}}function Le(n,a){1&n&&(e.TgZ(0,"alert",41),e._uU(1,"Veuillez s\xe9lectionner une comp\xe9tence"),e.qZA())}function ke(n,a){1&n&&(e.TgZ(0,"alert",41),e._uU(1," Il est possible que vous ayez choisi de ne pas "),e.TgZ(2,"strong"),e._uU(3,"afficher d'\xe9l\xe9ments de programme"),e.qZA(),e._uU(4," pour cette comp\xe9tence sur la "),e.TgZ(5,"strong"),e._uU(6,"p\xe9riode en cours"),e.qZA(),e._uU(7," . "),e._UZ(8,"br"),e._uU(9," Veuillez "),e.TgZ(10,"strong"),e._uU(11,"v\xe9rifier votre param\xe9trage"),e.qZA(),e._uU(12," en cliquant sur le bouton pour g\xe9rer votre "),e.TgZ(13,"strong"),e._uU(14,"catalogue d'\xe9lements de programme"),e.qZA(),e._uU(15," . "),e.qZA())}function we(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"th",78)(1,"button",79),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(5);return e.KtG(s.toggleActivationPeriode(s.competenceChoisie.elementsProgramme,l,!0))}),e._uU(2),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(5);e.xp6(1),e.s9C("title","add"===i.toggleStateExceptionPeriode[t.codePeriode]?"Dissocier tout les \xe9l\xe9ments de programme de la p\xe9riode "+t.libelle:"Associer tout les \xe9l\xe9ments de programme sur la p\xe9riode "+t.libelle),e.xp6(1),e.hij(" ",t.libelle," ")}}function Ue(n,a){if(1&n&&(e.TgZ(0,"thead")(1,"tr"),e._UZ(2,"th")(3,"th"),e.YNc(4,we,3,2,"th",77),e.ALo(5,"trackByProperty"),e.qZA()()),2&n){const t=e.oxw(4);e.xp6(4),e.Q6J("ngForOf",t.listePeriodes)("ngForTrackBy",e.lcZ(5,2,"codePeriode"))}}function Ie(n,a){if(1&n&&(e.TgZ(0,"tr",80)(1,"td",81)(2,"h4")(3,"b"),e._uU(4,"Attendus de fin de cycle"),e.qZA()()()()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("colSpan",t.listePeriodes.length+2)}}function Je(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",92),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,l=e.oxw(4);return e.KtG(l.showConnaissancesAssociees(o))}),e._UZ(1,"i",47),e.qZA()}if(2&n){const t=e.oxw(2).$implicit,i=e.oxw(4);e.MGl("title","Voir les connaissances associ\xe9es de ",t.libelle,""),e.xp6(1),e.Q6J("ngClass",e.VKq(2,Z,i.idEPChoisi===t.idOrigineCatalogue))}}function Ne(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",93),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,l=e.oxw(4);return e.KtG(l.initNewCA(o))}),e._UZ(1,"i",70),e.qZA()}}function Fe(n,a){1&n&&e._UZ(0,"i",94)}function qe(n,a){1&n&&e._UZ(0,"i",95)}function Qe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",92),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,l=e.oxw(4);return e.KtG(l.associateElemProg(o))}),e.TgZ(1,"span"),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw(2).$implicit;e.hYB("title","Associer l'",t.isAFC?"attendu de fin de cycle":"\xe9l\xe9ment de programme"," ",t.libelle,""),e.xp6(2),e.Oqu(t.libelle)}}function Ge(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td")(1,"div",84),e.YNc(2,Je,2,4,"button",85),e.YNc(3,Ne,2,0,"button",86),e._UZ(4,"i",87),e.YNc(5,Fe,1,0,"i",88),e.YNc(6,qe,1,0,"i",89),e.TgZ(7,"button",90),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(4);return e.KtG(l.associateElemProg(o))}),e._UZ(8,"i",91),e.qZA(),e.YNc(9,Qe,3,3,"button",85),e.qZA()()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(2),e.Q6J("ngIf",t.connaissancesAssociees.length>0&&"N"===i.moduleSource),e.xp6(1),e.Q6J("ngIf",((null==i.matiereChoisie?null:i.matiereChoisie.modifiable)||1===(null==i.paramsLSU?null:i.paramsLSU.saisieLibreActive))&&!i.catalogueReadOnly),e.xp6(1),e.MGl("title","\xe9l\xe9ment de programme : ",t.idOrigineCatalogue,""),e.xp6(1),e.Q6J("ngIf",t.idProf!==(null==i.prof?null:i.prof.id)&&0===t.idProf),e.xp6(1),e.Q6J("ngIf",t.idProf===i.prof.id&&0!==t.idProf),e.xp6(1),e.MGl("title","Ajouter cet ",t.isAFC?"attendu de fin de cycle":"\xe9l\xe9ment de programme",""),e.xp6(2),e.Q6J("ngIf",t.isAFC||t.isEP||"CDT"===i.moduleSource)}}function Ye(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",92),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,l=e.oxw(4);return e.KtG(l.showConnaissancesAssociees(o))}),e._UZ(1,"i",47),e.qZA()}if(2&n){const t=e.oxw(2).$implicit,i=e.oxw(4);e.MGl("title","Voir les connaissances associ\xe9es de ",t.libelle,""),e.xp6(1),e.Q6J("ngClass",e.VKq(2,Z,i.idEPChoisi===t.idOrigineCatalogue))}}function $e(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",93),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,l=e.oxw(4);return e.KtG(l.initNewCA(o))}),e._UZ(1,"i",70),e.qZA()}}function je(n,a){1&n&&e._UZ(0,"i",94)}function De(n,a){1&n&&e._UZ(0,"i",95)}function Be(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(t.libelle)}}function Ke(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",92),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,l=e.oxw(4);return e.KtG(l.showConnaissancesAssociees(o))}),e.TgZ(1,"span"),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw(2).$implicit;e.MGl("title","Voir les connaissances associ\xe9es de ",t.libelle,""),e.xp6(2),e.Oqu(t.libelle)}}function He(n,a){if(1&n&&(e.TgZ(0,"td")(1,"div",84),e.YNc(2,Ye,2,4,"button",85),e.YNc(3,$e,2,0,"button",86),e._UZ(4,"i",87),e.YNc(5,je,1,0,"i",88),e.YNc(6,De,1,0,"i",89),e._UZ(7,"i",96),e.YNc(8,Be,2,1,"span",12),e.YNc(9,Ke,3,2,"button",85),e.qZA()()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(2),e.Q6J("ngIf",t.connaissancesAssociees.length>0&&"N"===i.moduleSource),e.xp6(1),e.Q6J("ngIf",((null==i.matiereChoisie?null:i.matiereChoisie.modifiable)||1===(null==i.paramsLSU?null:i.paramsLSU.saisieLibreActive))&&!i.catalogueReadOnly),e.xp6(1),e.MGl("title","\xe9l\xe9ment de programme : ",t.idOrigineCatalogue,""),e.xp6(1),e.Q6J("ngIf",t.idProf!==i.prof.id&&0===t.idProf),e.xp6(1),e.Q6J("ngIf",t.idProf===i.prof.id&&0!==t.idProf),e.xp6(2),e.Q6J("ngIf",t.isAFC||t.isEP||"CDT"===i.moduleSource),e.xp6(1),e.Q6J("ngIf",t.connaissancesAssociees.length>0&&"N"===i.moduleSource)}}function Re(n,a){1&n&&e._UZ(0,"i",94)}function Ve(n,a){1&n&&e._UZ(0,"i",95)}function ze(n,a){if(1&n&&(e.TgZ(0,"td")(1,"div",84),e._UZ(2,"i",87),e.YNc(3,Re,1,0,"i",88),e.YNc(4,Ve,1,0,"i",89),e.TgZ(5,"span"),e._uU(6),e.qZA()()()),2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(2),e.MGl("title","\xe9l\xe9ment de programme : ",t.idOrigineCatalogue,""),e.xp6(1),e.Q6J("ngIf",t.idProf!==i.prof.id&&0===t.idProf),e.xp6(1),e.Q6J("ngIf",t.idProf===i.prof.id&&0!==t.idProf),e.xp6(2),e.Oqu(t.libelle)}}function We(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",97),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(4);return e.KtG(l.editElemProg(o))}),e._UZ(2,"i",98),e.qZA(),e.TgZ(3,"button",99),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(4);return e.KtG(l.deleteElemProg(o))}),e._UZ(4,"i",100),e.qZA(),e.BQk()}}const Xe=function(n,a){return{"fa-check":n,"fa-close text-danger":a}};function et(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",102)(1,"div",103)(2,"button",104),e.NdJ("click",function(){const l=e.CHM(t).$implicit,s=e.oxw(2).$implicit,d=e.oxw(4);return e.KtG(d.toggleActivationPeriode([s],l,!1))}),e._UZ(3,"span",105),e.qZA()()()}if(2&n){const t=a.$implicit,i=e.oxw(2).$implicit,o=e.oxw(4);e.xp6(2),e.uIk("aria-label","L'\xe9l\xe9ment de programme "+i.libelle+" est "+(o.isExceptionElemProgPeriode(i,t)?"d\xe9sactiv\xe9":"activ\xe9")+" pour la p\xe9riode "+t.libelle),e.xp6(1),e.Q6J("ngClass",e.WLB(2,Xe,!o.isExceptionElemProgPeriode(i,t),o.isExceptionElemProgPeriode(i,t)))}}function tt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,et,4,5,"td",101),e.ALo(2,"trackByProperty"),e.BQk()),2&n){const t=e.oxw(5);e.xp6(1),e.Q6J("ngForOf",t.listePeriodes)("ngForTrackBy",e.lcZ(2,2,"codePeriode"))}}function it(n,a){1&n&&e._UZ(0,"i",96)}function nt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",112),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(2).$implicit,s=e.oxw(4);return e.KtG(s.associateConnaissance(l,o))}),e._UZ(1,"i",91),e.qZA()}}function ot(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.libelle)}}function lt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",92),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(2).$implicit,s=e.oxw(4);return e.KtG(s.associateConnaissance(l,o))}),e.TgZ(1,"span"),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.MGl("title","Associer la connaissance associ\xe9e ",t.libelle,""),e.xp6(2),e.Oqu(t.libelle)}}function at(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"td",83)(1,"button",113),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(2).$implicit,s=e.oxw(4);return e.KtG(s.editCA(l,o))}),e._UZ(2,"i",98),e.qZA(),e.TgZ(3,"button",114),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,l=e.oxw(2).$implicit,s=e.oxw(4);return e.KtG(s.deleteCA(l,o))}),e._UZ(4,"i",100),e.qZA()()}}const st=function(n){return{"eca-active":n}};function ct(n,a){if(1&n&&(e.TgZ(0,"tr",107)(1,"td",81)(2,"div",84),e._UZ(3,"i",108),e.YNc(4,it,1,0,"i",109),e.YNc(5,nt,2,0,"button",110),e.YNc(6,ot,2,1,"span",12),e.YNc(7,lt,3,2,"button",85),e.qZA()(),e.YNc(8,at,5,0,"td",111),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(2).$implicit,o=e.oxw(4);e.Q6J("ngClass",e.VKq(8,st,o.idEPChoisi===i.idOrigineCatalogue)),e.xp6(1),e.Q6J("colSpan",o.listePeriodes.length+2),e.xp6(2),e.MGl("title","connaissance associ\xe9e : ",t.id,""),e.xp6(1),e.Q6J("ngIf",o.connaissanceIsAlreadyAssociate(i,t)),e.xp6(1),e.Q6J("ngIf",!o.connaissanceIsAlreadyAssociate(i,t)&&!i.editable),e.xp6(1),e.Q6J("ngIf",o.connaissanceIsAlreadyAssociate(i,t)||i.editable),e.xp6(1),e.Q6J("ngIf",!o.connaissanceIsAlreadyAssociate(i,t)&&!i.editable),e.xp6(1),e.Q6J("ngIf",!o.isExceptionElemProgPeriode(i,o.periodeSelected)&&((null==o.matiereChoisie?null:o.matiereChoisie.modifiable)||t.idProf===o.prof.id)&&!o.catalogueReadOnly)}}function rt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ct,9,10,"tr",106),e.ALo(2,"trackByProperty"),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.connaissancesAssociees)("ngForTrackBy",e.lcZ(2,2,"$index"))}}const dt=function(n,a){return{"ep-afc":n,"eca-active":a}};function ut(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"tr",82),e.YNc(2,Ge,10,7,"td",12),e.YNc(3,He,10,7,"td",12),e.YNc(4,ze,7,4,"td",12),e.TgZ(5,"td",83),e.YNc(6,We,5,0,"ng-container",12),e.qZA(),e.YNc(7,tt,3,4,"ng-container",12),e.qZA(),e.YNc(8,rt,3,4,"ng-container",12),e.BQk()),2&n){const t=a.$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngClass",e.WLB(7,dt,t.isAFC,i.idEPChoisi===t.idOrigineCatalogue)),e.xp6(1),e.Q6J("ngIf","GESTCATLSU"!==i.moduleSource&&!i.elemProgIsAlreadyAssociate(t)&&!i.isExceptionElemProgPeriode(t,i.periodeSelected)),e.xp6(1),e.Q6J("ngIf","GESTCATLSU"!==i.moduleSource&&i.elemProgIsAlreadyAssociate(t)&&!i.isExceptionElemProgPeriode(t,i.periodeSelected)),e.xp6(1),e.Q6J("ngIf","GESTCATLSU"===i.moduleSource),e.xp6(2),e.Q6J("ngIf",("GESTCATLSU"===i.moduleSource||!i.isExceptionElemProgPeriode(t,i.periodeSelected))&&((null==i.matiereChoisie?null:i.matiereChoisie.modifiable)||t.idProf===i.prof.id)&&!i.catalogueReadOnly),e.xp6(1),e.Q6J("ngIf","GESTCATLSU"===i.moduleSource),e.xp6(1),e.Q6J("ngIf","N"===i.moduleSource)}}const _t=function(n){return{"gest-cat-lsu":n}};function gt(n,a){if(1&n&&(e.TgZ(0,"table",51),e.YNc(1,Ue,6,4,"thead",12),e.TgZ(2,"tbody"),e.YNc(3,Ie,5,1,"tr",75),e.YNc(4,ut,9,10,"ng-container",76),e.ALo(5,"trackByProperty"),e.qZA()()),2&n){const t=e.oxw(3);e.Q6J("ngClass",e.VKq(7,_t,"GESTCATLSU"===t.moduleSource)),e.xp6(1),e.Q6J("ngIf","GESTCATLSU"===t.moduleSource&&t.competenceChoisie.elementsProgramme.length>0),e.xp6(2),e.Q6J("ngIf",t.competenceChoisie.hasEPsAFC(t.listeExceptionsPeriodes,t.periodeSelected)),e.xp6(1),e.Q6J("ngForOf",t.competenceChoisie.elementsProgramme)("ngForTrackBy",e.lcZ(5,5,"id"))}}function mt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",115),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.initNewElemProg())}),e._UZ(1,"span",70),e.qZA()}}function pt(n,a){if(1&n&&(e.TgZ(0,"div",71),e.YNc(1,ke,16,0,"alert",7),e.YNc(2,gt,6,9,"table",72),e.TgZ(3,"div",73),e.YNc(4,mt,2,0,"button",74),e._UZ(5,"div",11),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isAllElemProgExcludedOnPeriode()),e.xp6(1),e.Q6J("ngIf",t.competenceChoisie),e.xp6(2),e.Q6J("ngIf",((null==t.matiereChoisie?null:t.matiereChoisie.modifiable)||1===(null==t.paramsLSU?null:t.paramsLSU.saisieLibreActive))&&!t.catalogueReadOnly)}}function Ct(n,a){if(1&n&&(e.TgZ(0,"div",13)(1,"div",42)(2,"ul",43),e.YNc(3,Ae,6,11,"li",31),e.ALo(4,"trackByProperty"),e.qZA()(),e.TgZ(5,"div",44),e.YNc(6,Le,2,0,"alert",7),e.YNc(7,pt,6,3,"div",45),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.catalogue.matieres)("ngForTrackBy",e.lcZ(4,4,"code")),e.xp6(3),e.Q6J("ngIf",!(t.idCompetenceChoisie>0)),e.xp6(1),e.Q6J("ngIf",t.idCompetenceChoisie>0)}}function ft(n,a){1&n&&(e.TgZ(0,"div")(1,"alert",116),e._uU(2," Les changements que vous effectuez sont "),e.TgZ(3,"strong"),e._uU(4,"repercut\xe9s"),e.qZA(),e._uU(5," sur le catalogue de "),e.TgZ(6,"strong"),e._uU(7,"l'ensemble des enseignants"),e.qZA(),e._uU(8," pour les \xe9l\xe9ments "),e.TgZ(9,"strong"),e._uU(10,"pr\xe9c\xe9d\xe9s de l'ic\xf4ne"),e.qZA(),e._UZ(11,"i",117),e.qZA()())}function ht(n,a){if(1&n&&(e.ynx(0),e.YNc(1,ft,12,0,"div",12),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.matiereChoisie?null:t.matiereChoisie.modifiable)}}let bt=(()=>{class n extends((0,c.kCV)()){constructor(t,i,o,l,s,d,_,p,m,xt){super(),this.authStore=t,this.cahierDeTexteStore=i,this.cahierDeTexteService=o,this.etablissementStore=l,this.lsuStore=s,this.lsuService=d,this.modalRef=_,this.modalService=p,this.notesGestionService=m,this.uiService=xt,this.apiExtension=A.sX.apiExtension,this.apiUri=(0,A.Je)(),this.ariaHidden=!1,this.tabDevoirsProf=[],this.listeMatieres=[],this.listePeriodes=[],this.listeExceptionsPeriodes=[],this.backupCompetencesEditables={},this.toggleStateExceptionPeriode={},this.edTypeFichier=c.Vav,this.idCycleChoisi=new u.NI(0),this.cycles=[]}ngOnInit(){"GESTCATLSU"!==this.moduleSource&&this.prof.parametrages?.choixCycleCatalogue&&(this.cycles=c.uKw.getCyclesFromEtab(this.etablissementStore.snapshot,this.entitySelected.etabId)),"N"===this.moduleSource||"GESTCATLSU"===this.moduleSource?(this.idCycleChoisi.setValue(this.entitySelected.idCycleEtab),this.libelleCycle=this.entitySelected.paramsLSU.libelleCycle,c.FSr.isNotEmptyString(this.paramsLSU.libelleCycle)&&(this.libelleCycle=this.paramsLSU.libelleCycle)):"CDT"===this.moduleSource&&Object.isExists(this.selectedItem)&&(this.idCycleChoisi.setValue(this.selectedItem.idCycleEtab),this.libelleCycle=this.selectedItem.libelleCycle),!this.catalogueReadOnly&&Object.isExists(this.prof?.devoirsClasse)&&(this.tabDevoirsProf=[...this.prof.devoirsClasse],Object.isExists(this.selectedItem)&&!this.selectedItem.hasOwnProperty("id")&&this.tabDevoirsProf.push(this.selectedItem)),"GESTCATLSU"===this.moduleSource&&this.onSelectClasseGESTCATLSU(this.entitySelected),(0,x.a)([this.lsuStore.select$().pipe((0,g.U)(t=>Object.getEntity(t,this.authStore.variantForCurrentUser))),this.idCycleChoisi.valueChanges.pipe((0,E.O)(this.idCycleChoisi.value),(0,P.b)(t=>this.doRefreshCatalogueLSU(this.prof?.matiere)))]).pipe((0,g.U)(([t,i])=>Object.isExists(t)?t[i]:void 0),(0,N.R)(this.componentDestroyed$)).subscribe({next:t=>{this.catalogue=new c.dB8(t);const i=this.catalogue.matieres.find(o=>this.prof?.matiere.id===`${o.id}`);Object.isExists(i)&&this.setSelectedMatiere(i.id),this.catalogueReadOnly||(this.paramsLSU.nbElemsImprimes=c.nK4.countNbElemProgImprimes(this.tabDevoirsProf))},error:t=>console.error("CatalogueLsuComponent.ngOnInit lsuStore : ",t)})}get titleModale(){return"GESTCATLSU"===this.moduleSource?"Gestion des \xe9l\xe9ments de programme du catalogue":"Ajouter un \xe9l\xe9ment de programme depuis le catalogue"}get matiereChoisie(){return Object.isExists(this.catalogue)&&this.idMatiereChoisie>0?this.catalogue.matieres.find(t=>this.idMatiereChoisie===t.id):void 0}get competenceChoisie(){return Object.isExists(this.matiereChoisie)&&this.idCompetenceChoisie>0?this.matiereChoisie.competences.find(t=>this.idCompetenceChoisie===t.id):void 0}doRefreshCatalogueLSU(t,i=!1){this.loader=(0,h.D)([this.lsuService.get(this.idCycleChoisi.value,i).pipe((0,F.d)(void 0)),"N"===this.moduleSource?this.notesGestionService.getExceptionsElementsProgrammePeriodes(this.entitySelected.typeEntity,this.entitySelected.id,t.code,t.codeSSMatiere):(0,v.of)({elementsProgramme:[]})]).subscribe({next:o=>{"N"===this.moduleSource&&(this.listeExceptionsPeriodes=o[1].elementsProgramme.map(l=>new c.njk(l)))},error:o=>this.uiService.notifyEvent(o.action,o.message,"Erreur","icon-ed_carnetnotes")})}onSelectCycle(t){t.idCycleEtab!==this.idCycleChoisi.value&&(this.setSelectedMatiere(void 0),this.setSelectedCompetence(void 0),this.idCycleChoisi.setValue(t.idCycleEtab),this.libelleCycle=t.paramsLSU.libelleCycle)}onSelectClasseGESTCATLSU(t){if(t.idCycleEtab!==this.idCycleChoisi.value&&(this.idCycleChoisi.setValue(t.idCycleEtab),this.libelleCycle=t.paramsLSU.libelleCycle,this.paramsLSU=new c.nK4(t.paramsLSU)),this.entitySelected=t,this.listePeriodes=t.periodes.filter(i=>4===i.codePeriode.length),this.listePeriodes.forEach(i=>{this.toggleStateExceptionPeriode[i.codePeriode]="add"}),this.listeMatieres=this.listePeriodes.length>0?this.listePeriodes[0].matieres:[],this.listeMatieres.length>0){const i=this.listeMatieres.find(o=>this.prof?.matiere.id===o.id);Object.isExists(i)?this.onSelectMatiereGESTCATLSU(i):this.onSelectMatiereGESTCATLSU(this.listeMatieres[0])}this.idMatiereChoisie=void 0,this.idCompetenceChoisie=void 0,this.idEPChoisi=void 0}onSelectMatiereGESTCATLSU(t){this.matiereSelected=t,1!==t.avecSousMatiere&&(this.loader=this.notesGestionService.getExceptionsElementsProgrammePeriodes(this.entitySelected.typeEntity,this.entitySelected.id,t.code,t.codeSSMatiere).subscribe({next:i=>{this.listeExceptionsPeriodes=i.elementsProgramme.map(o=>new c.njk(o)),this.idMatiereChoisie=void 0,this.idCompetenceChoisie=void 0,this.idEPChoisi=void 0},error:i=>this.uiService.notifyEvent(i.action,i.message,"Erreur","icon-ed_carnetnotes")}))}setSelectedMatiere(t){Object.isExists(this.matiereChoisie)&&this.matiereChoisie.competences.edRemove(i=>i.temporaire),this.setUneditableCompetence(!0),this.idMatiereChoisie=t,this.idCompetenceChoisie=void 0,this.idEPChoisi=void 0}showConnaissancesAssociees(t){this.idEPChoisi!==t.idOrigineCatalogue&&(this.idEPChoisi=t.idOrigineCatalogue)}setUneditableCompetence(t){!(this.idMatiereChoisie>0)||!Object.isExists(this.matiereChoisie)||this.matiereChoisie.competences.forEach(i=>{(!(this.idCompetenceChoisie>0)||i.id===this.idCompetenceChoisie)&&!t||(Object.isExists(this.backupCompetencesEditables[i.id])&&(Object.assign(i,this.backupCompetencesEditables[i.id]),delete this.backupCompetencesEditables[i.id]),i.editable=!1)})}setSelectedCompetence(t){this.idCompetenceChoisie=t,this.idEPChoisi=void 0,Object.isExists(this.listePeriodes)&&this.listePeriodes.forEach(i=>{this.toggleStateExceptionPeriode[i.codePeriode]="add"})}initNewCompetence(){this.idMatiereChoisie>0&&Object.isExists(this.matiereChoisie)&&(this.matiereChoisie.competences.edRemove(t=>t.temporaire),this.matiereChoisie.competences.push(new c.C5z({id:0,libelle:"",elementsProgramme:[],editable:!0,temporaire:!0})))}editCompetence(t,i){this.setUneditableCompetence(!1),this.backupCompetencesEditables[t.id]=new c.C5z(t),t.editable=!0}deleteCompetence(t){if(t.elementsProgramme.length>0)return void this.uiService.notifyEvent(c.DOJ.genericError,"Cette comp\xe9tence contient encore des \xe9l\xe9ments de programme, vous ne pouvez pas la supprimer.","Catalogue","icon-ed_carnetnotes");const i={id:this.modalService.getModalsCount()+1,keyboard:!1,ignoreBackdropClick:!0,initialState:{title:"Suppression d'une comp\xe9tence",message:"Souhaitez vous vraiment supprimer cette comp\xe9tence ?",warningButton:"OK"}};this.modalService.show(y.z,i),this.modalService.onHide.pipe((0,f.q)(1)).subscribe(o=>{o===M.G.validation&&(this.loader=this.lsuService.supprimeCompetence(this.idCycleChoisi.value,this.idMatiereChoisie,t.id).subscribe({next:()=>{delete this.backupCompetencesEditables[t.id],this.idCompetenceChoisie=void 0,this.uiService.notifyEvent(c.DOJ.genericSuccess,"Suppression de la comp\xe9tence effectu\xe9e","Catalogue","icon-ed_carnetnotes")},error:l=>this.uiService.notifyEvent(l.action,l.message,"Erreur","icon-ed_carnetnotes")}))})}inputCompetenceKeyPress(t,i){("Enter"===t.key||"Enter"===t.code)&&this.saveCompetence(i),("Escape"===t.key||"Escape"===t.code)&&this.cancelUpdateCompetence(i)}saveCompetence(t){!c.FSr.isNotEmptyString(t.libelle,!0)||(this.loader=0!==t.id?this.lsuService.modifieCompetence(this.idCycleChoisi.value,this.matiereChoisie,t).subscribe({next:()=>{delete this.backupCompetencesEditables[t.id],this.uiService.notifyEvent(c.DOJ.genericSuccess,"Modification de la comp\xe9tence effectu\xe9e","Catalogue","icon-ed_carnetnotes")},error:i=>this.uiService.notifyEvent(i.action,i.message,"Erreur","icon-ed_carnetnotes")}):this.lsuService.enregistreCompetence(this.idCycleChoisi.value,this.matiereChoisie,t).subscribe({next:i=>{this.idMatiereChoisie>0&&this.matiereChoisie.competences.edRemove(o=>o.temporaire),this.setSelectedCompetence(i),this.uiService.notifyEvent(c.DOJ.genericSuccess,`La comp\xe9tence <strong>${t.libelle}</strong> a bien \xe9t\xe9 sauvegard\xe9e !`,"Catalogue","icon-ed_carnetnotes")},error:i=>this.uiService.notifyEvent(i.action,i.message,"Erreur","icon-ed_carnetnotes")}))}cancelUpdateCompetence(t){0===t.id?this.matiereChoisie.competences.pop():(Object.assign(t,this.backupCompetencesEditables[t.id]),t.editable=!1)}initNewElemProg(){this.editElemProg({id:0,idOrigineCatalogue:0,libelle:"",imprime:!1,idProf:this.prof.id,idCompetence:this.idCompetenceChoisie,libelleCompetence:this.competenceChoisie.libelle,composantes:[]})}editElemProg(t){const i={id:this.modalService.getModalsCount()+1,keyboard:!1,ignoreBackdropClick:!0,initialState:{elemProg:new c.tnE(t),paramsLSU:this.paramsLSU,prof:this.prof,matiereChoisie:this.matiereChoisie}};this.modalService.show(U,i).content.onClose$.pipe((0,f.q)(1)).subscribe(l=>{Object.isExists(l)&&(this.loader=0!==l.idOrigineCatalogue?this.lsuService.modifieElementProgramme(this.idCycleChoisi.value,this.matiereChoisie,this.competenceChoisie,l).subscribe({next:s=>{this.uiService.notifyEvent(c.DOJ.genericSuccess,"Modification de l'\xe9l\xe9ment de programme effectu\xe9e","Catalogue","icon-ed_carnetnotes")},error:s=>{this.uiService.notifyEvent(s.action,s.message,"Erreur","icon-ed_carnetnotes")}}):this.lsuService.enregistreElementProgramme(this.idCycleChoisi.value,this.matiereChoisie,this.competenceChoisie,l).subscribe(s=>{this.uiService.notifyEvent(c.DOJ.genericSuccess,`L'\xe9l\xe9ment de programme <strong>${s.libelle}</strong> a bien \xe9t\xe9 sauvegard\xe9 !`,"Catalogue","icon-ed_carnetnotes")},s=>{this.uiService.notifyEvent(s.action,s.message,"Erreur","icon-ed_carnetnotes")}))})}deleteElemProg(t){const i={id:this.modalService.getModalsCount()+1,keyboard:!1,ignoreBackdropClick:!0,initialState:{title:"Suppression d'un \xe9l\xe9ment de programme",message:"Souhaitez vous vraiment supprimer cet \xe9l\xe9ment de programme ?",warningButton:"OK"}};this.modalService.show(y.z,i),this.modalService.onHide.pipe((0,f.q)(1)).subscribe(o=>{o===M.G.validation&&(this.loader=this.lsuService.supprimeElementProgramme(this.idCycleChoisi.value,this.idMatiereChoisie,this.idCompetenceChoisie,t).subscribe(()=>{this.uiService.notifyEvent(c.DOJ.genericSuccess,"Suppression de l'\xe9l\xe9ment de programme effectu\xe9","Catalogue","icon-ed_carnetnotes")},l=>this.uiService.notifyEvent(l.action,l.message,"Erreur","icon-ed_carnetnotes")))})}initNewCA(t){this.editCA(t,{id:0,libelle:"",idProf:this.prof.id})}editCA(t,i){const o={id:this.modalService.getModalsCount()+1,keyboard:!1,ignoreBackdropClick:!0,initialState:{elemProg:new c.tnE(t),ca:new c.a_R(i),paramsLSU:this.paramsLSU,prof:this.prof,matiereChoisie:this.matiereChoisie}};this.modalService.show(U,o).content.onClose$.pipe((0,f.q)(1)).subscribe(s=>{Object.isExists(s)&&(this.loader=0!==s.id?this.lsuService.modifieCA(this.idCycleChoisi.value,this.matiereChoisie,this.competenceChoisie,t,s).subscribe(d=>{this.uiService.notifyEvent(c.DOJ.genericSuccess,"Modification de la connaissance associ\xe9e effectu\xe9e","Catalogue","icon-ed_carnetnotes")},d=>{this.uiService.notifyEvent(d.action,d.message,"Erreur","icon-ed_carnetnotes")}):this.lsuService.enregistreCA(this.idCycleChoisi.value,this.matiereChoisie,this.competenceChoisie,t,s).subscribe(d=>{this.uiService.notifyEvent(c.DOJ.genericSuccess,`La connaissance associ\xe9e <strong>${d.libelle}</strong> a bien \xe9t\xe9 sauvegard\xe9e !`,"Catalogue","icon-ed_carnetnotes")},d=>{this.uiService.notifyEvent(d.action,d.message,"Erreur","icon-ed_carnetnotes")}))})}deleteCA(t,i){const o={id:this.modalService.getModalsCount()+1,keyboard:!1,ignoreBackdropClick:!0,initialState:{title:"Suppression d'une connaissance associ\xe9e",message:"Souhaitez vous vraiment supprimer cette connaissance associ\xe9e ?",warningButton:"OK"}};this.modalService.show(y.z,o),this.modalService.onHide.pipe((0,f.q)(1)).subscribe(l=>{l===M.G.validation&&(this.loader=this.lsuService.supprimeConnaissanceAssociee(this.idCycleChoisi.value,this.idMatiereChoisie,this.idCompetenceChoisie,t,i).subscribe(()=>{this.uiService.notifyEvent(c.DOJ.genericSuccess,"Suppression de la connaissance associ\xe9e effectu\xe9e","Catalogue","icon-ed_carnetnotes")},s=>this.uiService.notifyEvent(s.action,s.message,"Erreur","icon-ed_carnetnotes")))})}getNbElemProgEnseignementPeriode(t,i,o){let l=0;return t.competences.forEach(s=>{l+=this.getNbElemProgCompetencePeriode(s,i,o)}),l}getNbElemProgCompetencePeriode(t,i,o){let l=0;return o?t.elementsProgramme.forEach(s=>{this.isExceptionElemProgPeriode(s,i)||l++}):l=t.elementsProgramme.length,l}isExceptionElemProgPeriode(t,i){const o=this.listeExceptionsPeriodes.find(l=>t.idOrigineCatalogue===l.idOrigineCatalogue);return!!Object.isExists(o)&&o.periodes.findIndex(l=>i.codePeriode===l.codePeriode)>-1}elemProgIsAlreadyAssociate(t){if("N"===this.moduleSource)return this.selectedItem.elementsProgramme.findIndex(o=>t.idOrigineCatalogue===o.idOrigineCatalogue&&!o.idConnaissance)>-1;if("CDT"===this.moduleSource){let i;if(i=this.sideCDT===c.P2J.AFAIRE?this.selectedItem.aFaire.elementsProg:this.selectedItem.seance?.elementsProg,Object.isExists(i)&&Array.isArray(i))return i.findIndex(l=>t.idOrigineCatalogue===l.id)>-1}return!1}associateElemProg(t){if("N"===this.moduleSource){if(this.selectedItem.elementsProgramme.some(s=>t.idOrigineCatalogue===s.idOrigineCatalogue&&s.idConnaissance>0))return void this.uiService.notifyEvent(c.DOJ.genericWarning,"Vous ne pouvez pas ajouter cet \xe9l\xe9ment avec des connaissances d\xe9j\xe0 s\xe9lectionn\xe9es !","Evaluation","icon-ed_carnetnotes");const o=new c.tnE(t);Object.isExists(this.selectedItem.elementsProgramme)||(this.selectedItem.elementsProgramme=[]),o.id=0,o.idConnaissance=0,o.idMatiere=this.idMatiereChoisie,o.libelleMatiere=this.matiereChoisie.libelle;const l=this.selectedItem.getEtatImprimeForUniqueID(o.idOrigineCatalogue);this.selectedItem.elementsProgramme.push(o),this.paramsLSU.nbElemsImprimes<this.paramsLSU.nbElemMaxAImprimer&&(this.selectedItem.setEtatImprime(o,!0),(!l.isExist||!1===l.status)&&this.paramsLSU.nbElemsImprimes++),this.uiService.notifyEvent(c.DOJ.genericSuccess,"El\xe9ment de programme ajout\xe9","Evaluation","icon-ed_carnetnotes")}if("CDT"===this.moduleSource&&this.selectedItem instanceof c.B5X){const i=new c.B5X(this.selectedItem);i.typeSaisie=this.sideCDT===c.P2J.AFAIRE?c.ce3.T:c.ce3.C,this.elemProgIsAlreadyAssociate(t)||(this.loader=this.cahierDeTexteService.associateElemProg(i,t).subscribe({next:()=>{const o=new c.qGp({id:t.idOrigineCatalogue,libelle:t.libelle,libelleCompetence:t.libelleCompetence,libelleMatiere:t.libelleMatiere});this.sideCDT===c.P2J.AFAIRE?this.selectedItem.aFaire.elementsProg.push(o):this.selectedItem.seance.elementsProg.push(o),this.uiService.notifyEvent(c.DOJ.genericSuccess,"\xc9l\xe9ment de programme ajout\xe9","Cahier de textes","icon-ed_cahierdetexte")},error:o=>this.uiService.notifyEvent(o.action,o.message,"Erreur","icon-ed_cahierdetexte")}))}t.connaissancesAssociees.length>0&&"N"===this.moduleSource&&this.showConnaissancesAssociees(t)}connaissanceIsAlreadyAssociate(t,i){return"N"===this.moduleSource&&this.selectedItem.elementsProgramme.findIndex(l=>t.idOrigineCatalogue===l.idOrigineCatalogue&&i.id===l.idConnaissance)>-1}associateConnaissance(t,i){if("N"===this.moduleSource){if(this.selectedItem.elementsProgramme.some(d=>t.idOrigineCatalogue===d.idOrigineCatalogue&&0===d.idConnaissance))return void this.uiService.notifyEvent(c.DOJ.genericWarning,"Vous ne pouvez pas ajouter cette connaissance si l'\xe9l\xe9ment de programme est d\xe9j\xe0 s\xe9lectionn\xe9 !","Evaluation","icon-ed_carnetnotes");const l=new c.tnE(t);Object.isExists(this.selectedItem.elementsProgramme)||(this.selectedItem.elementsProgramme=[]),l.libelle=i.libelle,l.idConnaissance=i.id,l.id=0,l.idMatiere=this.idMatiereChoisie,l.libelleMatiere=this.matiereChoisie.libelle;const s=this.selectedItem.getEtatImprimeForUniqueID(l.idOrigineCatalogue);this.selectedItem.elementsProgramme.push(l),this.paramsLSU.nbElemsImprimes<this.paramsLSU.nbElemMaxAImprimer&&(this.selectedItem.setEtatImprime(l,!0),(!s.isExist||!1===s.status)&&this.paramsLSU.nbElemsImprimes++),this.uiService.notifyEvent(c.DOJ.genericSuccess,"El\xe9ment de programme ajout\xe9","Evaluation","icon-ed_carnetnotes")}}isAllElemProgExcludedOnPeriode(){let t=0;return!(!Object.isExists(this.competenceChoisie)||"N"!==this.moduleSource)&&(this.competenceChoisie.elementsProgramme.forEach(i=>{this.isExceptionElemProgPeriode(i,this.periodeSelected)&&t++}),t===this.competenceChoisie.elementsProgramme.length)}toggleActivationPeriode(t,i,o){let l=!1;if(o)for(let d=0;d<t.length;d++)if(this.isExceptionElemProgPeriode(t[d],i)){this.toggleStateExceptionPeriode[i.codePeriode]="delete";break}l=t.length>1?"add"===this.toggleStateExceptionPeriode[i.codePeriode]:!this.isExceptionElemProgPeriode(t[0],i);const s=l?this.notesGestionService.addExceptionElemProgPeriode(this.entitySelected.typeEntity,this.entitySelected.id,this.matiereSelected.code,this.matiereSelected.codeSSMatiere,t,i):this.notesGestionService.deleteExceptionElemProgPeriode(this.entitySelected.typeEntity,this.entitySelected.id,this.matiereSelected.code,this.matiereSelected.codeSSMatiere,t,i);this.loader=s.subscribe({next:()=>{t.forEach(d=>{let p,_=this.listeExceptionsPeriodes.find(m=>d.idOrigineCatalogue===m.idOrigineCatalogue);Object.isExists(_)&&(p=_.periodes.find(m=>i.codePeriode===m.codePeriode)),!l&&Object.isExists(_)&&Object.isExists(p)?(_.periodes.edRemove(m=>p.codePeriode===m.codePeriode),0===_.periodes.length&&this.listeExceptionsPeriodes.edRemove(m=>_.idOrigineCatalogue===m.idOrigineCatalogue)):l&&(Object.isExists(_)||(_=new c.njk(d),this.listeExceptionsPeriodes.push(_)),Object.isExists(p)||(p=new c.Gp8(i)),_.periodes.push(p))}),t.length>1&&(this.toggleStateExceptionPeriode[i.codePeriode]=l?"delete":"add")},error:d=>this.uiService.notifyEvent(d.action,d.message,"Erreur","icon-ed_carnetnotes")})}close(){this.modalRef.hide()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.CnD),e.Y36(c.x1h),e.Y36(c.mYE),e.Y36(c.VD2),e.Y36(c.LD8),e.Y36(c.s6h),e.Y36(S.UZ),e.Y36(S.tT),e.Y36(c.Lps),e.Y36(c.VLf))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ed-catalogue-lsu"]],inputs:{prof:"prof",paramsLSU:"paramsLSU",selectedItem:"selectedItem",catalogueReadOnly:"catalogueReadOnly",moduleSource:"moduleSource",listeClasses:"listeClasses",entitySelected:"entitySelected",periodeSelected:"periodeSelected",sideCDT:"sideCDT"},features:[e.qOj],decls:19,vars:10,consts:[["aria-labelledby","dialog-title-catalogue-lsu","aria-modal","true","role","dialog"],[1,"modal-header","modal-catalogue-lsu"],["id","dialog-title-catalogue-lsu",1,"modal-title"],["type","button","aria-label","Fermer cette fen\xeatre",1,"btn-close","d-print-none",3,"click"],["id","modal-catalogue-lsu",1,"modal-body",3,"ngBusy"],["name","formCatalogueLSU","novalidate",""],["class","row",4,"ngIf"],["type","info","class","with-margin-bottom",4,"ngIf"],[1,"modal-footer","catalogue-lsu"],[1,"w-100"],["type","button",1,"btn","btn-primary","float-end",3,"click"],[1,"clearfix"],[4,"ngIf"],[1,"row"],[1,"col-lg-8"],["dropdown","",1,"btn-group",3,"isOpen"],["type","button","id","button-cycle","dropdownToggle","","aria-controls","dropdown-cycle",1,"btn","btn-secondary","dropdown-toggle"],["class","dropdown-menu","id","dropdown-cycle","role","menu","aria-labelledby","button-cycle",4,"dropdownMenu"],["id","dropdown-cycle","role","menu","aria-labelledby","button-cycle",1,"dropdown-menu"],["role","menuitem",4,"ngFor","ngForOf","ngForTrackBy"],["role","menuitem"],["type","button",1,"dropdown-item",3,"title","ngClass","click"],["type","button","id","button-classe","dropdownToggle","","aria-controls","dropdown-classe",1,"btn","btn-secondary","dropdown-toggle"],["class","dropdown-menu","id","dropdown-classe","role","menu","aria-labelledby","button-classe",4,"dropdownMenu"],["dropdown","",1,"btn-group",3,"isOpen","isDisabled"],["type","button","id","button-matiere","dropdownToggle","","aria-controls","dropdown-matiere",1,"btn","btn-secondary","dropdown-toggle"],["class","dropdown-menu","id","dropdown-matiere","role","menu","aria-labelledby","button-matiere",4,"dropdownMenu"],["class","col-lg-4 d-print-none",4,"ngIf"],["id","dropdown-classe","role","menu","aria-labelledby","button-classe",1,"dropdown-menu"],["type","button",1,"dropdown-item",3,"title","click"],["id","dropdown-matiere","role","menu","aria-labelledby","button-matiere",1,"dropdown-menu"],["role","menuitem",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["role","menuitem",3,"ngClass"],[1,"col-lg-4","d-print-none"],["dropdown","",1,"btn-group","float-end"],["type","button","id","button-editions","dropdownToggle","","aria-controls","dropdown-editions",1,"btn","btn-secondary","dropdown-toggle"],["class","dropdown-menu dropdown-menu-right","id","dropdown-editions","role","menu","aria-labelledby","button-editions",4,"dropdownMenu"],["id","dropdown-editions","role","menu","aria-labelledby","button-editions",1,"dropdown-menu","dropdown-menu-right"],["type","button","edLightbox","","title","R\xe9capitulatif des \xe9valuations pour la classe, \xe9l\xe9ments de programme pr\xe9vus sur l'ann\xe9e scolaire uniquement",1,"dropdown-item",3,"file","typeFichier","otherTypeDL","additionalData"],["aria-hidden","true",1,"fa","fa-search"],["type","button","edLightbox","","title","R\xe9capitulatif des \xe9valuations pour la classe pour l'ensemble des \xe9l\xe9ments de programme du catalogue",1,"dropdown-item",3,"file","typeFichier","otherTypeDL","additionalData"],["type","info",1,"with-margin-bottom"],["role","menu",1,"col-lg-4","col-md-6","col-6m","menu-disciplines"],["role","group"],[1,"col-lg-8","col-md-6","col-6"],["class","liste-elem-prog",4,"ngIf"],["type","button",1,"btn","btn-link",3,"title","click"],["aria-hidden","true",1,"fa","fa-angle-right",3,"ngClass"],["role","group",4,"ngIf"],["role","group","class","ajout-competence",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],["class","bloc-modif-competence",4,"ngIf"],["class","competence btn btn-link","type","button",3,"title","click",4,"ngIf"],["type","button","class","btn btn-danger-color no-padding no-background float-end margin-whitespace","title","supprimer la comp\xe9tence","href","",3,"routerLink","click",4,"ngIf"],["type","button","class","btn btn-primary-color no-padding no-background float-end","title","modifier le libell\xe9","href","",3,"routerLink","click",4,"ngIf"],["type","button",1,"competence","btn","btn-link",3,"title","click"],["type","button","title","supprimer la comp\xe9tence","href","",1,"btn","btn-danger-color","no-padding","no-background","float-end","margin-whitespace",3,"routerLink","click"],["aria-hidden","true",1,"fa","fa-trash","i-small"],["type","button","title","modifier le libell\xe9","href","",1,"btn","btn-primary-color","no-padding","no-background","float-end",3,"routerLink","click"],["aria-hidden","true",1,"fa","fa-pencil","i-small"],[1,"bloc-modif-competence"],["type","text",1,"form-control",3,"name","id","ngModel","keydown","ngModelChange"],["type","button","class","btn btn-primary-color no-padding no-background margin-whitespace","title","sauvegarder les modifications",3,"click",4,"ngIf"],["type","button","title","annuler les modifications",1,"btn","btn-danger-color","no-padding","no-background","margin-whitespace",3,"click"],["aria-hidden","true",1,"fa","fa-close"],["type","button","title","sauvegarder les modifications",1,"btn","btn-primary-color","no-padding","no-background","margin-whitespace",3,"click"],["aria-hidden","true",1,"icon-ed_save"],["role","group",1,"ajout-competence"],["type","button","title","Ajouter une comp\xe9tence",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"liste-elem-prog"],[3,"ngClass",4,"ngIf"],[1,"btn-group-md","margin-top-10"],["type","button","title","Ajouter un \xe9l\xe9ment de programme / attendu de fin de cycle","class","btn btn-primary",3,"click",4,"ngIf"],["class","ep-afc",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","periode cliquable",4,"ngFor","ngForOf","ngForTrackBy"],[1,"periode","cliquable"],["type","button",1,"btn","no-padding","no-background","text-normal",3,"title","click"],[1,"ep-afc"],[3,"colSpan"],[1,"elemprogramme",3,"ngClass"],[1,"boutons-actions"],[1,"icones-gauche","my-2"],["class","btn btn-link elem-prog-selectable","tabindex","0","type","button",3,"title","click",4,"ngIf"],["type","button","title","Ajouter une connaissance associ\xe9e","class","btn no-padding no-background btn-primary-color mb-1",3,"click",4,"ngIf"],["aria-hidden","true",1,"fa","fa-puzzle-piece","margin-whitespace",3,"title"],["class","fa fa-group","title","Partag\xe9 par tous les enseignants","aria-hidden","true",4,"ngIf"],["class","icon-ed_enseignant","title","Non partag\xe9","aria-hidden","true",4,"ngIf"],["type","button",1,"btn","active","no-padding","no-background",3,"title","click"],["aria-hidden","true",1,"fa","fa-square-o"],["tabindex","0","type","button",1,"btn","btn-link","elem-prog-selectable",3,"title","click"],["type","button","title","Ajouter une connaissance associ\xe9e",1,"btn","no-padding","no-background","btn-primary-color","mb-1",3,"click"],["title","Partag\xe9 par tous les enseignants","aria-hidden","true",1,"fa","fa-group"],["title","Non partag\xe9","aria-hidden","true",1,"icon-ed_enseignant"],["aria-hidden","true",1,"fa","fa-check"],["type","button","title","modifier cet \xe9l\xe9ment",1,"btn","btn-primary-color","no-padding","no-background",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],["type","button","title","supprimer cet \xe9l\xe9ment",1,"btn","btn-danger-color","no-padding","no-background","margin-whitespace",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["class","periode text-center",4,"ngFor","ngForOf","ngForTrackBy"],[1,"periode","text-center"],[1,"btn-group-sm"],["type","button",1,"btn","btn-secondary",3,"click"],["aria-hidden","true",1,"fa",3,"ngClass"],["class","elemprogramme-ca",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"elemprogramme-ca",3,"ngClass"],["aria-hidden","true",1,"fa","fa-puzzle-piece",3,"title"],["class","fa fa-check","aria-hidden","true",4,"ngIf"],["type","button","class","btn active no-padding no-background","title","Ajouter cette connaissance associ\xe9e",3,"click",4,"ngIf"],["class","boutons-actions",4,"ngIf"],["type","button","title","Ajouter cette connaissance associ\xe9e",1,"btn","active","no-padding","no-background",3,"click"],["type","button","title","modifier cette connaissance",1,"btn","btn-primary-color","no-padding","no-background",3,"click"],["type","button","title","supprimer cette connaissance",1,"btn","btn-danger-color","no-padding","no-background","margin-whitespace",3,"click"],["type","button","title","Ajouter un \xe9l\xe9ment de programme / attendu de fin de cycle",1,"btn","btn-primary",3,"click"],["type","info","aria-hidden","true",1,"text-center"],["aria-hidden","true",1,"fa","fa-group","margin-whitespace"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return i.close()}),e.qZA()(),e.TgZ(5,"div",4)(6,"form",5),e.YNc(7,se,6,2,"div",6),e.YNc(8,he,11,6,"div",6),e.YNc(9,be,2,0,"alert",7),e.YNc(10,xe,2,0,"alert",7),e.YNc(11,Ct,8,6,"div",6),e.qZA()(),e.TgZ(12,"div",8)(13,"div",9)(14,"button",10),e.NdJ("click",function(){return i.close()}),e._uU(15,"Fermer"),e.qZA(),e._UZ(16,"div",11),e.YNc(17,ht,2,1,"ng-container",12),e._UZ(18,"div",11),e.qZA()()()),2&t&&(e.uIk("aria-hidden",i.ariaHidden),e.xp6(3),e.AsE("",i.titleModale," du ",i.libelleCycle,""),e.xp6(2),e.Q6J("ngBusy",i.loader),e.xp6(2),e.Q6J("ngIf","GESTCATLSU"!==i.moduleSource&&(null==i.prof.parametrages?null:i.prof.parametrages.choixCycleCatalogue)&&i.cycles.length>1),e.xp6(1),e.Q6J("ngIf","GESTCATLSU"===i.moduleSource),e.xp6(1),e.Q6J("ngIf",(null==i.catalogue?null:i.catalogue.matieres.length)<=0),e.xp6(1),e.Q6J("ngIf","GESTCATLSU"===i.moduleSource&&1===(null==i.matiereSelected?null:i.matiereSelected.avecSousMatiere)),e.xp6(1),e.Q6J("ngIf",(null==i.catalogue?null:i.catalogue.matieres.length)>0&&("GESTCATLSU"!==i.moduleSource||0===(null==i.matiereSelected?null:i.matiereSelected.avecSousMatiere))),e.xp6(6),e.Q6J("ngIf",i.idMatiereChoisie>0))},dependencies:[C.mk,C.sg,C.O5,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,te.rH,ie.wx,O.Hz,O.Mq,O.TO,ne.DC,oe.l,c.d0N,L.$],styles:["#modal-catalogue-lsu[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{margin:10px 0 15px}#modal-catalogue-lsu[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], #modal-catalogue-lsu[_ngcontent-%COMP%]   .btn-group-md[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:3px}#modal-catalogue-lsu[_ngcontent-%COMP%]   li.niveau-ssmatiere[_ngcontent-%COMP%]{margin-left:15px}#modal-catalogue-lsu[_ngcontent-%COMP%]   li.niveau-matiere[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:bolder}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%]{max-height:50vh;overflow:hidden}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{max-height:50vh;overflow-y:auto}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:5px 0}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]{background-color:var(--smalldark-placeholder-color)}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-decoration:none}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{text-decoration:underline}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{background-color:var(--menu-hover-color)}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{margin-top:10px}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-weight:bolder}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{margin-left:25px}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{list-style-type:disc}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .bloc-modif-competence[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 0}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > ul.ajout-competence[_ngcontent-%COMP%]{margin-top:10px}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > ul.ajout-competence[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;background-color:unset}#modal-catalogue-lsu[_ngcontent-%COMP%]   div.menu-disciplines[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > ul.ajout-competence[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:unset}#modal-catalogue-lsu[_ngcontent-%COMP%]   .periode[_ngcontent-%COMP%]{padding:0 5px 5px;white-space:nowrap}#modal-catalogue-lsu[_ngcontent-%COMP%]   .boutons-actions[_ngcontent-%COMP%]{padding:0 5px;text-align:center}#modal-catalogue-lsu[_ngcontent-%COMP%]   .liste-elem-prog[_ngcontent-%COMP%]   td.boutons-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}#modal-catalogue-lsu[_ngcontent-%COMP%]   .liste-elem-prog[_ngcontent-%COMP%]   div.icones-gauche[_ngcontent-%COMP%]{font-weight:400}#modal-catalogue-lsu[_ngcontent-%COMP%]   .liste-elem-prog[_ngcontent-%COMP%]   div.icones-gauche[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;margin-right:3px}#modal-catalogue-lsu[_ngcontent-%COMP%]   .liste-elem-prog[_ngcontent-%COMP%]   div.icones-gauche[_ngcontent-%COMP%]   i.fa-group[_ngcontent-%COMP%], #modal-catalogue-lsu[_ngcontent-%COMP%]   .liste-elem-prog[_ngcontent-%COMP%]   div.icones-gauche[_ngcontent-%COMP%]   i.icon-ed_enseignant[_ngcontent-%COMP%]{color:#3c66e6;font-size:17px}#modal-catalogue-lsu[_ngcontent-%COMP%]   .liste-elem-prog[_ngcontent-%COMP%]   div.icones-gauche[_ngcontent-%COMP%]   i.fa-puzzle-piece[_ngcontent-%COMP%]{color:#0882b9}#modal-catalogue-lsu[_ngcontent-%COMP%]   .liste-elem-prog[_ngcontent-%COMP%]   a.elem-prog-selectable[_ngcontent-%COMP%]:focus{outline:none}#modal-catalogue-lsu[_ngcontent-%COMP%]   .fa-check[_ngcontent-%COMP%]{color:var(--light-primary-color)}#modal-catalogue-lsu[_ngcontent-%COMP%]   i.icon-ed_save[_ngcontent-%COMP%]{display:inline-block;margin-right:1px}#modal-catalogue-lsu[_ngcontent-%COMP%]   .ep-afc[_ngcontent-%COMP%]{border-left:4px solid var(--light-primary-color);background:var(--footer-primary-color)}#modal-catalogue-lsu[_ngcontent-%COMP%]   .ep-afc[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child > h4[_ngcontent-%COMP%], #modal-catalogue-lsu[_ngcontent-%COMP%]   .ep-afc[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child, #modal-catalogue-lsu[_ngcontent-%COMP%]   .ep-afc[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]:first-child{padding-left:5px}#modal-catalogue-lsu[_ngcontent-%COMP%]   .elemprogramme[_ngcontent-%COMP%]:last-child{border-bottom:none}#modal-catalogue-lsu[_ngcontent-%COMP%]   .elemprogramme.eca-active[_ngcontent-%COMP%]{border-bottom:none}#modal-catalogue-lsu[_ngcontent-%COMP%]   .liste-elem-prog[_ngcontent-%COMP%]   .elemprogramme-ca[_ngcontent-%COMP%]{display:none;border-left:2px solid var(--dark-placeholder-color)}#modal-catalogue-lsu[_ngcontent-%COMP%]   .liste-elem-prog[_ngcontent-%COMP%]   .elemprogramme-ca.eca-active[_ngcontent-%COMP%]{display:table-row}#modal-catalogue-lsu[_ngcontent-%COMP%]   .liste-elem-prog[_ngcontent-%COMP%]   .elemprogramme-ca.eca-active[_ngcontent-%COMP%] + .elemprogramme[_ngcontent-%COMP%]{border-top:1px solid #ddd}#modal-catalogue-lsu[_ngcontent-%COMP%]   .liste-elem-prog[_ngcontent-%COMP%]   .elemprogramme-ca[_ngcontent-%COMP%]   div.icones-gauche[_ngcontent-%COMP%]{margin-left:15px}#modal-catalogue-lsu[_ngcontent-%COMP%]   .boutons-actions[_ngcontent-%COMP%]   .fa-pencil[_ngcontent-%COMP%]{margin-left:5px}.modal-footer.catalogue-lsu[_ngcontent-%COMP%]   .alert-info[_ngcontent-%COMP%]{margin:10px 0;padding:10px}.modal-footer.catalogue-lsu[_ngcontent-%COMP%]   .alert-info[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]}),n})()}}]);