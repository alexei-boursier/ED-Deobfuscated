"use strict";(self.webpackChunked_web=self.webpackChunked_web||[]).push([[8947],{38947:(H,g,l)=>{l.d(g,{w:()=>Y});var r=l(45007),f=l(77579),e=l(94650),C=l(20388),u=l(36895),d=l(4602),p=l(93970),_=l(34414),c=l(34331);function h(n,o){1&n&&(e.TgZ(0,"tr"),e._UZ(1,"th"),e.TgZ(2,"th",3),e._uU(3,"Nom"),e.qZA()())}function v(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",4)(2,"button",5),e.NdJ("click",function(){const a=e.CHM(t).item,m=e.oxw();return e.KtG(m.removeEleve.emit(a))}),e._UZ(3,"i",6),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"displayNom"),e.qZA()()}if(2&n){const t=o.item;e.xp6(5),e.Oqu(e.xi3(6,1,t,!0))}}const T=function(){return["nom","prenom"]};let x=(()=>{class n{constructor(t){this.authStore=t,this.removeEleve=new e.vpe}trackByFn(){return(new d.$).transform("value.id")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.CnD))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ed-csl-eleves"]],inputs:{destinataires:"destinataires"},outputs:{removeEleve:"removeEleve"},decls:4,vars:7,consts:[["cssCustom","liste-destinataires-message",3,"datas","pagination","trackByFn"],["edSmartTableHeaderTmp",""],["edSmartTableBodyTmp",""],["stSort","nom",1,"cliquable","sortable-header"],["title","Retirer le destinataire"],["type","button","aria-label","Retirer le destinataire",1,"btn","btn-danger","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(t,s){1&t&&(e.TgZ(0,"ed-smart-table",0),e.ALo(1,"orderBy"),e.YNc(2,h,4,0,"ng-template",1),e.YNc(3,v,7,4,"ng-template",2),e.qZA()),2&t&&e.Q6J("datas",e.xi3(1,3,s.destinataires,e.DdM(6,T)))("pagination",!1)("trackByFn",s.trackByFn)},dependencies:[p.L,_.c,c.r,c.w,r.$t3,r.d0N],encapsulation:2,changeDetection:0}),n})();function y(n,o){1&n&&(e.TgZ(0,"tr"),e._UZ(1,"th"),e.TgZ(2,"th",3),e._uU(3,"Nom"),e.qZA()())}function b(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",4)(2,"button",5),e.NdJ("click",function(){const a=e.CHM(t).item,m=e.oxw();return e.KtG(m.removePersonnel.emit(a))}),e._UZ(3,"i",6),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"displayNom"),e.qZA()()}if(2&n){const t=o.item,s=e.oxw();e.xp6(5),e.Oqu(e.gM2(6,1,t,!0,!0,s.authStore.isFouE()))}}const Z=function(){return["nom","prenom"]};let F=(()=>{class n{constructor(t){this.authStore=t,this.removePersonnel=new e.vpe}trackByFn(){return(new d.$).transform("value.id")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.CnD))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ed-csl-personnels"]],inputs:{destinataires:"destinataires"},outputs:{removePersonnel:"removePersonnel"},decls:4,vars:7,consts:[["cssCustom","liste-destinataires-message",3,"datas","pagination","trackByFn"],["edSmartTableHeaderTmp",""],["edSmartTableBodyTmp",""],["stSort","nom",1,"cliquable","sortable-header"],["title","Retirer le destinataire"],["type","button","aria-label","Retirer le destinataire",1,"btn","btn-danger","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(t,s){1&t&&(e.TgZ(0,"ed-smart-table",0),e.ALo(1,"orderBy"),e.YNc(2,y,4,0,"ng-template",1),e.YNc(3,b,7,6,"ng-template",2),e.qZA()),2&t&&e.Q6J("datas",e.xi3(1,3,s.destinataires,e.DdM(6,Z)))("pagination",!1)("trackByFn",s.trackByFn)},dependencies:[p.L,_.c,c.r,c.w,r.$t3,r.d0N],encapsulation:2,changeDetection:0}),n})();function E(n,o){1&n&&(e.TgZ(0,"tr"),e._UZ(1,"th"),e.TgZ(2,"th",3),e._uU(3,"Nom"),e.qZA()())}function N(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",4)(2,"a",5),e.NdJ("click",function(){const a=e.CHM(t).item,m=e.oxw();return e.KtG(m.removeEnseignant.emit(a))}),e._UZ(3,"i",6),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"displayNom"),e.qZA()()}if(2&n){const t=o.item,s=e.oxw();e.xp6(5),e.Oqu(e.gM2(6,1,t,!0,!0,s.authStore.isFouE()))}}const k=function(){return["nom","prenom"]};let A=(()=>{class n{constructor(t){this.authStore=t,this.removeEnseignant=new e.vpe}trackByFn(){return(new d.$).transform("value.id")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.CnD))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ed-csl-enseignants"]],inputs:{destinataires:"destinataires"},outputs:{removeEnseignant:"removeEnseignant"},decls:4,vars:7,consts:[["cssCustom","liste-destinataires-message",3,"datas","pagination","trackByFn"],["edSmartTableHeaderTmp",""],["edSmartTableBodyTmp",""],["stSort","nom",1,"cliquable","sortable-header"],["title","Retirer le destinataire"],["aria-label","Retirer le destinataire",1,"btn","btn-danger","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(t,s){1&t&&(e.TgZ(0,"ed-smart-table",0),e.ALo(1,"orderBy"),e.YNc(2,E,4,0,"ng-template",1),e.YNc(3,N,7,6,"ng-template",2),e.qZA()),2&t&&e.Q6J("datas",e.xi3(1,3,s.destinataires,e.DdM(6,k)))("pagination",!1)("trackByFn",s.trackByFn)},dependencies:[p.L,_.c,c.r,c.w,r.$t3,r.d0N],encapsulation:2,changeDetection:0}),n})();function w(n,o){1&n&&(e.TgZ(0,"tr"),e._UZ(1,"th"),e.TgZ(2,"th",3),e._uU(3,"Nom"),e.qZA()())}function B(n,o){if(1&n&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function L(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",4)(2,"button",5),e.NdJ("click",function(){const a=e.CHM(t).item,m=e.oxw();return e.KtG(m.removeFamille.emit(a))}),e._UZ(3,"i",6),e.qZA()(),e.TgZ(4,"td")(5,"ul"),e.YNc(6,B,2,1,"li",7),e.ALo(7,"trackByProperty"),e.qZA()()()}if(2&n){const t=o.item,s=e.oxw();e.xp6(6),e.Q6J("ngForOf",s.rightNames(t))("ngForTrackBy",e.lcZ(7,2,"$index"))}}const q=function(){return["nom","prenom"]};let P=(()=>{class n{constructor(t){this.authStore=t,this.removeFamille=new e.vpe,this._displayNomPipe=new r.$t3}rightNames(t){return Object.isExists(t.responsable)&&t.responsable.id>0&&(0,r.Ofj)(t.responsable.contacts)?t.responsable.contacts.filter(s=>r.FSr.isNotEmptyString(s)):[this._displayNomPipe.transform(t,!0)]}trackByFn(){return(new d.$).transform("value.id")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.CnD))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ed-csl-familles"]],inputs:{destinataires:"destinataires"},outputs:{removeFamille:"removeFamille"},decls:4,vars:7,consts:[["cssCustom","liste-destinataires-message",3,"datas","pagination","trackByFn"],["edSmartTableHeaderTmp",""],["edSmartTableBodyTmp",""],["stSort","nom",1,"cliquable","sortable-header"],["title","Retirer le destinataire"],["type","button","aria-label","Retirer le destinataire",1,"btn","btn-danger","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(t,s){1&t&&(e.TgZ(0,"ed-smart-table",0),e.ALo(1,"orderBy"),e.YNc(2,w,4,0,"ng-template",1),e.YNc(3,L,8,4,"ng-template",2),e.qZA()),2&t&&e.Q6J("datas",e.xi3(1,3,s.destinataires,e.DdM(6,q)))("pagination",!1)("trackByFn",s.trackByFn)},dependencies:[u.sg,p.L,_.c,c.r,c.w,r.d0N,d.$],encapsulation:2,changeDetection:0}),n})();function S(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"h4",7),e._uU(2,"Enseignants"),e.qZA(),e.TgZ(3,"ed-csl-enseignants",8),e.NdJ("removeEnseignant",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onRemoveEnseignant(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("destinataires",t.enseignants)}}function U(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"h4",9),e._uU(2,"\xc9l\xe8ves"),e.qZA(),e.TgZ(3,"ed-csl-eleves",10),e.NdJ("removeEleve",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onRemoveEleve(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("destinataires",t.eleves)}}function J(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"h4",11),e._uU(2,"Personnels"),e.qZA(),e.TgZ(3,"ed-csl-personnels",12),e.NdJ("removePersonnel",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onRemovePersonnel(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("destinataires",t.personnels)}}function R(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"h4",13),e._uU(2,"Familles"),e.qZA(),e.TgZ(3,"ed-csl-familles",14),e.NdJ("removeFamille",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onRemoveFamille(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("destinataires",t.familles)}}let Y=(()=>{class n{constructor(t,s){this.authStore=t,this.modalRef=s,this.removed=[],this.onClose$=new f.x,this.title="Liste des destinaires"}ngOnInit(){this.enseignants=this.destinataires.filter(t=>r.dcH.ENSEIGNANT===t.type).edUniq("id"),this.personnels=this.destinataires.filter(t=>r.dcH.PERSONNEL===t.type).edUniq("id"),this.eleves=this.destinataires.filter(t=>r.dcH.ELEVE===t.type).edUniq("id"),this.familles=this.destinataires.filter(t=>r.dcH.FAMILLE_RESPONSABLE===t.type||r.dcH.FAMILLE_CONJOINT===t.type)}ngOnDestroy(){this.onClose$.complete(),this.removed=[]}onRemoveEnseignant(t){const s=this.enseignants.findIndex(i=>t.id===i.id);s>-1&&(this.removed.push(this.enseignants[s]),this.enseignants=this.enseignants.reduce((i,a)=>(t.id!==a.id&&i.push(a),i),[]))}onRemoveEleve(t){const s=this.eleves.findIndex(i=>t.id===i.id);s>-1&&(this.removed.push(this.eleves[s]),this.eleves=this.eleves.reduce((i,a)=>(t.id!==a.id&&i.push(a),i),[]))}onRemovePersonnel(t){const s=this.personnels.findIndex(i=>t.id===i.id);s>-1&&(this.removed.push(this.personnels[s]),this.personnels=this.personnels.reduce((i,a)=>(t.id!==a.id&&i.push(a),i),[]))}onRemoveFamille(t){const s=this.familles.findIndex(i=>t.id===i.id);s>-1&&(this.removed.push(this.familles[s]),this.familles=this.familles.reduce((i,a)=>(t.id!==a.id&&i.push(a),i),[]))}close(){this.onClose$.next(this.removed),this.modalRef.hide()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.CnD),e.Y36(C.UZ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ed-csl-liste"]],inputs:{destinataires:"destinataires",title:"title"},decls:12,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Fermer cette fen\xeatre",1,"btn-close","d-print-none",3,"click"],[1,"modal-body","body-modal-fscsl"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary","float-end",3,"click"],[1,"text-enseignant"],[3,"destinataires","removeEnseignant"],[1,"text-eleve"],[3,"destinataires","removeEleve"],[1,"text-personnel"],[3,"destinataires","removePersonnel"],[1,"text-famille"],[3,"destinataires","removeFamille"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return s.close()}),e.qZA()(),e.TgZ(4,"div",3),e.YNc(5,S,4,1,"div",4),e.YNc(6,U,4,1,"div",4),e.YNc(7,J,4,1,"div",4),e.YNc(8,R,4,1,"div",4),e.qZA(),e.TgZ(9,"div",5)(10,"button",6),e.NdJ("click",function(){return s.close()}),e._uU(11,"Fermer"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(s.title),e.xp6(3),e.Q6J("ngIf",s.enseignants.length>0),e.xp6(1),e.Q6J("ngIf",s.eleves.length>0),e.xp6(1),e.Q6J("ngIf",s.personnels.length>0),e.xp6(1),e.Q6J("ngIf",s.familles.length>0))},dependencies:[u.O5,x,F,A,P],styles:['.body-modal-fscsl{overflow:auto}.liste-destinataires-message>table th:nth-child(2){width:200px}.liste-destinataires-message>table td{min-width:50px;white-space:nowrap}.liste-destinataires-message>table td ul{padding-left:0}.liste-destinataires-message>table td:last-child{width:100%}.liste-destinataires-message .sortable-header:before{content:"\\f0dc";display:inline-block;font: 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;transform:translate(0);margin-right:5px}\n'],encapsulation:2,changeDetection:0}),n})()}}]);