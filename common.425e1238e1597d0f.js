"use strict";(self.webpackChunked_web=self.webpackChunked_web||[]).push([[8592],{584:(S,v,s)=>{s.d(v,{n:()=>n});var t=s(39646),e=s(63900),E=s(46590),a=s(54004),A=s(70262),f=s(94650),p=s(45007);let n=(()=>{class y{constructor(T,M,x){this.authStore=T,this.etablissementStore=M,this.etablissementService=x}resolve(T,M){return this.authStore.isProfOuPersonnel()?this.etablissementStore.ready().pipe((0,e.w)(x=>this.etablissementService.getNiveauxListe().pipe((0,E.d)(null))),(0,a.U)(x=>!0),(0,A.K)(x=>(0,t.of)(!0))):(0,t.of)(!0)}}return y.\u0275fac=function(T){return new(T||y)(f.LFG(p.CnD),f.LFG(p.VD2),f.LFG(p.Xmb))},y.\u0275prov=f.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},55423:(S,v,s)=>{s.d(v,{$:()=>b});var t=s(46590),e=s(18505),E=s(28746),a=s(54004),A=s(70262),f=s(82722),p=s(45007),n=s(94650),y=s(20388),D=s(92635),T=s(80125),M=s(2253);let x=(()=>{class i{constructor(o,u,m,C){this.modalRef=o,this.agendaService=u,this.loaderService=m,this.uiService=C,this.url=""}ngOnInit(){const o="GEN"===this.agenda.typeAgenda?this.agenda.typeAgenda:this.agenda.typeEntity,u="GEN"===this.agenda.typeAgenda?0:this.agenda.idEntity;this.loader=this.loaderService.show(this),this.agendaService.getIcalLink(o,u).pipe((0,e.b)(m=>{this.url=`https://api.ecoledirecte.com/v3/${m.url}`}),(0,E.x)(()=>{this.loaderService.hide(this)}),(0,A.K)(m=>this.uiService.notifyErrorThenEmpty(m,!0,"Erreur","fa fa-warning"))).subscribe()}close(){this.modalRef.hide()}}return i.\u0275fac=function(o){return new(o||i)(n.Y36(y.UZ),n.Y36(p.img),n.Y36(D.S),n.Y36(p.VLf))},i.\u0275cmp=n.Xpm({type:i,selectors:[["ed-modal-agenda-lien-ical"]],inputs:{agenda:"agenda"},decls:14,vars:2,consts:[["id","ical-link-modal",3,"ngBusy"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Fermer cette fen\xeatre",1,"btn-close","d-print-none",3,"click"],[1,"modal-body"],[1,"alert","alert-info"],[1,"modal-footer"],[1,"w-100"],["data-ng-disabled","icalLinkModalCtrl.url === ''","type","button",1,"btn","btn-primary","float-end",3,"edCopyFromClipboard"],[1,"h4"],["aria-hidden","true",1,"fa","fa-copy"]],template:function(o,u){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),n._uU(3,"Int\xe9grer l'agenda dans une application tierce"),n.qZA(),n.TgZ(4,"button",3),n.NdJ("click",function(){return u.close()}),n.qZA()(),n.TgZ(5,"div",4)(6,"div",5),n._uU(7,"R\xe9cup\xe9rer l'adresse de l'agenda au format iCal pour pouvoir y acc\xe9der \xe0 partir d'autres applications."),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7)(10,"button",8)(11,"span",9),n._UZ(12,"i",10),n._uU(13," Copier l'url dans le presse-papier "),n.qZA()()()()()),2&o&&(n.Q6J("ngBusy",u.loader),n.xp6(10),n.Q6J("edCopyFromClipboard",u.url))},dependencies:[T.DC,M._]}),i})();var Z=s(1618),O=s(36895),r=s(10137),h=s(4602);const l=function(i){return{"background-color":i}},_=function(i){return{"agenda-selected":i}};function P(i,c){if(1&i){const o=n.EpF();n.TgZ(0,"div",8)(1,"div",9)(2,"button",10),n.NdJ("click",function(){const C=n.CHM(o).$implicit,g=n.oxw(2);return n.KtG(g.openModalIcalLink(C))}),n._UZ(3,"i",11),n.qZA(),n.TgZ(4,"div",12)(5,"div",13)(6,"input",14),n.NdJ("change",function(){const C=n.CHM(o).$implicit,g=n.oxw(2);return n.KtG(g.selectAgenda(C))}),n.qZA(),n.TgZ(7,"label",15),n._uU(8),n.qZA()()()()()}if(2&i){const o=c.$implicit;n.xp6(6),n.Akn(n.VKq(11,l,""===o.couleurAgenda?"#37c7a1":o.couleurAgenda)),n.cQ8("id","agenda-",o.idEntity,"-",o.typeEntity,"-",o.typeAgenda,""),n.Q6J("checked",o.selected),n.xp6(1),n.cQ8("for","agenda-",o.idEntity,"-",o.typeEntity,"-",o.typeAgenda,""),n.Q6J("ngClass",n.VKq(13,_,o.selected)),n.xp6(1),n.hij(" ",o.libelle," ")}}const U=function(i){return{"with-scroll":i}};function d(i,c){if(1&i&&(n.TgZ(0,"div",6),n.YNc(1,P,9,15,"div",7),n.ALo(2,"trackByProperty"),n.qZA()),2&i){const o=c.ngIf,u=n.oxw();n.Q6J("ngClass",n.VKq(5,U,u.withHauteurMax)),n.xp6(1),n.Q6J("ngForOf",o)("ngForTrackBy",n.lcZ(2,3,"$index"))}}let b=(()=>{class i extends((0,p.kCV)()){constructor(o,u,m,C,g,I,F,L){super(),this.modalService=o,this.uiService=u,this.authStore=m,this.espaceDeTravailService=C,this.espaceDeTravailStore=g,this.loaderService=I,this.filtresAgendaEdtUserStore=F,this.cd=L,this.typeUser=this.authStore.currentUser.typeCompte,this.idUser=this.authStore.currentUser.id,this.isOpen=!0,this.tabEspacesDeTravail=[],this.idEntitySelected=this.idUser,this.typeEntitySelected=this.typeUser}ngOnInit(){this.titreModule=Object.isExists(this.titreModule)?this.titreModule:"Mes agendas",this.withHauteurMax=Object.isExists(this.withHauteurMax),this.initFromStorage()}ngOnChanges(o){this.variantCurrentUser=p.$ej.edDBUserSpecificKey(this.authStore.currentUser.codeOgec,this.typeUser,this.idUser),this.authStore.isEntreprise()||this.loadListeEspacesTravailUser()}loadListeEspacesTravailUser(){this.loader=this.loaderService.show(this),this.espaceDeTravailService.listeEspacesTravail(this.idUser,this.typeUser).pipe((0,t.d)((()=>Object.getEntity(this.espaceDeTravailStore.snapshot,this.variantCurrentUser))()),(0,e.b)(o=>{Object.isExpired(o)||this.updateAgendaDefaultSelected(o.espacesDeTravail)}),(0,E.x)(()=>this.loaderService.hide(this))).subscribe()}initFromStorage(){this.espaceDeTravailStore.select$().pipe((0,a.U)(o=>Object.getEntity(o,this.variantCurrentUser)),(0,e.b)(o=>{Object.isExists(o)&&this.updateAgendaDefaultSelected(o.espacesDeTravail)}),(0,A.K)(o=>this.uiService.notifyErrorThenEmpty(o,!0,"Erreur","fa fa-warning")),(0,f.R)(this.componentDestroyed$)).subscribe()}updateAgendaDefaultSelected(o){this.tabEspacesDeTravail=o,this.filtresAgendaEdtUserStore.listeAgendasToDisplay(this.tabEspacesDeTravail,this.typeEntitySelected,this.idEntitySelected).pipe((0,e.b)(u=>{const m=[...u];let C;if(this.typeEntitySelected===p.eTt.ESPACE_TRAVAIL?C=m.findIndex(g=>g.typeEntity===p.dcH.ESPACE_TRAVAIL&&g.idEntity===this.idEntitySelected&&g.typeAgenda===p.eTt.ESPACE_TRAVAIL):this.moduleCurrent===p.eTt.EDT?C=m.findIndex(g=>g.typeAgenda===p.eTt.EDT&&g.idEntity===this.idEntitySelected&&g.typeEntity===this.typeEntitySelected):(C=m.findIndex(g=>g.typeEntity===this.typeEntitySelected&&g.idEntity===this.idEntitySelected&&g.typeAgenda===p.eTt.GENERAL),this.authStore.isFamille()&&-1===C&&(C=m.findIndex(g=>g.typeAgenda===p.eTt.GENERAL))),this.addRDVPP){const g=m.findIndex(I=>I.typeEntity===p.eTt.RDVPP&&I.idEntity===this.idEntitySelected&&I.typeAgenda===p.eTt.RDVPP);g>-1&&(m[g].selected=!0)}C>-1&&(m[C].selected=!0),this.filtresAgendaEdtUserStore.tabAgendaEdtToDisplay=m,this.cd.markForCheck()})).subscribe()}openModalIcalLink(o){const u={agenda:o},m={id:this.modalService.getModalsCount()+1,ignoreBackdropClick:!0,initialState:u};this.modalService.show(x,m)}selectAgenda(o){this.filtresAgendaEdtUserStore.selectAgenda(o)}}return i.\u0275fac=function(o){return new(o||i)(n.Y36(y.tT),n.Y36(p.VLf),n.Y36(p.CnD),n.Y36(p.AUs),n.Y36(p.EYm),n.Y36(D.S),n.Y36(Z.c),n.Y36(n.sBO))},i.\u0275cmp=n.Xpm({type:i,selectors:[["ed-select-agendas"]],inputs:{typeEntitySelected:"typeEntitySelected",idEntitySelected:"idEntitySelected",typeUser:"typeUser",idUser:"idUser",moduleCurrent:"moduleCurrent",titreModule:"titreModule",withHauteurMax:"withHauteurMax",addRDVPP:"addRDVPP"},features:[n.qOj,n.TTD],decls:8,vars:6,consts:[[1,"ed-select-agendas",3,"ngBusy"],[1,"mes-agendas"],[1,"d-print-none",3,"isOpen","isOpenChange"],["accordion-heading",""],["accordion-body",""],["class","filtres-agenda ms-3 row",3,"ngClass",4,"ngIf"],[1,"filtres-agenda","ms-3","row",3,"ngClass"],["class","col-lg-12 col-md-4 col-xs-3 bloc-filtre",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-lg-12","col-md-4","col-xs-3","bloc-filtre"],[1,"row"],["type","button","title","Int\xe9grer l'agenda dans d'autres applications",1,"btn","btn-secondary","d-print-none","lien-partage","col-1",3,"click"],["aria-hidden","true",1,"fa","fa-share-alt","i-small"],[1,"col-11"],[1,"form-check"],["type","checkbox","name","agendaToDisplay",1,"form-check-input","checkmark","cliquable",3,"checked","id","change"],[1,"form-check-label","ms-1","libelle-agenda","fw-normal",3,"ngClass","for"]],template:function(o,u){1&o&&(n.TgZ(0,"div",0)(1,"accordion",1)(2,"accordion-group",2),n.NdJ("isOpenChange",function(C){return u.isOpen=C}),n.TgZ(3,"div",3),n._uU(4),n.qZA(),n.TgZ(5,"div",4),n.YNc(6,d,3,7,"div",5),n.ALo(7,"async"),n.qZA()()()()),2&o&&(n.Q6J("ngBusy",u.loader),n.xp6(2),n.Q6J("isOpen",u.isOpen),n.xp6(2),n.hij(" ",u.titreModule," "),n.xp6(2),n.Q6J("ngIf",n.lcZ(7,4,u.filtresAgendaEdtUserStore.selectTabAgendaEdtToDisplay())))},dependencies:[O.mk,O.sg,O.O5,r.Zf,r.U_,T.DC,O.Ov,h.$],styles:['.ed-select-agendas[_ngcontent-%COMP%]   .filtres-agenda[_ngcontent-%COMP%]   .bloc-filtre[_ngcontent-%COMP%]{padding:10px 0}.ed-select-agendas[_ngcontent-%COMP%]   .filtres-agenda[_ngcontent-%COMP%]   .bloc-filtre[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{height:20px;width:20px;border-color:transparent}.ed-select-agendas[_ngcontent-%COMP%]   .filtres-agenda[_ngcontent-%COMP%]   .bloc-filtre[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:7px;top:2px;width:7px;height:12px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg);content:"";position:absolute;display:none}.ed-select-agendas[_ngcontent-%COMP%]   .filtres-agenda[_ngcontent-%COMP%]   .bloc-filtre[_ngcontent-%COMP%]   .form-check-input.checkmark[_ngcontent-%COMP%]:focus{box-shadow:none}.ed-select-agendas[_ngcontent-%COMP%]   .filtres-agenda[_ngcontent-%COMP%]   .bloc-filtre[_ngcontent-%COMP%]   .libelle-agenda[_ngcontent-%COMP%]{height:20px;vertical-align:middle;display:inline}.ed-select-agendas[_ngcontent-%COMP%]   .filtres-agenda[_ngcontent-%COMP%]   .bloc-filtre[_ngcontent-%COMP%]   button.lien-partage[_ngcontent-%COMP%]{color:var(--light-primary-color);padding:0 4px;height:24px}'],changeDetection:0}),i})()},4477:(S,v,s)=>{s.d(v,{S:()=>A});var t=s(99658),e=s(96272),E=s(40030),a=s(94650);let A=(()=>{class f{}return f.\u0275fac=function(n){return new(n||f)},f.\u0275mod=a.oAB({type:f}),f.\u0275inj=a.cJS({imports:[t.m,e.Q,E.m]}),f})()},87338:(S,v,s)=>{s.d(v,{C:()=>U});var t=s(94650),e=s(45007),E=s(11302),a=s(36895),A=s(48536),f=s(43422),p=s(4602);function n(d,b){if(1&d&&(t.TgZ(0,"span"),t._UZ(1,"i",7),t.TgZ(2,"span",8),t._uU(3),t.qZA()()),2&d){const i=t.oxw();t.xp6(3),t.Oqu(i.title)}}function y(d,b){if(1&d){const i=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.toggleOpen())}),t._UZ(1,"i",7),t.TgZ(2,"span",8),t._uU(3),t.qZA()()}if(2&d){const i=t.oxw();t.xp6(3),t.Oqu(i.title)}}function D(d,b){if(1&d){const i=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.toggleOpen())}),t._UZ(1,"i",11),t.qZA()}}function T(d,b){if(1&d){const i=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.toggleOpen())}),t._UZ(1,"i",13),t.qZA()}}function M(d,b){if(1&d){const i=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(i);const o=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.deleteFile(o))}),t._UZ(1,"i",21),t.qZA()}}const x=function(d){return{"list-inline-item":d}},Z=function(){return[]};function O(d,b){if(1&d&&(t.TgZ(0,"li",16),t._UZ(1,"i",17),t.TgZ(2,"button",18),t._uU(3),t.qZA(),t.YNc(4,M,2,0,"button",19),t.qZA()),2&d){const i=b.$implicit,c=t.oxw(2);t.Q6J("ngClass",t.VKq(8,x,c.isInline)),t.xp6(2),t.Q6J("canExportToCloud",!0)("typeModule",c.edModuleCodes.CAHIER_DE_TEXTES)("file",i)("typeFichier",c.typeFichierTelechargement.CDT)("listFiles",i.isImage()?c.documents:t.DdM(10,Z)),t.xp6(1),t.hij(" ",i.libelle," "),t.xp6(1),t.Q6J("ngIf",c.canDeleteDocuments)}}const r=function(d){return{"list-inline":d}};function h(d,b){if(1&d&&(t.TgZ(0,"ul",14),t.YNc(1,O,5,11,"li",15),t.ALo(2,"trackByProperty"),t.qZA()),2&d){const i=t.oxw();t.Q6J("ngClass",t.VKq(5,r,i.isInline)),t.xp6(1),t.Q6J("ngForOf",i.documents)("ngForTrackBy",t.lcZ(2,3,"id"))}}const l=function(d){return{display:d}};function _(d,b){if(1&d){const i=t.EpF();t.TgZ(0,"div",22)(1,"ed-input-files",23),t.NdJ("successUpload",function(o){t.CHM(i);const u=t.oxw();return t.KtG(u.onUploadSuccess(o))}),t.qZA()()}if(2&d){const i=t.oxw();t.Q6J("ngStyle",t.VKq(3,l,i.isOpen?"block":"none")),t.xp6(1),t.Q6J("dropzoneConfig",i.dropZoneConfig)("config",i.inputFilesConfig)}}const P=["*"];let U=(()=>{class d{constructor(){this.canAddDocuments=!1,this.canDeleteDocuments=!1,this.dropzoneContainer=".dropzone-container",this.title="Documents joints",this.deleteDocument=new t.vpe,this.successUpload=new t.vpe,this.typeFichierTelechargement=e.Y9E,this.isOpen=!1,this.edModuleCodes=e.qzA,this._datePipe=new e.ifA}get isInline(){return this.typeContext===e.ce3.VIEDELACLASSE}ngOnInit(){this.inputFilesConfig={keepComplete:this.typeContext===e.ce3.VIEDELACLASSE,mode:e.qt_.CDT,dropzoneContainer:this.dropzoneContainer,libelleTitre:"D\xe9posez votre fichier ici, ou s\xe9lectionnez un fichier \xe0 l'aide du bouton.",idContexte:this.idContext,side:this.typeContext,fromCloudEnabled:this.fromCloudEnabled},this.dropZoneConfig={url:`${(0,E.Je)()}/televersement.awp?verbe=post&mode=${e.qt_.CDT}`,params:{idContexte:this.idContext,side:this.typeContext}}}ngOnChanges(i){Object.values(i).some(o=>o.isFirstChange())||((i.idContext&&i.idContext.currentValue!==i.idContext.previousValue||i.typeContext&&i.typeContext.currentValue!==i.typeContext.previousValue)&&(this.dropZoneConfig={...this.dropZoneConfig,params:{idContexte:this.idContext,side:this.typeContext}},this.inputFilesConfig={...this.inputFilesConfig,idContexte:this.idContext,side:this.typeContext,keepComplete:this.typeContext===e.ce3.VIEDELACLASSE},this.isOpen=!1),i.fromCloudEnabled&&i.fromCloudEnabled.currentValue!==i.fromCloudEnabled.previousValue&&(this.inputFilesConfig={...this.inputFilesConfig,fromCloudEnabled:this.fromCloudEnabled}),i.dropzoneContainer&&i.dropzoneContainer.currentValue!==i.dropzoneContainer.previousValue&&(this.inputFilesConfig={...this.inputFilesConfig,dropzoneContainer:this.dropzoneContainer}))}toggleOpen(i){this.isOpen=Object.isExists(i)?i:!this.isOpen}deleteFile(i){this.deleteDocument.emit(i)}onUploadSuccess(i){const c=new e.eD9(i);c.date=this._datePipe.transform(new Date,"yyyy-MM-dd"),c.type=e.Y9E.CDT,this.successUpload.emit(c)}}return d.\u0275fac=function(i){return new(i||d)},d.\u0275cmp=t.Xpm({type:d,selectors:[["ed-cdt-documents"]],inputs:{documents:"documents",fromCloudEnabled:"fromCloudEnabled",idContext:"idContext",typeContext:"typeContext",canAddDocuments:"canAddDocuments",canDeleteDocuments:"canDeleteDocuments",dropzoneContainer:"dropzoneContainer",title:"title"},outputs:{deleteDocument:"deleteDocument",successUpload:"successUpload"},features:[t.TTD],ngContentSelectors:P,decls:9,vars:6,consts:[[1,"ed-cdt-documents"],[4,"ngIf"],["class","btn active no-background no-padding","type","button",3,"click",4,"ngIf"],["class","btn float-end btn-action-rounded","type","button","title","Ajouter un document","aria-label","Afficher le bloc pour ajouter un document",3,"click",4,"ngIf"],["class","btn float-end btn-action-rounded","type","button","title","Annuler","aria-label","Masquer le bloc pour ajouter un document",3,"click",4,"ngIf"],["class","list-elem",3,"ngClass",4,"ngIf"],["class","margin-top-10",3,"ngStyle",4,"ngIf"],["aria-hidden","true",1,"fa","fa-paperclip","size-17"],[1,"margin-whitespace"],["type","button",1,"btn","active","no-background","no-padding",3,"click"],["type","button","title","Ajouter un document","aria-label","Afficher le bloc pour ajouter un document",1,"btn","float-end","btn-action-rounded",3,"click"],[1,"fa","fa-plus-circle","btn-primary-color"],["type","button","title","Annuler","aria-label","Masquer le bloc pour ajouter un document",1,"btn","float-end","btn-action-rounded",3,"click"],[1,"fa","fa-minus-circle","btn-primary-color"],[1,"list-elem",3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],["aria-hidden","true",1,"fa","fa-file"],["edLightbox","","type","button","title","Pr\xe9visualiser",1,"btn","btn-link","margin-whitespace",3,"canExportToCloud","typeModule","file","typeFichier","listFiles"],["class","btn margin-whitespace","title","Supprimer ce fichier","type","button",3,"click",4,"ngIf"],["title","Supprimer ce fichier","type","button",1,"btn","margin-whitespace",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-danger","size-17"],[1,"margin-top-10",3,"ngStyle"],[3,"dropzoneConfig","config","successUpload"]],template:function(i,c){1&i&&(t.F$t(),t.TgZ(0,"div",0)(1,"h4"),t.YNc(2,n,4,1,"span",1),t.YNc(3,y,4,1,"button",2),t.YNc(4,D,2,0,"button",3),t.YNc(5,T,2,0,"button",4),t.Hsn(6),t.qZA(),t.YNc(7,h,3,7,"ul",5),t.YNc(8,_,2,5,"div",6),t.qZA()),2&i&&(t.xp6(2),t.Q6J("ngIf",!c.canAddDocuments),t.xp6(1),t.Q6J("ngIf",c.canAddDocuments),t.xp6(1),t.Q6J("ngIf",c.canAddDocuments&&!c.isOpen),t.xp6(1),t.Q6J("ngIf",c.canAddDocuments&&c.isOpen),t.xp6(2),t.Q6J("ngIf",c.documents&&c.documents.length>0),t.xp6(1),t.Q6J("ngIf",c.canAddDocuments))},dependencies:[a.mk,a.sg,a.O5,a.PC,A.s,f.l,p.$],styles:["div.ed-cdt-documents[_ngcontent-%COMP%]   ul.list-elem[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{word-break:break-word}div.ed-cdt-documents[_ngcontent-%COMP%]   .btn-action-rounded[_ngcontent-%COMP%]{padding:0}"],changeDetection:0}),d})()},63869:(S,v,s)=>{s.d(v,{X:()=>E});var t=s(99658),e=s(94650);let E=(()=>{class a{}return a.\u0275fac=function(f){return new(f||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[t.m]}),a})()},13950:(S,v,s)=>{s.d(v,{I:()=>O});var t=s(52497),e=s(94650),E=s(20388),a=s(36895),A=s(4602);function f(r,h){1&r&&(e.TgZ(0,"div")(1,"b"),e._uU(2,"Aucun absent."),e.qZA()())}function p(r,h){if(1&r&&(e.TgZ(0,"div")(1,"b"),e._uU(2),e.qZA(),e.TgZ(3,"ul")(4,"li")(5,"span",10),e._uU(6),e.qZA(),e.TgZ(7,"span"),e._uU(8),e.qZA(),e._UZ(9,"span"),e.qZA()()()),2&r){const l=e.oxw();e.xp6(2),e.hij("1 \xe9l\xe8ve absent",l.sexe(l.listeAbsents[0]),":"),e.xp6(4),e.AsE("",l.listeAbsents[0].particule?l.listeAbsents[0].particule+" ":"","",l.listeAbsents[0].nom,""),e.xp6(2),e.Oqu(" "+l.listeAbsents[0].prenom)}}function n(r,h){if(1&r&&(e.TgZ(0,"li",13)(1,"span",10),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&r){const l=h.$implicit;e.xp6(2),e.AsE("",l.particule?l.particule+" ":"","",l.nom+" ",""),e.xp6(2),e.Oqu(l.prenom)}}function y(r,h){if(1&r&&(e.TgZ(0,"div")(1,"b"),e._uU(2),e.qZA(),e.TgZ(3,"ul",11),e.YNc(4,n,5,3,"li",12),e.ALo(5,"trackByProperty"),e.qZA()()),2&r){const l=e.oxw();e.xp6(2),e.hij("",l.listeAbsents.length," \xe9l\xe8ves absents :"),e.xp6(2),e.Q6J("ngForOf",l.listeAbsents)("ngForTrackBy",e.lcZ(5,3,"$index"))}}function D(r,h){1&r&&(e.TgZ(0,"div",14)(1,"b"),e._uU(2,"Aucune Activit\xe9 chang\xe9e."),e.qZA()())}function T(r,h){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&r){const l=h.$implicit,_=h.last;e.xp6(1),e.AsE(" ",l.libelle,"",_?"":", "," ")}}function M(r,h){if(1&r&&(e.TgZ(0,"li",13)(1,"b"),e._uU(2),e.qZA(),e.YNc(3,T,2,2,"span",16),e.ALo(4,"trackByProperty"),e.qZA()),2&r){const l=h.$implicit;e.xp6(2),e.Oqu(l.nom+" "+l.prenom+": "),e.xp6(1),e.Q6J("ngForOf",l.tabEleveActivite)("ngForTrackBy",e.lcZ(4,3,"$index"))}}function x(r,h){if(1&r&&(e.TgZ(0,"div",14)(1,"b"),e._uU(2),e.qZA(),e.TgZ(3,"ul",15),e.YNc(4,M,5,5,"li",12),e.ALo(5,"trackByProperty"),e.qZA()()),2&r){const l=e.oxw();e.xp6(2),e.AsE("",l.tabEleveActivite.length," \xe9l\xe8ve",l.tabEleveActivite.length>1?"s":""," dont l'activit\xe9 a chang\xe9 :"),e.xp6(2),e.Q6J("ngForOf",l.tabEleveActivite)("ngForTrackBy",e.lcZ(5,4,"$index"))}}function Z(r,h){if(1&r&&(e.TgZ(0,"div",14)(1,"b"),e._uU(2),e.qZA()()),2&r){const l=e.oxw();e.xp6(2),e.hij("",l.tabEleves.length-l.listeAbsents.length+" ","\xe9l\xe8ves pr\xe9sents.")}}let O=(()=>{class r{constructor(l,_){this.modalRef=l,this.modalService=_,this.tabEleveActivite=[],this.listeAbsents=[]}ngOnInit(){this.listeAbsents=this.listAbsents(),this.appelPrimaire&&this.listActivites()}sexe(l){return"M"===l.sexe?"":"e"}listAbsents(){return this.tabEleves.filter(l=>l.isAbsent)}listActivites(){this.tabEleveActivite=[],this.tabEleves.forEach(l=>{if(l.isAbsent)return;const _=l.activites.filter(U=>U.isUpdated);0!==_.length&&this.tabEleveActivite.push({prenom:l.prenom,nom:l.nom,tabEleveActivite:_})})}close(l){this.modalService.setDismissReason(1===l?t.G.validation:t.G.cancel),this.modalRef.hide()}}return r.\u0275fac=function(l){return new(l||r)(e.Y36(E.UZ),e.Y36(E.tT))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ed-confirm-appel-modal"]],inputs:{tabEleves:"tabEleves",appelPrimaire:"appelPrimaire"},decls:17,vars:6,consts:[[1,"dn-hinge"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Fermer cette fen\xeatre",1,"close","btn-close","d-print-none",3,"click"],[1,"modal-body"],[4,"ngIf"],["class","margin-top-10",4,"ngIf"],[1,"modal-footer"],["id","cancel","name","cancel","type","button",1,"btn","btn-danger",3,"click"],["id","send","name","send","type","button",1,"btn","btn-success",3,"click"],[1,"nom"],[1,"list-group","mt-3"],["class","list-group-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list-group-item"],[1,"margin-top-10"],[1,"list-group"],[4,"ngFor","ngForOf","ngForTrackBy"]],template:function(l,_){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Confirmez l'envoi de la feuille d'appel"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return _.close(0)}),e.qZA()(),e.TgZ(5,"div",4),e.YNc(6,f,3,0,"div",5),e.YNc(7,p,10,4,"div",5),e.YNc(8,y,6,5,"div",5),e.YNc(9,D,3,0,"div",6),e.YNc(10,x,6,6,"div",6),e.YNc(11,Z,3,1,"div",6),e.qZA(),e.TgZ(12,"div",7)(13,"button",8),e.NdJ("click",function(){return _.close(0)}),e._uU(14,"Annuler"),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return _.close(1)}),e._uU(16,"Oui"),e.qZA()()()),2&l&&(e.xp6(6),e.Q6J("ngIf",0===_.listeAbsents.length),e.xp6(1),e.Q6J("ngIf",1===_.listeAbsents.length),e.xp6(1),e.Q6J("ngIf",_.listeAbsents.length>1),e.xp6(1),e.Q6J("ngIf",0===_.tabEleveActivite.length&&_.appelPrimaire),e.xp6(1),e.Q6J("ngIf",_.tabEleveActivite.length>0&&_.appelPrimaire),e.xp6(1),e.Q6J("ngIf",_.listeAbsents.length>0&&_.tabEleves.length>0))},dependencies:[a.sg,a.O5,A.$],changeDetection:0}),r})()},49423:(S,v,s)=>{s.d(v,{w:()=>E});var t=s(99658),e=s(94650);let E=(()=>{class a{}return a.\u0275fac=function(f){return new(f||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[t.m]}),a})()},93123:(S,v,s)=>{s.d(v,{D:()=>e});var t=s(45007);class e{constructor(a={}){this.archives=Array.isArray(a.archives)?[...a.archives]:t.FSr.isNotEmptyString(a.archives)?""===a.archives.trim()?[]:a.archives.trim().split("\n"):[],this.commentaires=!!Object.isExists(a.commentaires)&&"1"===a.commentaires,this.correspondancesActives=!!Object.isExists(a.correspondancesActives)&&"1"===a.correspondancesActives,this.quota=Object.isExists(a.quota)?Number(a.quota):5e6,this.manuel=!!Object.isExists(a.manuel)&&"1"===a.manuel,this.edt=!!Object.isExists(a.edt)&&"1"===a.edt,this.cloud=!!Object.isExists(a.cloud)&&"1"===a.cloud,this.donneLeModifiable=!!Object.isExists(a.donneLeModifiable)&&"1"===a.donneLeModifiable,this.ogecCrypte=Object.isExists(a.ogecCrypte)?a.ogecCrypte:"",this.lienBiblioManuel=!!Object.isExists(a.lienBiblioManuel)&&"1"===a.lienBiblioManuel,this.compteRenduSeance=!!Object.isExists(a.compteRenduSeance)&&"1"===a.compteRenduSeance,this.compteRenduSeancePrevisionnel=!!Object.isExists(a.compteRenduSeancePrevisionnel)&&"1"===a.compteRenduSeancePrevisionnel,this.isCDTPrimaire=!!Object.isExists(a.isCDTPrimaire)&&"1"===a.isCDTPrimaire}}}}]);