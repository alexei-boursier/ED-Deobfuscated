"use strict";(self.webpackChunked_web=self.webpackChunked_web||[]).push([[7286],{97286:(jt,F,s)=>{s.r(F),s.d(F,{CarnetCorrespondanceModule:()=>Yt});var m=s(95715),R=s(27574),a=s(45007),u=s(18505),A=s(82722),e=s(94650),p=s(36895),H=s(11822);function B(t,r){1&t&&(e.TgZ(0,"div",5)(1,"h3"),e._uU(2,"Veuillez s\xe9lectionner une classe / groupe."),e.qZA()())}let $=(()=>{class t extends((0,a.kCV)()){constructor(n,o,i,c,d,g,_){super(),this.router=n,this.activatedRoute=o,this.carnetCorrespondanceUserStore=i,this.carnetCorrespondanceBadgesStore=c,this.badgesStore=d,this.authStore=g,this.carnetCorrespondanceService=_,this.listeClasses=[],this.listeGroupes=[]}ngOnInit(){this.carnetCorrespondanceUserStore.selectCarnetCorrespondanceUser(this.authStore.variantForCurrentUser).pipe((0,u.b)(n=>{Object.isExists(n)&&setTimeout(()=>{!Object.isExists(this.entity)&&Object.isExists(n.idEntity)&&a.FSr.isNotEmptyString(n.typeEntity)&&(n.typeEntity===a.meW.CLASSE?this.entity=this.listeClasses.find(o=>o.id===n.idEntity):n.typeEntity===a.meW.GROUPE&&(this.entity=this.listeGroupes.find(o=>o.id===n.idEntity)))},0)}),(0,A.R)(this.componentDestroyed$)).subscribe(),this.badges$=this.carnetCorrespondanceBadgesStore.select$(),this.carnetCorrespondanceService.getBadgesNonLues().pipe((0,u.b)(n=>{this.carnetCorrespondanceBadgesStore.updateStore(n)})).subscribe()}onListeClassesChange(n){this.listeClasses=[...n],!Object.isExists(this.entity)&&1===n.length&&this.onEntityChange(n[0])}onListeGroupesChange(n){this.listeGroupes=[...n],!Object.isExists(this.entity)&&0===this.listeClasses.length&&1===n.length&&this.onEntityChange(n[0])}onEntityChange(n){if(this.entity===n)return;this.entity=n;const o=n instanceof a.Mn7?a.meW.CLASSE:a.meW.GROUPE;this.carnetCorrespondanceUserStore.reset(),this.router.navigate([`${o}/${this.entity.id}`],{relativeTo:this.activatedRoute}).catch(()=>console.error("onEntityChange navigate to good url"))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(m.F0),e.Y36(m.gz),e.Y36(a.$z9),e.Y36(a.Il9),e.Y36(a.et7),e.Y36(a.CnD),e.Y36(a.HmK))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-enseignant-carnet-home"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"double-padding","ed-container","prof","carnet-correspondance"],[1,"title"],["placeholder","S\xe9lectionnez une classe",3,"entity","badges$","displaySalles","entityChange","listeClassesChange","listeGroupesChange"],[1,"container-bg","simple-padding"],["class","jumbotron",4,"ngIf"],[1,"jumbotron"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2," Carnet de correspondance "),e.TgZ(3,"ed-select-entity",2),e.NdJ("entityChange",function(c){return o.onEntityChange(c)})("listeClassesChange",function(c){return o.onListeClassesChange(c)})("listeGroupesChange",function(c){return o.onListeGroupesChange(c)}),e.qZA()(),e.TgZ(4,"div",3),e.YNc(5,B,3,0,"div",4),e._UZ(6,"router-outlet"),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("entity",o.entity)("badges$",o.badges$)("displaySalles",!1),e.xp6(2),e.Q6J("ngIf",!o.entity))},dependencies:[m.lC,p.O5,H.h]}),t})();var V=s(46451);let G=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-eleve-carnet-correspondance"]],inputs:{idEleve:"idEleve"},decls:1,vars:1,consts:[[3,"idEleve"]],template:function(n,o){1&n&&e._UZ(0,"ed-tab-carnet-correspondance",0),2&n&&e.Q6J("idEleve",o.idEleve)},dependencies:[V.R],changeDetection:0}),t})(),K=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-eleve-carnet-home"]],inputs:{idEleve:"idEleve"},decls:1,vars:1,consts:[[3,"idEleve"]],template:function(n,o){1&n&&e._UZ(0,"ed-eleve-carnet-correspondance",0),2&n&&e.Q6J("idEleve",o.idEleve)},dependencies:[G],changeDetection:0}),t})();function z(t,r){1&t&&e._UZ(0,"ed-enseignant-carnet-home")}function W(t,r){if(1&t&&e._UZ(0,"ed-eleve-carnet-home",2),2&t){const n=e.oxw();e.Q6J("idEleve",n.idUser)}}let X=(()=>{class t extends((0,a.kCV)()){constructor(n,o,i,c){super(),this.authStore=n,this.carnetCorrespondanceUserStore=o,this.activatedRoute=i,this.carnetCorrespondanceBadgesStore=c,this.isConsultationEleveProfPersonnel=!1}ngOnInit(){this.activatedRoute.paramMap.pipe((0,u.b)(n=>{this.isConsultationEleveProfPersonnel=this.authStore.isProfOuPersonnel()&&n.has("idEntity")&&n.has("typeEntity"),this.idUser=+n.get("idUser"),this.typeUser=n.get("typeUser")}),(0,A.R)(this.componentDestroyed$)).subscribe()}ngOnDestroy(){return this.carnetCorrespondanceUserStore.reset(),this.carnetCorrespondanceBadgesStore.reset(),super.ngOnDestroy()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(a.CnD),e.Y36(a.$z9),e.Y36(m.gz),e.Y36(a.Il9))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-carnet-correspondance"]],features:[e.qOj],decls:2,vars:2,consts:[[4,"ngIf"],[3,"idEleve",4,"ngIf"],[3,"idEleve"]],template:function(n,o){1&n&&(e.YNc(0,z,1,0,"ed-enseignant-carnet-home",0),e.YNc(1,W,1,1,"ed-eleve-carnet-home",1)),2&n&&(e.Q6J("ngIf",o.authStore.isProfOuPersonnel()&&!o.isConsultationEleveProfPersonnel),e.xp6(1),e.Q6J("ngIf",(o.authStore.isFouE()||o.isConsultationEleveProfPersonnel||o.authStore.isEntreprise())&&o.idUser))},dependencies:[p.O5,$,K]}),t})();var C=s(20388),D=s(43422),E=s(70262),f=s(28746),Z=s(95698),T=s(60515),I=s(11302),U=s(87192),q=s(52497),l=s(24006),x=s(92635),S=s(80125),Y=s(48536),h=s(4602);function ee(t,r){if(1&t&&(e.TgZ(0,"h3",23),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.AsE(" Nouvel accompagnement p\xe9dagogique (",n.carnetUser.listeElevesSelected.length," \xe9l\xe8ve",n.carnetUser.listeElevesSelected.length>1?"s":"",") ")}}function ne(t,r){if(1&t&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.Q6J("ngValue",n),e.xp6(1),e.hij(" ",n.libelle," ")}}function te(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",25)(1,"strong",26),e._uU(2,"Document"),e.qZA(),e.TgZ(3,"ed-input-files",27),e.NdJ("successUpload",function(i){e.CHM(n);const c=e.oxw(2);return e.KtG(c.onUploadSuccess(i))})("removedFile",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.onRemovedFile())}),e.qZA()()}if(2&t){const n=e.oxw(2);e.xp6(3),e.Q6J("dropzoneConfig",n.dropZoneConfig)("config",n.inputFilesConfig)}}function oe(t,r){1&t&&(e.TgZ(0,"div")(1,"div",28),e._uU(2,"Vous devez s\xe9lectionner au moins un \xe9l\xe8ve pour pouvoir valider votre saisie"),e.qZA()())}const ie=function(){return{isEternel:1}};function re(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"button",33),e._uU(3),e._UZ(4,"i",34),e.qZA(),e.TgZ(5,"button",35),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.deleteFile())}),e._UZ(6,"i",36),e.qZA()()()}if(2&t){const n=e.oxw(3);e.xp6(2),e.Q6J("canExportToCloud",!0)("typeModule",n.edModuleCodes.CARNET_CORRESPONDANCE)("file",n.editAccompagnementPedagogique.fichier)("typeFichier",n.typeFichierTelechargement.CARNET_CORRESPONDANCE)("additionalData",e.DdM(6,ie)),e.xp6(1),e.hij(" ",n.editAccompagnementPedagogique.fichier.displayText," ")}}function ae(t,r){if(1&t&&(e.TgZ(0,"div",29),e.YNc(1,re,7,7,"div",30),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.editAccompagnementPedagogique.urlFichier&&""!==n.editAccompagnementPedagogique.urlFichier)}}function ce(t,r){if(1&t&&(e.TgZ(0,"span",40),e._UZ(1,"i",41),e._uU(2),e.ALo(3,"displayNom"),e.qZA()),2&t){const n=r.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,n)," ")}}const se=function(){return["nom","prenom"]};function de(t,r){if(1&t&&(e.TgZ(0,"div",37)(1,"div",38),e._uU(2),e.qZA(),e.TgZ(3,"div",32),e.YNc(4,ce,4,3,"span",39),e.ALo(5,"orderBy"),e.ALo(6,"trackByProperty"),e.qZA()()),2&t){const n=e.oxw(2);e.xp6(2),e.hij("El\xe8ve",n.editAccompagnementPedagogiqueGrouped.eleves.length>1?"s":"",""),e.xp6(2),e.Q6J("ngForOf",e.xi3(5,3,n.editAccompagnementPedagogiqueGrouped.eleves,e.DdM(8,se)))("ngForTrackBy",e.lcZ(6,6,"idEleve"))}}function le(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.deleteSuivi())}),e._UZ(1,"i",43),e._uU(2," \xa0Supprimer "),e.qZA()}}const pe=function(t){return{"has-error":t}},ue=function(t){return{"margin-whitespace":t}},ge=function(t,r){return{"float-start":t,"float-end":r}};function _e(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"form",1,2),e.NdJ("ngSubmit",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.saveAccompagnementPedagogique())}),e.TgZ(2,"div",3),e.YNc(3,ee,2,2,"h3",4),e.TgZ(4,"div")(5,"label",5),e._uU(6,"Cat\xe9gorie"),e.qZA(),e.TgZ(7,"select",6,7),e.NdJ("ngModelChange",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.editAccompagnementPedagogique.categorie=i)}),e._UZ(9,"option",8),e.YNc(10,ne,2,2,"option",9),e.ALo(11,"trackByProperty"),e.qZA()(),e.TgZ(12,"div",10),e._UZ(13,"div",11),e.TgZ(14,"label",12),e._uU(15,"Contenu"),e.qZA(),e.TgZ(16,"textarea",13,14),e.NdJ("ngModelChange",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.editAccompagnementPedagogique.contenu=i)}),e.qZA()(),e.YNc(18,te,4,2,"div",15),e.YNc(19,oe,3,0,"div",16),e.YNc(20,ae,2,1,"div",17),e.YNc(21,de,7,9,"div",18),e.TgZ(22,"div",19),e.YNc(23,le,3,0,"button",20),e.TgZ(24,"button",21),e._uU(25," Enregistrer "),e.qZA(),e.TgZ(26,"button",22),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.cancel())}),e._uU(27," Annuler "),e.qZA(),e._UZ(28,"div",11),e.qZA()()()}if(2&t){const n=e.MAs(1),o=e.MAs(17),i=e.oxw();e.Q6J("ngBusy",i.loader),e.xp6(3),e.Q6J("ngIf",i.isModeAjout&&!i.inModal),e.xp6(4),e.Q6J("compareWith",i.compareCategorie)("ngModel",i.editAccompagnementPedagogique.categorie),e.xp6(3),e.Q6J("ngForOf",null==i.carnetUser.carnetCorrespondance?null:i.carnetUser.carnetCorrespondance.categoriesSuivi)("ngForTrackBy",e.lcZ(11,16,"$index")),e.xp6(2),e.Q6J("ngClass",e.VKq(18,pe,o.invalid)),e.xp6(4),e.Q6J("ngModel",i.editAccompagnementPedagogique.contenu),e.xp6(2),e.Q6J("ngIf",i.isModeAjout||!i.editAccompagnementPedagogique.urlFichier),e.xp6(1),e.Q6J("ngIf",0===(null==i.carnetUser.listeElevesSelected?null:i.carnetUser.listeElevesSelected.length)),e.xp6(1),e.Q6J("ngIf",!i.isModeAjout),e.xp6(1),e.Q6J("ngIf",!i.isModeAjout),e.xp6(2),e.Q6J("ngIf",!i.isModeAjout),e.xp6(1),e.Q6J("ngClass",e.VKq(20,ue,!i.isModeAjout))("disabled",n.pristine||n.invalid||i.isModeAjout&&0===i.carnetUser.listeElevesSelected.length),e.xp6(2),e.Q6J("ngClass",e.WLB(22,ge,i.isModeAjout,!i.isModeAjout))}}let O=(()=>{class t{constructor(n,o,i,c,d,g,_){this.carnetCorrespondanceUserStore=n,this.modalService=o,this.carnetCorrespondanceService=i,this.uiService=c,this.loaderService=d,this.cd=g,this.authStore=_,this.typeFichierTelechargement=a.Y9E,this.listeElevesSelected=[],this.fichiers=[],this.isCloudEnable=!1,this.isModeAjout=!0,this.dropZoneConfig={timeout:3e6,maxFilesize:5,maxFiles:1,url:`${(0,I.Je)()}/televersement.awp?verbe=post&mode=${a.Y9E.CARNET_CORRESPONDANCE}`},this.inputFilesConfig={fromCloudEnabled:a.Kg5.isModuleEnabled(this.authStore.currentUser,a.qzA.CLOUD,0),keepComplete:!0,dropzoneContainer:".dropzone-container",libelleTitre:"D\xe9posez votre fichier ici, ou s\xe9lectionnez un fichier \xe0 l'aide du bouton."},this.edModuleCodes=a.qzA,this.accompagnementPedagogiqueEdited=new e.vpe,this.accompagnementPedagogiqueDeleted=new e.vpe,this.accompagnementPedagogiqueCancel=new e.vpe,this.editAccompagnementPedagogique=new a.gPZ,this.isCloudEnable=a.Kg5.isModuleEnabled(this.authStore.currentUser,a.qzA.CLOUD)}get editAccompagnementPedagogiqueGrouped(){return this.editAccompagnementPedagogique}ngOnInit(){this.carnetUser$=this.carnetCorrespondanceUserStore.selectCarnetCorrespondanceUser(this.authStore.variantForCurrentUser).pipe((0,u.b)(n=>{this.carnetUser=new a.BiX(n)})),this.isModeAjout&&(this.inputFilesConfig.keepComplete=!0)}ngOnChanges(n){Object.isExists(n.accompagnementPedagogique)&&n.accompagnementPedagogique.currentValue instanceof a.xfY&&(this.editAccompagnementPedagogique=new a.xfY(n.accompagnementPedagogique.currentValue),this.isModeAjout=!1)}saveAccompagnementPedagogique(){if(this.isModeAjout&&0===this.carnetUser.listeElevesSelected.length)return;let n;this.loader=this.loaderService.show(this),this.cd.markForCheck(),n=this.isModeAjout?this.carnetCorrespondanceService.ajouterSaisie(this.carnetUser.idEntity,this.carnetUser.typeEntity,this.editAccompagnementPedagogique,this.carnetUser.listeElevesSelected):this.carnetCorrespondanceService.updateSuivi(this.carnetUser.idEntity,this.carnetUser.typeEntity,this.editAccompagnementPedagogique),n.pipe((0,u.b)(()=>{this.accompagnementPedagogiqueEdited.emit(!0),this.uiService.notifyEvent(a.DOJ.genericSuccess,`${this.isModeAjout?"Enregistrement":"Mise \xe0 jour"} de votre accompagnement p\xe9dagogique effectu\xe9${this.isModeAjout?"":"e"} !`,"Carnet de correspondance","icon-ed_carnetcorrespondance")}),(0,E.K)(()=>(this.accompagnementPedagogiqueEdited.emit(!1),this.uiService.notifyEvent(a.DOJ.genericError,"Une erreur est survenue","Carnet de correspondance"),T.E)),(0,f.x)(()=>this.loaderService.hide(this))).subscribe()}cancel(){this.accompagnementPedagogiqueCancel.emit(!0)}onUploadSuccess(n){this.editAccompagnementPedagogique.setUrlFichier(a.FSr.isNotEmptyString(n.unc)?n.unc:n.id,!0),this.formEdit.form.markAsDirty()}deleteFile(){const n={id:this.modalService.getModalsCount()+1,initialState:{title:"Supprimer cette pi\xe8ce-jointe",message:"Souhaitez vous vraiment <strong>supprimer</strong> la pi\xe8ce-jointe associ\xe9e ?",btnConfirm:"Valider"}};this.modalService.show(U.z,n),this.modalService.onHide.pipe((0,Z.q)(1),(0,u.b)(o=>{o===q.G.validation&&(this.editAccompagnementPedagogique.setUrlFichier(""),this.formEdit.form.markAsDirty(),this.cd.markForCheck())})).subscribe()}compareCategorie(n,o){return Object.isExists(n)&&Object.isExists(o)&&(n===o||n.id===o.id)}deleteSuivi(){const n={id:this.modalService.getModalsCount()+1,initialState:{title:"Suppression d'un accompagnement p\xe9dagogique",message:"Vous \xeates sur le point de supprimer l'accompagnement p\xe9dagogique. Continuer ?",btnConfirm:"Supprimer"}};this.modalService.show(U.z,n),this.modalService.onHide.pipe((0,Z.q)(1),(0,u.b)(o=>{o===q.G.validation&&(this.loader=this.loaderService.show(this),this.cd.markForCheck(),this.carnetCorrespondanceService.supprimerListeSuivis(this.carnetUser.idEntity,this.carnetUser.typeEntity,this.editAccompagnementPedagogiqueGrouped.tabIds).pipe((0,u.b)(()=>{this.uiService.notifyEvent(a.DOJ.genericSuccess,"L'accompagnement p\xe9dagogique a bien \xe9t\xe9 supprim\xe9","Carnet de correspondance","icon-ed_carnetcorrespondance"),this.accompagnementPedagogiqueDeleted.emit(!0)}),(0,E.K)(()=>(this.uiService.notifyEvent(a.DOJ.genericError,"Suppression impossible","Erreur"),this.accompagnementPedagogiqueDeleted.emit(!1),T.E)),(0,f.x)(()=>this.loaderService.hide(this))).subscribe())})).subscribe()}onRemovedFile(){this.editAccompagnementPedagogique.setUrlFichier("")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(a.$z9),e.Y36(C.tT),e.Y36(a.HmK),e.Y36(a.VLf),e.Y36(x.S),e.Y36(e.sBO),e.Y36(a.CnD))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-edit-accompagnement-pedagogique"]],viewQuery:function(n,o){if(1&n&&e.Gf(l.F,5),2&n){let i;e.iGM(i=e.CRH())&&(o.formEdit=i.first)}},inputs:{accompagnementPedagogique:"accompagnementPedagogique",inModal:"inModal"},outputs:{accompagnementPedagogiqueEdited:"accompagnementPedagogiqueEdited",accompagnementPedagogiqueCancel:"accompagnementPedagogiqueCancel",accompagnementPedagogiqueDeleted:"accompagnementPedagogiqueDeleted"},features:[e.TTD],decls:2,vars:3,consts:[["novalidate","","name","formAccompagnementPedagogique",3,"ngBusy","ngSubmit",4,"ngIf"],["novalidate","","name","formAccompagnementPedagogique",3,"ngBusy","ngSubmit"],["formAccompagnementPedagogique","ngForm"],["id","dropzone-container-doc-suivi",1,"dropzone-container"],["class","text-center",4,"ngIf"],["for","selectCategorieSuivi",1,"form-label"],["id","selectCategorieSuivi","name","selectCategorieSuivi",1,"form-control","form-select",3,"compareWith","ngModel","ngModelChange"],["selectCategorieSuivi","ngModel"],["value",""],[3,"ngValue",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],[1,"clearfix"],["for","contenuSuivi",1,"form-label"],["id","contenuSuivi","name","contenuSuivi","rows","5","required","",1,"form-control",3,"ngModel","ngModelChange"],["contenuSuivi","ngModel"],["class","position-static",4,"ngIf"],[4,"ngIf"],["class","my-3",4,"ngIf"],["class","card mb-3",4,"ngIf"],[1,"mt-3"],["type","button","class","btn btn-warning float-start",3,"click",4,"ngIf"],["name","btnValider","type","submit",1,"btn","btn-success","float-end",3,"ngClass","disabled"],["name","btnAnnuler","type","button",1,"btn","btn-danger",3,"ngClass","click"],[1,"text-center"],[3,"ngValue"],[1,"position-static"],[1,"texte-label"],[3,"dropzoneConfig","config","successUpload","removedFile"],[1,"text-danger","text-end"],[1,"my-3"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],["edLightbox","","type","button","title","Consulter la pi\xe8ce-jointe",1,"btn","btn-primary-color","no-background",3,"canExportToCloud","typeModule","file","typeFichier","additionalData"],["aria-hidden","true",1,"i-small","fa","fa-search"],["title","Supprimer cette pi\xe8ce-jointe","type","button",1,"btn","btn-danger-color","p-0","margin-whitespace",3,"click"],["aria-hidden","true",1,"fa","fa-trash","size-17"],[1,"card","mb-3"],[1,"card-header"],["class","cc-eleve-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cc-eleve-item"],["aria-hidden","true",1,"fa","icon-ed_eleve"],["type","button",1,"btn","btn-warning","float-start",3,"click"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(n,o){1&n&&(e.YNc(0,_e,29,25,"form",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,o.carnetUser$))},dependencies:[p.mk,p.sg,p.O5,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.On,l.F,S.DC,Y.s,D.l,p.Ov,a.$t3,a.d0N,h.$],changeDetection:0}),t})();function me(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",9)(1,"ed-edit-accompagnement-pedagogique",10),e.NdJ("accompagnementPedagogiqueDeleted",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.onAccompagnementPedagogiqueDeleted(i))})("accompagnementPedagogiqueEdited",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.onAccompagnementPedagogiqueEdited(i))})("accompagnementPedagogiqueCancel",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.onAccompagnementPedagogiqueCancel(i))}),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("accompagnementPedagogique",n.accompagnementPedagogique)("inModal",!0)}}const fe=function(){return{isEternel:1}};function he(t,r){if(1&t&&(e.TgZ(0,"div",16)(1,"button",17),e._uU(2),e._UZ(3,"i",18),e.qZA()()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("file",n.accompagnementPedagogique.fichier)("typeFichier",n.typeFichierTelechargement.CARNET_CORRESPONDANCE)("additionalData",e.DdM(4,fe)),e.xp6(1),e.hij(" ",n.accompagnementPedagogique.fichier.libelle," ")}}function ve(t,r){if(1&t&&(e.TgZ(0,"span",19),e._UZ(1,"i",20),e._uU(2),e.ALo(3,"displayNom"),e.qZA()),2&t){const n=r.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,n)," ")}}const Ce=function(){return["nom","prenom"]};function Ee(t,r){if(1&t&&(e.TgZ(0,"div",11)(1,"div",12)(2,"strong"),e._uU(3),e.qZA(),e._uU(4),e.ALo(5,"edDate"),e.qZA(),e.TgZ(6,"div",13)(7,"i"),e._uU(8),e.qZA()(),e.YNc(9,he,4,5,"div",14),e.qZA(),e.TgZ(10,"div",11)(11,"div",12),e._uU(12),e.qZA(),e.TgZ(13,"div",13),e.YNc(14,ve,4,3,"span",15),e.ALo(15,"orderBy"),e.ALo(16,"trackByProperty"),e.qZA()()),2&t){const n=e.oxw();e.xp6(3),e.Oqu(""!==n.accompagnementPedagogique.categorie.libelle?n.accompagnementPedagogique.categorie.libelle:"Contenu"),e.xp6(1),e.hij(" ",e.xi3(5,7,n.accompagnementPedagogique.dateCreation,"EEEE d MMMM y \xe0 HH:mm")," "),e.xp6(4),e.Oqu(n.accompagnementPedagogique.contenu),e.xp6(1),e.Q6J("ngIf",n.accompagnementPedagogique.urlFichier&&""!==n.accompagnementPedagogique.urlFichier),e.xp6(3),e.hij("El\xe8ve",n.accompagnementPedagogique.eleves.length>1?"s":"",""),e.xp6(2),e.Q6J("ngForOf",e.xi3(15,10,n.accompagnementPedagogique.eleves,e.DdM(15,Ce)))("ngForTrackBy",e.lcZ(16,13,"idEleve"))}}let xe=(()=>{class t{constructor(n,o,i){this.modalRef=n,this.carnetCorrespondanceUserStore=o,this.authStore=i,this.isEditable=!0,this.typeFichierTelechargement=a.Y9E}ngOnInit(){const n=this.carnetCorrespondanceUserStore.getCarnetCorrespondanceUser(this.authStore.variantForCurrentUser),i=n.isPP;this.isEditable=!n.carnetCorrespondance.parametrage.suiviSeulPPAuteurModifiable||this.authStore.isHimself(this.accompagnementPedagogique.auteur.role,this.accompagnementPedagogique.auteur.id)||i}onAccompagnementPedagogiqueEdited(n){n&&this.modalRef.hide()}onAccompagnementPedagogiqueDeleted(n){n&&this.modalRef.hide()}onAccompagnementPedagogiqueCancel(n){n&&this.modalRef.hide()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(C.UZ),e.Y36(a.$z9),e.Y36(a.CnD))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-detail-accompagnement-pedagogique"]],inputs:{accompagnementPedagogique:"accompagnementPedagogique"},decls:13,vars:6,consts:[["id","detail-suivi"],[1,"modal-header"],[1,"modal-title"],[1,"sstitre"],["type","button","aria-label","Fermer cette fen\xeatre",1,"btn-close","d-print-none",3,"click"],[1,"modal-body","detail-suivi"],["class","panel panel-default",4,"ngIf","ngIfElse"],["readonly",""],[1,"modal-footer"],[1,"panel","panel-default"],[3,"accompagnementPedagogique","inModal","accompagnementPedagogiqueDeleted","accompagnementPedagogiqueEdited","accompagnementPedagogiqueCancel"],[1,"card","mb-3"],[1,"card-header"],[1,"card-body"],["class","card-footer",4,"ngIf"],["class","cc-eleve-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card-footer"],["edLightbox","","type","button","title","Consulter le document associ\xe9",1,"btn","btn-primary-color","no-background",3,"file","typeFichier","additionalData"],["aria-hidden","true",1,"i-small","fa","fa-search"],[1,"cc-eleve-item"],["aria-hidden","true",1,"fa","icon-ed_eleve"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3," Accompagnement p\xe9dagogique "),e.TgZ(4,"span",3),e._uU(5),e.ALo(6,"edDate"),e.qZA()(),e.TgZ(7,"button",4),e.NdJ("click",function(){return o.modalRef.hide()}),e.qZA()(),e.TgZ(8,"div",5),e.YNc(9,me,2,2,"div",6),e.YNc(10,Ee,17,16,"ng-template",null,7,e.W1O),e.qZA(),e._UZ(12,"div",8),e.qZA()),2&n){const i=e.MAs(11);e.xp6(5),e.hij("Cr\xe9\xe9 le ",e.xi3(6,3,o.accompagnementPedagogique.dateCreation,"EEEE d MMMM y \xe0 HH:mm"),""),e.xp6(4),e.Q6J("ngIf",o.isEditable)("ngIfElse",i)}},dependencies:[p.sg,p.O5,D.l,O,a.$t3,a.d0N,a.ifA,h.$],encapsulation:2,changeDetection:0}),t})();var M=s(93970),P=s(34414),J=s(6897),v=s(34331);function Se(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.isModeAjout=!0)}),e._UZ(1,"i",9),e._uU(2," Ajouter un accompagnement p\xe9dagogique "),e.qZA()}}function Ae(t,r){if(1&t&&(e.TgZ(0,"h3"),e._uU(1),e.qZA()),2&t){const n=e.oxw(3).ngIf;e.xp6(1),e.AsE(" Aucun accompagnement p\xe9dagogique pour les \xe9l\xe8ves s\xe9lectionn\xe9s (",null==n.listeElevesSelected?null:n.listeElevesSelected.length," \xe9l\xe8ve",(null==n.listeElevesSelected?null:n.listeElevesSelected.length)>1?"s":"",") ")}}function be(t,r){1&t&&(e.TgZ(0,"h3"),e._uU(1,"Veuillez s\xe9lectionner un \xe9l\xe8ve dans la liste"),e.qZA())}function Te(t,r){if(1&t&&(e.TgZ(0,"div",10),e.YNc(1,Ae,2,2,"h3",1),e.YNc(2,be,2,0,"h3",1),e.qZA()),2&t){const n=e.oxw(2).ngIf;e.xp6(1),e.Q6J("ngIf",(null==n.listeElevesSelected?null:n.listeElevesSelected.length)>0),e.xp6(1),e.Q6J("ngIf",0===(null==n.listeElevesSelected?null:n.listeElevesSelected.length))}}function ye(t,r){1&t&&(e.TgZ(0,"tr"),e._UZ(1,"th",18),e.TgZ(2,"th",19),e._uU(3,"Date"),e.qZA(),e.TgZ(4,"th"),e._uU(5,"El\xe8ve"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Contenu"),e.qZA(),e.TgZ(8,"th",20),e._uU(9,"Cat\xe9gorie"),e.qZA(),e.TgZ(10,"th",21),e._uU(11,"Auteur"),e.qZA()())}function Ze(t,r){1&t&&e._UZ(0,"i",27)}function Ue(t,r){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw().item;e.xp6(1),e.hij("",n.eleves.length," \xe9l\xe8ves")}}function qe(t,r){if(1&t&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"displayNom"),e.qZA()),2&t){const n=r.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,n,!0))}}function Me(t,r){if(1&t&&(e.ynx(0),e.YNc(1,qe,3,4,"div",28),e.ALo(2,"trackByProperty"),e.BQk()),2&t){const n=e.oxw().item;e.xp6(1),e.Q6J("ngForOf",n.eleves)("ngForTrackBy",e.lcZ(2,2,"$index"))}}function De(t,r){1&t&&e._UZ(0,"i",30)}const Pe=function(t,r){return{"background-color":t,color:r}},Je=function(){return["250","..."]};function Ne(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"tr",22),e.NdJ("click",function(){const c=e.CHM(n).item,d=e.oxw(4);return e.KtG(d.openDetailAccompagnementPedagogique(c))}),e.TgZ(1,"td",18)(2,"button",23),e.NdJ("click",function(){const c=e.CHM(n).item,d=e.oxw(4);return e.KtG(d.openDetailAccompagnementPedagogique(c))}),e.qZA()(),e.TgZ(3,"td"),e.YNc(4,Ze,1,0,"i",24),e._uU(5),e.ALo(6,"edDate"),e.qZA(),e.TgZ(7,"td"),e.YNc(8,Ue,2,1,"span",1),e.YNc(9,Me,3,4,"ng-container",1),e.qZA(),e.TgZ(10,"td")(11,"div",25),e.YNc(12,De,1,0,"i",26),e._uU(13),e.ALo(14,"truncate"),e.qZA()(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.ALo(19,"displayNom"),e.qZA()()}if(2&t){const n=r.item,o=e.oxw(4);e.Q6J("title",n.isArchive(o.authStore.currentUser.anneeScolaireCourante)?"Ajout\xe9e sur une ann\xe9e scolaire ant\xe9rieure":""),e.xp6(4),e.Q6J("ngIf",n.isArchive(o.authStore.currentUser.anneeScolaireCourante)),e.xp6(1),e.hij(" ",e.xi3(6,11,n.dateCreation,"dd/MM/y \xe0 H:mm")," "),e.xp6(3),e.Q6J("ngIf",n.eleves.length>3),e.xp6(1),e.Q6J("ngIf",n.eleves.length<=3),e.xp6(2),e.Akn(e.WLB(21,Pe,n.categorie.couleur,o.colorUtilHelper.getTextColor(n.categorie.couleur))),e.xp6(1),e.Q6J("ngIf",n.urlFichier&&""!==n.urlFichier),e.xp6(1),e.hij(" ",e.xi3(14,14,n.contenu,e.DdM(24,Je))," "),e.xp6(3),e.Oqu(n.categorie.libelle),e.xp6(2),e.Oqu(e.Dn7(19,17,n.auteur,!1,!1))}}function we(t,r){if(1&t&&(e.TgZ(0,"div",11)(1,"div",12)(2,"div",13),e._uU(3," Les accompagnements p\xe9dagogiques renseign\xe9s ici ne sont visibles que par les enseignants et les personnels de l'\xe9tablissement. "),e.qZA()(),e.TgZ(4,"div",12)(5,"div",14)(6,"ed-smart-table",15),e.YNc(7,ye,12,0,"ng-template",16),e.YNc(8,Ne,20,25,"ng-template",17),e.qZA()()()()),2&t){const n=e.oxw(3);e.xp6(6),e.Q6J("datas",n.listeSuivis)("pagination",!0)}}function Fe(t,r){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,Se,3,0,"button",4),e._UZ(2,"div",5),e.YNc(3,Te,3,2,"div",6),e.YNc(4,we,9,2,"div",7),e.qZA()),2&t){const n=e.oxw().ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngIf",!o.isModeAjout),e.xp6(2),e.Q6J("ngIf",!o.isModeAjout&&0===(null==n.listeSuiviDisplayed?null:n.listeSuiviDisplayed.length)),e.xp6(1),e.Q6J("ngIf",!o.isModeAjout&&(null==n.listeSuiviDisplayed?null:n.listeSuiviDisplayed.length)>0)}}function Ie(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ed-edit-accompagnement-pedagogique",31),e.NdJ("accompagnementPedagogiqueEdited",function(i){e.CHM(n);const c=e.oxw(2);return e.KtG(c.onAccompagnementPedagogiqueEdited(i))})("accompagnementPedagogiqueCancel",function(i){e.CHM(n);const c=e.oxw(2);return e.KtG(c.onAccompagnementPedagogiqueCancel(i))}),e.qZA()}}function Ye(t,r){if(1&t&&(e.ynx(0),e.YNc(1,Fe,5,3,"div",2),e.YNc(2,Ie,1,0,"ng-template",null,3,e.W1O),e.BQk()),2&t){const n=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",!o.isModeAjout)("ngIfElse",n)}}let Oe=(()=>{class t{constructor(n,o,i){this.carnetCorrespondanceUserStore=n,this.modalService=o,this.authStore=i,this.isModeAjout=!1,this.colorUtilHelper=a.Fp2,this.listeSuivis=[]}ngOnInit(){this.carnetUser$=this.carnetCorrespondanceUserStore.selectCarnetCorrespondanceUser(this.authStore.variantForCurrentUser).pipe((0,u.b)(n=>{Object.isExists(n)&&Object.isExists(n.listeSuiviDisplayed)&&(this.listeSuivis=n.listeSuiviDisplayed.map(o=>new a.xfY(o)))}))}onAccompagnementPedagogiqueEdited(n){this.isModeAjout=!n}onAccompagnementPedagogiqueCancel(n){this.isModeAjout=!n}openDetailAccompagnementPedagogique(n){const o={id:this.modalService.getModalsCount()+1,initialState:{accompagnementPedagogique:n},class:"modal-lg",providers:[{provide:a.$z9,useValue:this.carnetCorrespondanceUserStore}]};this.modalService.show(xe,o)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(a.$z9),e.Y36(C.tT),e.Y36(a.CnD))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-accompagnement-pedagogique"]],decls:3,vars:3,consts:[["id","panel-suivi","stTable",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formAjout",""],["type","button","class","btn btn-primary btn-sm float-end",3,"click",4,"ngIf"],[1,"clearfix"],["class","jumbotron",4,"ngIf"],["class","row",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm","float-end",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"jumbotron"],[1,"row"],[1,"col-lg-12"],[1,"alert","alert-info","with-margin-bottom"],[1,"table-responsive"],[1,"table","table-hover","ed-table",3,"datas","pagination"],["edSmartTableHeaderTmp",""],["edSmartTableBodyTmp",""],[1,"screen-reader"],["stSort","dateCreation",1,"sortable-header"],["stSort","categorie.libelle",1,"sortable-header"],["stSort","auteur.nom",1,"sortable-header"],[1,"cliquable",3,"title","click"],["type","button","aria-label","Consulter le d\xe9tail du suivi",3,"click"],["class","fa fa-archive","aria-hidden","true",4,"ngIf"],[1,"alert","alert-info"],["class","fa fa-paperclip","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa","fa-archive"],["class","cc-eleve-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cc-eleve-item"],["aria-hidden","true",1,"fa","fa-paperclip"],[3,"accompagnementPedagogiqueEdited","accompagnementPedagogiqueCancel"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e.YNc(1,Ye,4,2,"ng-container",1),e.ALo(2,"async"),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,o.carnetUser$)))},dependencies:[p.sg,p.O5,M.L,P.c,J.C,v.r,v.w,O,p.Ov,a.$t3,a.ifA,a.W70,h.$],encapsulation:2}),t})();var y=s(39646),b=s(63900),Q=s(46590),j=s(59241),Qe=s(34420),je=s(25759),ke=s(15882);function Le(t,r){1&t&&(e.TgZ(0,"li"),e._uU(1,"Aucun \xe9l\xe8ve."),e.qZA())}function Re(t,r){if(1&t&&(e.TgZ(0,"span",17),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit,o=e.oxw(3);e.xp6(1),e.Oqu(o.badgesEleves[n.id])}}function He(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"li")(1,"div",11)(2,"input",12),e.NdJ("click",function(){const c=e.CHM(n).$implicit,d=e.oxw(3);return e.KtG(d.onSelectEleve(c))}),e.ALo(3,"displayNom"),e.qZA(),e.TgZ(4,"label",13),e._uU(5),e.ALo(6,"displayNom"),e.YNc(7,Re,2,1,"span",14),e.qZA(),e.TgZ(8,"button",15),e._UZ(9,"i",16),e.qZA()()()}if(2&t){const n=r.$implicit,o=e.oxw(3);e.xp6(2),e.MGl("id","checkEleve_",n.id,""),e.Q6J("ngModel",o.isEleveSelected(n)),e.uIk("aria-label",(o.isEleveSelected(n)?"D\xe9s\xe9lectionner ":"S\xe9lectionner ")+"l'\xe9l\xe8ve "+e.xi3(3,10,n,!0)),e.xp6(2),e.MGl("for","checkEleve_",n.id,""),e.xp6(1),e.hij(" ",e.xi3(6,13,n,!0)," "),e.xp6(2),e.Q6J("ngIf",o.badgesEleves&&o.badgesEleves[n.id]),e.xp6(1),e.Q6J("isPP",o.entity.isPP)("typeEntity",o.entity.typeEntity)("idEleve",n.id),e.uIk("aria-label","Consulter le d\xe9tail de l'\xe9l\xe8ve "+n.prenom+" "+n.nom)}}function Be(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",5)(1,"ul",6)(2,"li")(3,"div",7)(4,"input",8),e.NdJ("ngModelChange",function(i){e.CHM(n);const c=e.oxw(2);return e.KtG(c.onToggleTousEleves(i))}),e.qZA(),e.TgZ(5,"label",9),e._uU(6,"Tous / Aucun"),e.qZA()()(),e.YNc(7,Le,2,0,"li",1),e.YNc(8,He,10,16,"li",10),e.qZA()()}if(2&t){const n=e.oxw(2);e.xp6(4),e.Q6J("ngModel",n.showAllEleves),e.xp6(3),e.Q6J("ngIf",0===n.carnetUser.listeEleves.length),e.xp6(1),e.Q6J("ngForOf",n.carnetUser.listeEleves)("ngForTrackBy",n.trackByEleve)}}function $e(t,r){1&t&&(e.TgZ(0,"div",18)(1,"h3"),e._uU(2,"Aucun \xe9l\xe8ve \xe0 afficher."),e.qZA()())}function Ve(t,r){if(1&t&&e._UZ(0,"tab",25,26),2&t){const n=e.MAs(1);e.Q6J("active",n.active)}}function Ge(t,r){if(1&t&&e._UZ(0,"tab",27,28),2&t){const n=e.MAs(1);e.Q6J("active",n.active)}}function Ke(t,r){if(1&t&&e._UZ(0,"tab",29,30),2&t){const n=e.MAs(1);e.Q6J("active",n.active)}}function ze(t,r){if(1&t&&(e.TgZ(0,"div")(1,"tabset",20),e.YNc(2,Ve,2,1,"tab",21),e.YNc(3,Ge,2,1,"tab",22),e.YNc(4,Ke,2,1,"tab",23),e.qZA(),e.TgZ(5,"div",24),e._UZ(6,"router-outlet"),e.qZA()()),2&t){const n=e.oxw(3);e.xp6(2),e.Q6J("ngIf",n.carnetUser.carnetCorrespondance.parametrage.saisieCorrespondanceActif||n.forceOneTabset),e.xp6(1),e.Q6J("ngIf",n.carnetUser.carnetCorrespondance.parametrage.demandeSanctionActif),e.xp6(1),e.Q6J("ngIf",n.carnetUser.carnetCorrespondance.parametrage.suiviActif)}}const We=function(t,r){return{"col-md-12":t,"col-md-10":r}};function Xe(t,r){if(1&t&&(e.TgZ(0,"div",19),e.YNc(1,ze,7,3,"div",1),e.qZA()),2&t){const n=e.oxw(2);e.Q6J("ngClass",e.WLB(2,We,!n.idEntity,n.idEntity)),e.xp6(1),e.Q6J("ngIf",n.carnetUser.listeEleves.length>0)}}function en(t,r){if(1&t&&(e.ynx(0),e.YNc(1,Be,9,4,"div",2),e.YNc(2,$e,3,0,"ng-template",null,3,e.W1O),e.YNc(4,Xe,2,5,"div",4),e.BQk()),2&t){const n=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.carnetUser.listeEleves)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",o.carnetUser.carnetCorrespondance)}}let nn=(()=>{class t extends((0,a.kCV)()){constructor(n,o,i,c,d,g,_,N,w,Ot,Qt){super(),this.loaderService=n,this.appelService=o,this.authStore=i,this.uiService=c,this.carnetCorrespondanceStore=d,this.carnetCorrespondanceService=g,this.router=_,this.etablissementService=N,this.activatedRoute=w,this.carnetCorrespondanceUserStore=Ot,this.carnetCorrespondanceBadgesStore=Qt,this.showAllEleves=!1,this.forceOneTabset=!1}ngOnInit(){this.activatedRoute.paramMap.pipe((0,b.w)(n=>n.has("idEntity")&&n.has("typeEntity")?(this.typeEntity=n.get("typeEntity"),this.idEntity=+n.get("idEntity"),this.showAllEleves=!1,this.etablissementService.getClasseGroupeById(this.idEntity,this.typeEntity)):(0,y.of)(void 0)),(0,u.b)(n=>{!Object.isExists(n)||(this.entity=n,this.carnetCorrespondanceUserStore.updateStore({typeEntity:this.typeEntity,idEntity:this.idEntity,isPP:this.entity.isPP},this.authStore.variantForCurrentUser,!0),this.getCarnetCorrespondance())}),(0,A.R)(this.componentDestroyed$)).subscribe(),this.carnetUser$=this.carnetCorrespondanceUserStore.selectCarnetCorrespondanceUser(this.authStore.variantForCurrentUser).pipe((0,u.b)(n=>{this.carnetUser=new a.BiX(n)})),this.carnetCorrespondanceStore.select$().pipe((0,u.b)(n=>{if(Object.isExists(this.idEntity)&&Object.isExists(this.typeEntity)){const o=a.$ej.edDBUserSpecificKey(this.authStore.currentUser.codeOgec,this.authStore.currentUser.typeCompte,this.authStore.currentUser.id,[this.typeEntity,this.idEntity]),i=Object.getEntity(n,o);Object.isExpired(i)||this.carnetCorrespondanceUserStore.updateStore({carnetCorrespondance:i},this.authStore.variantForCurrentUser,!0)}}),(0,A.R)(this.componentDestroyed$)).subscribe(),this.carnetCorrespondanceBadgesStore.select$().pipe((0,u.b)(n=>this.badgesEleves=n.eleves),(0,A.R)(this.componentDestroyed$)).subscribe()}isEleveSelected(n){return this.carnetCorrespondanceUserStore.getCarnetCorrespondanceUser(this.authStore.variantForCurrentUser).listeElevesSelected.findIndex(o=>o.id===n.id)>-1}onToggleTousEleves(n){this.showAllEleves=n,this.carnetCorrespondanceUserStore.updateStore({listeElevesSelected:this.showAllEleves?[...this.carnetUser.listeEleves]:[]},this.authStore.variantForCurrentUser,!0)}onSelectEleve(n){const o=[...this.carnetCorrespondanceUserStore.getCarnetCorrespondanceUser(this.authStore.variantForCurrentUser).listeElevesSelected];this.isEleveSelected(n)?o.splice(o.findIndex(i=>i.id===n.id),1):o.push(n),this.carnetCorrespondanceUserStore.updateStore({listeElevesSelected:o},this.authStore.variantForCurrentUser,!0)}getCarnetCorrespondance(){!Object.isExists(this.typeEntity)||!Object.isExists(this.idEntity)||(this.loader=this.loaderService.show(this),this.appelService.elevesByClasseOrGroupe(this.idEntity,this.typeEntity).pipe((0,b.w)(n=>(this.carnetCorrespondanceUserStore.updateStore({listeEleves:[...n.eleves],listeElevesSelected:[]},this.authStore.variantForCurrentUser,!0),this.carnetCorrespondanceService.getCarnetCorrespondance(this.authStore.currentUser.id,this.authStore.currentUser.typeCompte,this.idEntity,this.typeEntity))),(0,Q.d)((()=>{const n=a.$ej.edDBUserSpecificKey(this.authStore.currentUser.codeOgec,this.authStore.currentUser.typeCompte,this.authStore.currentUser.id,[this.typeEntity,this.idEntity]);return Object.getEntity(this.carnetCorrespondanceStore.snapshot,n)})()),(0,u.b)(n=>{Object.isExpired(n)||this.carnetCorrespondanceUserStore.updateStore({carnetCorrespondance:n},this.authStore.variantForCurrentUser,!0),this.carnetUser.carnetCorrespondance.parametrage.demandeSanctionActif&&!this.carnetUser.carnetCorrespondance.parametrage.saisieCorrespondanceActif?this.router.navigate(["./demandesSanction"],{relativeTo:this.activatedRoute}):!this.carnetUser.carnetCorrespondance.parametrage.suiviActif||this.carnetUser.carnetCorrespondance.parametrage.saisieCorrespondanceActif||this.carnetUser.carnetCorrespondance.parametrage.demandeSanctionActif?(this.forceOneTabset=!0,this.router.navigate(["./correspondances"],{relativeTo:this.activatedRoute})):this.router.navigate(["./accompagementPedagogique"],{relativeTo:this.activatedRoute})}),(0,E.K)(n=>this.uiService.notifyErrorThenEmpty(n,!0,"Erreur")),(0,f.x)(()=>this.loaderService.hide(this))).subscribe())}trackByEleve(n,o){return o.id}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(x.S),e.Y36(a.vGR),e.Y36(a.CnD),e.Y36(a.VLf),e.Y36(a.TqJ),e.Y36(a.HmK),e.Y36(m.F0),e.Y36(a.Xmb),e.Y36(m.gz),e.Y36(a.$z9),e.Y36(a.Il9))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-carnet-correspondance-entity"]],features:[e.qOj],decls:3,vars:4,consts:[[1,"carnet-entity","row",3,"ngBusy"],[4,"ngIf"],["class","col-md-2 navigation d-print-none my-3","role","navigation",4,"ngIf","ngIfElse"],["aucunEleve",""],["class","detail",3,"ngClass",4,"ngIf"],["role","navigation",1,"col-md-2","navigation","d-print-none","my-3"],[1,"list-unstyled"],[1,"form-check","mb-4"],["type","checkbox","id","checkAll",1,"form-check-input",3,"ngModel","ngModelChange"],["for","checkAll",1,"form-check-label","fw-normal"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"form-check","mt-2"],["type","checkbox",1,"form-check-input",3,"id","ngModel","click"],[1,"form-check-label","fw-normal",3,"for"],["class","badge alert-danger",4,"ngIf"],["type","button","edDetailEleve","","tabActive","2","title","Voir le d\xe9tail de cet \xe9l\xe8ve",1,"btn","btn-primary-color","no-background","p-0","margin-whitespace","custom",3,"isPP","typeEntity","idEleve"],["aria-hidden","true",1,"i-small","fa","fa-search","d-print-none"],[1,"badge","alert-danger"],[1,"jumbotron"],[1,"detail",3,"ngClass"],[1,"nav-tabs-container-bg"],["heading","Correspondances","edTabRouterLink","correspondances","edTabOrder","1",3,"active",4,"ngIf"],["heading","Demandes de sanction","edTabRouterLink","demandesSanction","edTabOrder","2",3,"active",4,"ngIf"],["heading","Accompagnement p\xe9dagogique","edTabRouterLink","accompagementPedagogique","edTabOrder","3",3,"active",4,"ngIf"],[1,"fade","show","active","detail-tab"],["heading","Correspondances","edTabRouterLink","correspondances","edTabOrder","1",3,"active"],["c","tab"],["heading","Demandes de sanction","edTabRouterLink","demandesSanction","edTabOrder","2",3,"active"],["ra","tab"],["heading","Accompagnement p\xe9dagogique","edTabRouterLink","accompagementPedagogique","edTabOrder","3",3,"active"],["st","tab"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e.YNc(1,en,5,3,"ng-container",1),e.ALo(2,"async"),e.qZA()),2&n&&(e.Q6J("ngBusy",o.loader),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,o.carnetUser$)))},dependencies:[m.lC,p.mk,p.sg,p.O5,l.Wl,l.JJ,l.On,S.DC,j.wW,j.AH,Qe.v,je.t,ke.i,p.Ov,a.$t3],styles:[".carnet-entity[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{margin:20px 0;padding-right:0}.carnet-entity[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .detail-tab[_ngcontent-%COMP%]{margin:0 0 40px;padding:20px;overflow:hidden}.carnet-entity[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{display:inline-block}.carnet-entity[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .nav-tabs.no-children[_ngcontent-%COMP%]{border-bottom:none}"]}),t})();var tn=s(68675),on=s(39841);function rn(t,r){if(1&t&&(e.TgZ(0,"div",17)(1,"button",18),e._uU(2),e._UZ(3,"i",19),e.qZA()()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("canExportToCloud",!0)("typeModule",n.edModuleCodes.CARNET_CORRESPONDANCE)("file",n.correspondance.fichier)("typeFichier",n.typeFichierTelechargement.CARNET_CORRESPONDANCE),e.xp6(1),e.hij(" ",n.correspondance.fichier.libelle," ")}}function an(t,r){if(1&t&&(e.TgZ(0,"div",20)(1,"div",6)(2,"h3"),e._uU(3,"Auteur"),e.qZA()(),e.TgZ(4,"div",7),e._UZ(5,"i",21),e._uU(6),e.ALo(7,"displayNom"),e.qZA()()),2&t){const n=e.oxw();e.xp6(6),e.hij(" ",e.Dn7(7,1,n.correspondance.auteur,!1,!0)," ")}}function cn(t,r){1&t&&(e.TgZ(0,"th"),e._uU(1,"Signature"),e.qZA())}function sn(t,r){if(1&t&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"El\xe8ve"),e.qZA(),e.YNc(3,cn,2,0,"th",22),e.qZA()),2&t){const n=e.oxw();e.xp6(3),e.Q6J("ngIf",n.correspondance.isSignatureDemandee)}}function dn(t,r){1&t&&e._UZ(0,"i",27)}function ln(t,r){1&t&&e._UZ(0,"i",28)}function pn(t,r){if(1&t&&(e.TgZ(0,"span",29),e._uU(1),e.ALo(2,"edDate"),e.ALo(3,"displayNom"),e.qZA()),2&t){const n=e.oxw(2).item;e.xp6(1),e.AsE(" Sign\xe9e le ",e.xi3(2,2,n.signature.dateValidation,"EEEE d MMMM y \xe0 HH:mm")," par ",e.lcZ(3,5,n.signature)," ")}}function un(t,r){if(1&t&&(e.TgZ(0,"td"),e.YNc(1,dn,1,0,"i",24),e.YNc(2,ln,1,0,"i",25),e.YNc(3,pn,4,7,"span",26),e.qZA()),2&t){const n=e.oxw().item;e.xp6(1),e.Q6J("ngIf",n.signature),e.xp6(1),e.Q6J("ngIf",!n.signature),e.xp6(1),e.Q6J("ngIf",n.signature)}}function gn(t,r){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"i",23),e._uU(3),e.ALo(4,"displayNom"),e.qZA(),e.YNc(5,un,4,3,"td",22),e.qZA()),2&t){const n=r.item,o=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,2,n)," "),e.xp6(2),e.Q6J("ngIf",o.correspondance.isSignatureDemandee)}}function _n(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.marquerCommeLue())}),e._uU(1," Marquer comme lu "),e.qZA()}}function mn(t,r){1&t&&e._UZ(0,"i",37)}function fn(t,r){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"edDate"),e.qZA()),2&t){const n=e.oxw(3);e.xp6(1),e.hij("le ",e.xi3(2,1,n.correspondance.destinataire.dateLu,"EEEE d MMMM y \xe0 HH:mm"),"")}}function hn(t,r){if(1&t&&(e.TgZ(0,"div",35),e.YNc(1,mn,1,0,"i",36),e._uU(2," Lu "),e.YNc(3,fn,3,4,"span",22),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!0===n.correspondance.destinataire.lu),e.xp6(2),e.Q6J("ngIf",n.correspondance.destinataire.dateLu)}}function vn(t,r){if(1&t&&(e.TgZ(0,"div",30)(1,"div",31),e.YNc(2,_n,2,0,"button",32),e.YNc(3,hn,4,2,"ng-template",null,33,e.W1O),e.qZA()()),2&t){const n=e.MAs(4),o=e.oxw();e.xp6(2),e.Q6J("ngIf",!o.correspondance.destinataire.lu)("ngIfElse",n)}}const Cn=function(){return["nom","prenom"]};let En=(()=>{class t{constructor(n,o,i,c,d,g,_){this.modalRef=n,this.carnetCorrespondanceService=o,this.loaderService=i,this.uiService=c,this.carnetCorrespondanceUserStore=d,this.carnetCorrespondanceBadgesStore=g,this.authStore=_,this.correspondanceEleves=[],this.nbNeedSignature=0,this.typeFichierTelechargement=a.Y9E,this.edTypeUser=a.dcH,this.edModuleCodes=a.qzA}ngOnInit(){this.correspondanceEleves=[...this.correspondance.eleves]}marquerCommeLue(){this.loader=this.loaderService.show(this);const n=this.carnetCorrespondanceUserStore.getCarnetCorrespondanceUser(this.authStore.variantForCurrentUser);this.carnetCorrespondanceService.markCAsRead(this.correspondance,n.idEntity,n.typeEntity).pipe((0,u.b)(o=>{this.carnetCorrespondanceBadgesStore.updateStore(o),this.uiService.notifyEvent(a.DOJ.genericSuccess,"La correspondance a \xe9t\xe9 marqu\xe9e comme lu","Carnet de correspondance","icon-ed_carnetcorrespondance")}),(0,E.K)(o=>(this.uiService.notifyEvent(a.DOJ.genericError,"Une erreur est survenue","Carnet de correspondance"),T.E)),(0,f.x)(()=>{this.loaderService.hide(this),this.modalRef.hide()})).subscribe()}trackByFn(){return(new h.$).transform("idEleve")}getContacts(){return[]}get canSendMessage(){return a.Kg5.isModuleEnabled(this.authStore.currentUser,a.qzA.MESSAGERIE)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(C.UZ),e.Y36(a.HmK),e.Y36(x.S),e.Y36(a.VLf),e.Y36(a.$z9),e.Y36(a.Il9),e.Y36(a.CnD))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-detail-correspondance"]],inputs:{correspondance:"correspondance"},decls:26,vars:17,consts:[["id","detail-correspondance",3,"ngBusy"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Fermer cette fen\xeatre",1,"btn-close","d-print-none",3,"click"],[1,"modal-body","detail-correspondance"],[1,"card","mb-3"],[1,"card-header"],[1,"card-body"],["class","card-footer",4,"ngIf"],["class","card",4,"ngIf"],[1,"table-responsive"],[3,"datas","trackByFn"],["edSmartTableHeaderTmp",""],["edSmartTableBodyTmp",""],["class","row",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-primary","d-print-none","float-end",3,"click"],[1,"card-footer"],["edLightbox","","type","button","title","Consulter la pi\xe8ce-jointe",1,"btn","btn-primary-color","no-background",3,"canExportToCloud","typeModule","file","typeFichier"],["aria-hidden","true",1,"i-small","fa","fa-search"],[1,"card"],["aria-hidden","true",1,"icon-destinataire","fa","icon-ed_famille","text-famille"],[4,"ngIf"],["aria-hidden","true",1,"fa","icon-ed_eleve"],["title","La correspondance a \xe9t\xe9 sign\xe9e","class","fa fa-check fa-2x text-success",4,"ngIf"],["title","La correspondance n'a pas \xe9t\xe9 sign\xe9e","class","fa fa-close fa-2x text-danger","aria-label","La correspondance n'a pas \xe9t\xe9 sign\xe9e",4,"ngIf"],["class","bandeau-signature",4,"ngIf"],["title","La correspondance a \xe9t\xe9 sign\xe9e",1,"fa","fa-check","fa-2x","text-success"],["title","La correspondance n'a pas \xe9t\xe9 sign\xe9e","aria-label","La correspondance n'a pas \xe9t\xe9 sign\xe9e",1,"fa","fa-close","fa-2x","text-danger"],[1,"bandeau-signature"],[1,"row"],[1,"col-lg-12"],["name","btnValider","type","button","class","btn btn-success float-end",3,"click",4,"ngIf","ngIfElse"],["alreadyRead",""],["name","btnValider","type","button",1,"btn","btn-success","float-end",3,"click"],[1,"float-end"],["class","fa fa-check","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa","fa-check"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.modalRef.hide()}),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"strong"),e._uU(9),e.qZA(),e._uU(10),e.ALo(11,"edDate"),e.qZA(),e.TgZ(12,"div",7)(13,"i"),e._uU(14),e.qZA()(),e.YNc(15,rn,4,5,"div",8),e.qZA(),e.YNc(16,an,8,5,"div",9),e.TgZ(17,"div",10)(18,"ed-smart-table",11),e.ALo(19,"orderBy"),e.YNc(20,sn,4,1,"ng-template",12),e.YNc(21,gn,6,4,"ng-template",13),e.qZA()(),e.YNc(22,vn,5,2,"div",14),e.qZA(),e.TgZ(23,"div",15)(24,"button",16),e.NdJ("click",function(){return o.modalRef.hide()}),e._uU(25,"Fermer"),e.qZA()()()),2&n&&(e.Q6J("ngBusy",o.loader),e.xp6(3),e.hij("Correspondance ",o.correspondance.destinataire?"re\xe7ue":"envoy\xe9e",""),e.xp6(6),e.Oqu(""!==o.correspondance.type?o.correspondance.type:"Correspondance"),e.xp6(1),e.hij(" ",e.xi3(11,10,o.correspondance.dateCreation,"EEEE d MMMM y \xe0 HH:mm")," "),e.xp6(4),e.Oqu(o.correspondance.contenu),e.xp6(1),e.Q6J("ngIf",o.correspondance.urlFichier&&""!==o.correspondance.urlFichier),e.xp6(1),e.Q6J("ngIf",o.correspondance.destinataire),e.xp6(2),e.Q6J("datas",e.xi3(19,13,o.correspondanceEleves,e.DdM(16,Cn)))("trackByFn",o.trackByFn),e.xp6(4),e.Q6J("ngIf",o.correspondance.destinataire&&o.authStore.isHimself(o.correspondance.destinataire.type,o.correspondance.destinataire.id)))},dependencies:[p.O5,S.DC,M.L,v.r,v.w,D.l,a.$t3,a.d0N,a.ifA],changeDetection:0}),t})();var k=s(54004),L=s(10137),xn=s(86922);function Sn(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"accordion-group")(1,"button",5),e.NdJ("click",function(){const c=e.CHM(n).$implicit,d=e.oxw(2);return e.KtG(d.selectSession(c))}),e.TgZ(2,"div")(3,"strong"),e._uU(4),e.qZA(),e._UZ(5,"br"),e._uU(6),e.ALo(7,"edDate"),e.ALo(8,"edDate"),e.qZA()()()}if(2&t){const n=r.$implicit;e.xp6(4),e.Oqu(n.libelle),e.xp6(2),e.HOy(" ",e.xi3(7,5,n.dateDebut,"EEEE d LLLL")," au ",e.xi3(8,8,n.dateFin,"EEEE d LLLL")," - de ",n.heureDebut," \xe0 ",n.heureFin," ")}}function An(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"accordion",3),e.YNc(1,Sn,9,11,"accordion-group",4),e.ALo(2,"trackByProperty"),e.TgZ(3,"accordion-group")(4,"button",5),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.selectSession())}),e.TgZ(5,"div"),e._UZ(6,"i",6),e.TgZ(7,"strong",7),e._uU(8,"Nouvelle session de rendez-vous"),e.qZA()()(),e.TgZ(9,"div",8)(10,"ed-rdv-session-form",9),e.NdJ("sessionUpdate",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.selectSession(i))}),e.qZA()()()()}if(2&t){const n=r.ngIf;e.Q6J("closeOthers",!0),e.xp6(1),e.Q6J("ngForOf",n)("ngForTrackBy",e.lcZ(2,4,"id")),e.xp6(9),e.Q6J("enableInvites",!1)}}function bn(t,r){1&t&&(e.TgZ(0,"div",10)(1,"h3"),e._uU(2,"Vous n'avez aucune session de rendez-vous"),e.qZA()())}let Tn=(()=>{class t{constructor(n,o,i,c,d){this.authStore=n,this.rdvStore=o,this.rdvService=i,this.loaderService=c,this.uiService=d,this.sessionSelect=new e.vpe}ngOnInit(){this.sessionsRDV$=this.rdvStore.selectListeSessionsRDV(this.authStore.variantForCurrentUser).pipe((0,k.U)(n=>n.filter(o=>!o.isTerminee).map(o=>new a.CAN(o)))),this.refreshData()}refreshData(){this.loader=this.loaderService.show(this),this.rdvService.listSessionsRDV(this.authStore.currentUser.typeCompte,this.authStore.currentUser.id).pipe((0,f.x)(()=>this.loaderService.hide(this)),(0,E.K)(n=>this.uiService.notifyErrorThenEmpty(n,!0,"Erreur","fa fa-warning"))).subscribe()}selectSession(n){this.selectedSession=Object.isExists(n)?Object.isExists(this.selectedSession)&&n.id===this.selectedSession.id?void 0:n:void 0,this.sessionSelect.emit(this.selectedSession)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(a.CnD),e.Y36(a.nUJ),e.Y36(a.vIF),e.Y36(x.S),e.Y36(a.VLf))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-rdv-session-selector"]],outputs:{sessionSelect:"sessionSelect"},decls:5,vars:5,consts:[[1,"ed-rdv-session-selector",3,"ngBusy"],[3,"closeOthers",4,"ngIf","ngIfElse"],["noSessionRDV",""],[3,"closeOthers"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","button","accordion-heading","",1,"btn","no-background","text-start",3,"click"],["aria-hidden","true",1,"icon-ed_plus"],[1,"margin-whitespace"],["accordion-body",""],[3,"enableInvites","sessionUpdate"],[1,"jumbotron"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,An,11,6,"accordion",1),e.ALo(2,"async"),e.YNc(3,bn,3,0,"ng-template",null,2,e.W1O),e.qZA()),2&n){const i=e.MAs(4);e.Q6J("ngBusy",o.loader),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,o.sessionsRDV$))("ngIfElse",i)}},dependencies:[p.sg,p.O5,L.Zf,L.U_,S.DC,xn.Q,p.Ov,a.ifA,h.$],styles:["div.ed-rdv-session-selector accordion{margin-top:20px}div.ed-rdv-session-selector accordion>accordion-group{margin:0 0 -1px;border:1px solid #ddd}div.ed-rdv-session-selector accordion>accordion-group.panel-open>.card>.card-header div.accordion-toggle button{color:#fff}div.ed-rdv-session-selector accordion>accordion-group.panel-open>.card>.card-header div.accordion-toggle,div.ed-rdv-session-selector accordion>accordion-group.panel-open>.card>.card-header div.accordion-toggle:hover{background-color:var(--light-primary-color)}div.ed-rdv-session-selector accordion>accordion-group>.card>.card-header div.accordion-toggle{border-radius:0;background-color:transparent;padding:0}div.ed-rdv-session-selector accordion>accordion-group>.card>.card-header div.accordion-toggle button{margin:0;padding:10px 15px;color:#555}div.ed-rdv-session-selector accordion>accordion-group>.card>.card-header div.accordion-toggle:after{display:none}div.ed-rdv-session-selector accordion>accordion-group>.card>.card-header div.accordion-toggle:hover{background-color:var(--menu-hover-color)}div.ed-rdv-session-selector accordion>accordion-group>.card div[accordion-body]{padding:10px 10px 20px}\n"],encapsulation:2,changeDetection:0}),t})();function yn(t,r){if(1&t&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.s9C("value",n),e.xp6(1),e.hij(" ",n," ")}}function Zn(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",28)(1,"input",29),e.NdJ("ngModelChange",function(i){e.CHM(n);const c=e.oxw(2);return e.KtG(c.newCorrespondance.isSignatureDemandee=i)}),e.qZA(),e.TgZ(2,"label",30),e._uU(3,"Signature demand\xe9e"),e.qZA()()}if(2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngModel",n.newCorrespondance.isSignatureDemandee)}}function Un(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",28)(1,"input",31),e.NdJ("ngModelChange",function(i){e.CHM(n);const c=e.oxw(2);return e.KtG(c.isAssociationRDVPP=i)}),e.qZA(),e.TgZ(2,"label",32),e._uU(3,"Associer une session de RDV"),e.qZA()()}if(2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngModel",n.isAssociationRDVPP)}}function qn(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",5)(1,"div",24)(2,"strong",20),e._uU(3,"Rendez-vous"),e.qZA(),e.TgZ(4,"ed-rdv-session-selector",33),e.NdJ("sessionSelect",function(i){e.CHM(n);const c=e.oxw(2);return e.KtG(c.sessionRDVAssociee=i)}),e.qZA()()()}}function Mn(t,r){1&t&&(e.TgZ(0,"div",5)(1,"div",34),e._uU(2,"Vous devez s\xe9lectionner au moins un \xe9l\xe8ve pour pouvoir valider votre saisie"),e.qZA()())}const Dn=function(t){return{"has-error":t}};function Pn(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"form",1,2),e.NdJ("ngSubmit",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.showConfirmAjout())}),e.TgZ(2,"div",3)(3,"h3",4),e._uU(4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"label",7),e._uU(8,"Type de correspondance"),e.qZA(),e.TgZ(9,"select",8),e.NdJ("ngModelChange",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.newCorrespondance.type=i)}),e._UZ(10,"option",9),e.YNc(11,yn,2,2,"option",10),e.ALo(12,"trackByProperty"),e.qZA()(),e.TgZ(13,"div",11)(14,"div",12),e.YNc(15,Zn,4,1,"div",13),e.qZA(),e.TgZ(16,"div",12),e.YNc(17,Un,4,1,"div",13),e.qZA()()(),e.TgZ(18,"div",5)(19,"div",14),e._UZ(20,"div",15),e.TgZ(21,"label",16),e._uU(22,"Contenu"),e.qZA(),e.TgZ(23,"textarea",17,18),e.NdJ("ngModelChange",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.newCorrespondance.contenu=i)}),e.qZA()()(),e.TgZ(25,"div",5)(26,"div",19)(27,"strong",20),e._uU(28,"Document"),e.qZA(),e.TgZ(29,"ed-input-files",21),e.NdJ("successUpload",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.onUploadSuccess(i))})("removedFile",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onRemovedFile())}),e.qZA()()(),e.YNc(30,qn,5,0,"div",22),e.YNc(31,Mn,3,0,"div",22),e.TgZ(32,"div",23)(33,"div",24)(34,"button",25),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.cancel())}),e._uU(35,"Annuler"),e.qZA(),e.TgZ(36,"button",26),e._uU(37," Enregistrer "),e.qZA()()()()()}if(2&t){const n=e.MAs(1),o=e.MAs(24),i=e.oxw();e.Q6J("ngBusy",i.loader),e.xp6(4),e.AsE("Nouvelle correspondance (",i.carnetUser.listeElevesSelected.length," \xe9l\xe8ve",i.carnetUser.listeElevesSelected.length>1?"s":"",")"),e.xp6(5),e.Q6J("ngModel",i.newCorrespondance.type),e.xp6(2),e.Q6J("ngForOf",i.carnetUser.carnetCorrespondance.typesCorrespondance)("ngForTrackBy",e.lcZ(12,15,"$index")),e.xp6(4),e.Q6J("ngIf",i.carnetUser.carnetCorrespondance.parametrage.demandeSignatureActif),e.xp6(2),e.Q6J("ngIf",i.isRDVPPEnable),e.xp6(2),e.Q6J("ngClass",e.VKq(17,Dn,o.invalid||o.pristine)),e.xp6(4),e.Q6J("ngModel",i.newCorrespondance.contenu),e.xp6(6),e.Q6J("dropzoneConfig",i.dropZoneConfig)("config",i.inputFilesConfig),e.xp6(1),e.Q6J("ngIf",i.isAssociationRDVPP),e.xp6(1),e.Q6J("ngIf",0===i.carnetUser.listeElevesSelected.length),e.xp6(5),e.Q6J("disabled",n.pristine||n.invalid||0===i.carnetUser.listeElevesSelected.length)}}let Jn=(()=>{class t{constructor(n,o,i,c,d,g,_,N,w){this.carnetCorrespondanceUserStore=n,this.modalService=o,this.carnetCorrespondanceService=i,this.uiService=c,this.loaderService=d,this.cd=g,this.authStore=_,this.messagerieService=N,this.rdvService=w,this.listeElevesSelected=[],this.isAssociationRDVPP=!1,this.dropZoneConfig={timeout:3e6,maxFilesize:5,maxFiles:1,url:`${(0,I.Je)()}/televersement.awp?verbe=post&mode=${a.Y9E.CARNET_CORRESPONDANCE}`},this.inputFilesConfig={fromCloudEnabled:a.Kg5.isModuleEnabled(this.authStore.currentUser,a.qzA.CLOUD,0),keepComplete:!0,dropzoneContainer:".dropzone-container",libelleTitre:"D\xe9posez votre fichier ici, ou s\xe9lectionnez un fichier \xe0 l'aide du bouton."},this.correspondanceAdded=new e.vpe,this.correspondanceCancel=new e.vpe,this.newCorrespondance=new a.chz}get isRDVPPEnable(){return a.Kg5.isModuleEnabled(this.authStore.currentUser,a.qzA.RDVPP)}ngOnInit(){this.carnetUser$=this.carnetCorrespondanceUserStore.selectCarnetCorrespondanceUser(this.authStore.variantForCurrentUser).pipe((0,u.b)(n=>{this.carnetUser=n}))}showConfirmAjout(){const n="\xe9l\xe8ve"+(this.carnetUser.listeElevesSelected.length>1?"s":""),o={id:this.modalService.getModalsCount()+1,initialState:{title:"Cr\xe9ation d'une nouvelle correspondance",message:`<p>\xcates-vous vraiment s\xfbr de vouloir envoyer cette correspondance <strong>${this.newCorrespondance.type}</strong> \xe0 <strong>${this.carnetUser.listeElevesSelected.length} ${n}</strong> ?</p>\n                  <p><i>${this.newCorrespondance.contenu}</i></p>\n                  <p class="text-danger">Attention ! Une fois cr\xe9\xe9e <strong>vous ne pourrez plus modifier ou supprimer la correspondance</strong></p>`}};this.modalService.show(U.z,o),this.modalService.onHide.pipe((0,Z.q)(1),(0,u.b)(i=>{i===q.G.validation&&this.saveCorrespondance()})).subscribe()}saveCorrespondance(){if(0===this.carnetUser.listeElevesSelected.length)return;let n=(0,y.of)(void 0);this.isRDVPPEnable&&this.isAssociationRDVPP&&Object.isExists(this.sessionRDVAssociee)&&(n=this.messagerieService.getFamillesContacts({idClasse:this.carnetUser.typeEntity===a.meW.CLASSE?this.carnetUser.idEntity:0,idGroupe:this.carnetUser.typeEntity===a.meW.GROUPE?this.carnetUser.idEntity:0,idMatiere:0,nom:"",codeMatiere:"",recupAll:0,onlyPresents:0}).pipe((0,k.U)(o=>new a.b0J(o).contacts),(0,b.w)(o=>{let i=!1;return this.carnetUser.listeElevesSelected.forEach(c=>{const d=o.find(g=>g.id===c.id&&g.responsable.typeResp===a.dcH.FAMILLE_RESPONSABLE);!Object.isExists(d)||this.sessionRDVAssociee.invites.findIndex(g=>g.id===d.responsable.id&&g.type===d.responsable.typeResp&&g.eleve.id===c.id)>-1||(i=!0,this.sessionRDVAssociee.invites.push(new a.b1F({idRDVSession:this.sessionRDVAssociee.id,nom:Object.isExists(d.responsable.contacts)&&d.responsable.contacts.length>0?d.responsable.contacts[0]:"",id:d.responsable.id,type:a.dcH.FAMILLE_RESPONSABLE,eleve:new a.TAs({id:c.id})})))}),i?this.rdvService.updateSessionRDV(this.authStore.currentUser.typeCompte,this.authStore.currentUser.id,this.sessionRDVAssociee):(0,y.of)(this.sessionRDVAssociee)}))),this.loader=this.loaderService.show(this),this.cd.markForCheck(),n.pipe((0,b.w)(o=>this.carnetCorrespondanceService.ajouterSaisie(this.carnetUser.idEntity,this.carnetUser.typeEntity,this.newCorrespondance,this.carnetUser.listeElevesSelected,o)),(0,u.b)(()=>{this.correspondanceAdded.emit(!0),this.uiService.notifyEvent(a.DOJ.genericSuccess,"Enregistrement de votre correspondance effectu\xe9 !","Carnet de correspondance","icon-ed_carnetcorrespondance")}),(0,E.K)(()=>(this.correspondanceAdded.emit(!1),this.uiService.notifyEvent(a.DOJ.genericError,"Une erreur est survenue","Carnet de correspondance"),T.E)),(0,f.x)(()=>this.loaderService.hide(this))).subscribe()}cancel(){this.correspondanceCancel.emit(!0)}onUploadSuccess(n){this.newCorrespondance.setUrlFichier(a.FSr.isNotEmptyString(n.unc)?n.unc:n.id)}onRemovedFile(){this.newCorrespondance.setUrlFichier("")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(a.$z9),e.Y36(C.tT),e.Y36(a.HmK),e.Y36(a.VLf),e.Y36(x.S),e.Y36(e.sBO),e.Y36(a.CnD),e.Y36(a.KRh),e.Y36(a.vIF))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-edit-correspondance"]],outputs:{correspondanceAdded:"correspondanceAdded",correspondanceCancel:"correspondanceCancel"},decls:2,vars:3,consts:[["novalidate","","name","formAjoutCorrespondance",3,"ngBusy","ngSubmit",4,"ngIf"],["novalidate","","name","formAjoutCorrespondance",3,"ngBusy","ngSubmit"],["formAjoutCorrespondance","ngForm"],["id","dropzone-container-doc-correspondance",1,"col-lg-12","dropzone-container"],[1,"text-center"],[1,"row"],[1,"col-lg-4"],["for","selectTypeCorrespondance",1,"form-label"],["id","selectTypeCorrespondance","name","selectTypeCorrespondance",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-lg-6","mt-2"],[1,"row","py-1","ms-2"],["class","form-check",4,"ngIf"],[1,"col-lg-12",3,"ngClass"],[1,"clearfix"],["for","contenuCorrespondance",1,"form-label"],["id","contenuCorrespondance","name","contenuCorrespondance","rows","5","required","",1,"form-control",3,"ngModel","ngModelChange"],["contenuCorrespondance","ngModel"],[1,"col-lg-12","position-static"],[1,"texte-label"],[3,"dropzoneConfig","config","successUpload","removedFile"],["class","row",4,"ngIf"],[1,"row","mt-3"],[1,"col-lg-12"],["name","btnAnnuler","type","button",1,"btn","btn-danger","float-start",3,"click"],["name","btnValider","type","submit",1,"btn","btn-success","float-end",3,"disabled"],[3,"value"],[1,"form-check"],["type","checkbox","name","isSignatureDemandee","id","isSignatureDemandee","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","isSignatureDemandee",1,"form-check-label","fw-normal"],["type","checkbox","name","isAssociationRDVPP","id","isAssociationRDVPP","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","isAssociationRDVPP",1,"form-check-label","fw-normal"],[3,"sessionSelect"],[1,"col-lg-12","text-danger","text-end"]],template:function(n,o){1&n&&(e.YNc(0,Pn,38,19,"form",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,o.carnetUser$))},dependencies:[p.mk,p.sg,p.O5,l._Y,l.YN,l.Kr,l.Fj,l.Wl,l.EJ,l.JJ,l.JL,l.Q7,l.On,l.F,S.DC,Y.s,Tn,p.Ov,h.$],changeDetection:0}),t})();function Nn(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.isModeAjout=!0)}),e._UZ(1,"i",10),e._uU(2," Ajouter une correspondance "),e.qZA()}}function wn(t,r){if(1&t&&(e.TgZ(0,"div",11),e._UZ(1,"input",12),e.TgZ(2,"label",13),e._uU(3,"Voir toutes les correspondances"),e.qZA()()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("formControl",n.showAllCtrl)}}function Fn(t,r){if(1&t&&(e.TgZ(0,"h3"),e._uU(1),e.qZA()),2&t){const n=e.oxw(4);e.xp6(1),e.AsE(" Aucune correspondance pour les \xe9l\xe8ves s\xe9lectionn\xe9s (",null==n.carnetUser.listeElevesSelected?null:n.carnetUser.listeElevesSelected.length," \xe9l\xe8ve",(null==n.carnetUser.listeElevesSelected?null:n.carnetUser.listeElevesSelected.length)>1?"s":"",") ")}}function In(t,r){1&t&&(e.TgZ(0,"h3"),e._uU(1,"Veuillez s\xe9lectionner un \xe9l\xe8ve dans la liste"),e.qZA())}function Yn(t,r){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,Fn,2,2,"h3",1),e.YNc(2,In,2,0,"h3",1),e.qZA()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",(null==n.carnetUser.listeElevesSelected?null:n.carnetUser.listeElevesSelected.length)>0),e.xp6(1),e.Q6J("ngIf",0===(null==n.carnetUser.listeElevesSelected?null:n.carnetUser.listeElevesSelected.length))}}function On(t,r){1&t&&(e.TgZ(0,"th"),e._uU(1,"Auteur"),e.qZA())}function Qn(t,r){1&t&&(e.TgZ(0,"th"),e._uU(1,"Destinataire"),e.qZA())}function jn(t,r){if(1&t&&(e.TgZ(0,"tr"),e._UZ(1,"th",19),e.TgZ(2,"th",20),e._uU(3,"Date"),e.qZA(),e.TgZ(4,"th"),e._uU(5,"El\xe8ve"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Contenu"),e.qZA(),e.TgZ(8,"th",21),e._uU(9,"Type"),e.qZA(),e.YNc(10,On,2,0,"th",1),e.YNc(11,Qn,2,0,"th",1),e.qZA()),2&t){const n=e.oxw(4);e.xp6(10),e.Q6J("ngIf",!0===n.showAllCtrl.value),e.xp6(1),e.Q6J("ngIf",!0===n.showAllCtrl.value)}}function kn(t,r){1&t&&e._UZ(0,"i",26)}function Ln(t,r){1&t&&e._UZ(0,"span",28)}function Rn(t,r){if(1&t&&(e.TgZ(0,"span"),e._UZ(1,"span",29),e.TgZ(2,"small",30),e._uU(3),e.qZA()()),2&t){const n=e.oxw(3).item;e.xp6(3),e.lnq("(",n.nbSignatures," signature",n.nbSignatures>1?"s":""," / ",n.eleves.length," )")}}function Hn(t,r){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,Ln,1,0,"span",27),e.YNc(2,Rn,4,3,"span",1),e.qZA()),2&t){const n=e.oxw(2).item;e.xp6(1),e.Q6J("ngIf",n.eleves.length===n.nbSignatures),e.xp6(1),e.Q6J("ngIf",n.eleves.length>n.nbSignatures)}}function Bn(t,r){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,Hn,3,2,"span",1),e.qZA()),2&t){const n=e.oxw().item;e.xp6(1),e.hij(" ",n.eleves.length," \xe9l\xe8ves "),e.xp6(1),e.Q6J("ngIf",n.isSignatureDemandee)}}function $n(t,r){1&t&&e._UZ(0,"i",35)}function Vn(t,r){1&t&&e._UZ(0,"i",36)}function Gn(t,r){if(1&t&&(e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"displayNom"),e.YNc(3,$n,1,0,"i",33),e.YNc(4,Vn,1,0,"i",34),e.qZA()),2&t){const n=r.$implicit,o=e.oxw(2).item,i=e.oxw(4);e.xp6(1),e.hij(" ",e.xi3(2,3,n,!0)," "),e.xp6(2),e.Q6J("ngIf",!0===o.isSignatureDemandee&&!0===i.isCorrespondanceSignee(n)),e.xp6(1),e.Q6J("ngIf",!0===o.isSignatureDemandee&&!0!==i.isCorrespondanceSignee(n))}}function Kn(t,r){if(1&t&&(e.ynx(0),e.YNc(1,Gn,5,6,"div",31),e.ALo(2,"trackByProperty"),e.BQk()),2&t){const n=e.oxw().item;e.xp6(1),e.Q6J("ngForOf",n.eleves)("ngForTrackBy",e.lcZ(2,2,"$index"))}}function zn(t,r){1&t&&e._UZ(0,"i",37)}function Wn(t,r){if(1&t&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"displayNom"),e.qZA()),2&t){const n=e.oxw().item;e.xp6(1),e.Oqu(e.lcZ(2,1,n.auteur))}}function Xn(t,r){if(1&t&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"displayNom"),e.qZA()),2&t){const n=e.oxw().item;e.xp6(1),e.Oqu(e.lcZ(2,1,n.destinataire))}}const et=function(t){return{unread:t}},nt=function(){return["250","..."]};function tt(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"tr",22),e.NdJ("click",function(){const c=e.CHM(n).item,d=e.oxw(4);return e.KtG(d.openDetailCorrespondance(c))}),e.TgZ(1,"td",19)(2,"button",23),e.NdJ("click",function(){const c=e.CHM(n).item,d=e.oxw(4);return e.KtG(d.openDetailCorrespondance(c))}),e.qZA()(),e.TgZ(3,"td"),e.YNc(4,kn,1,0,"i",24),e._uU(5),e.ALo(6,"edDate"),e.qZA(),e.TgZ(7,"td"),e.YNc(8,Bn,3,2,"span",1),e.YNc(9,Kn,3,4,"ng-container",1),e.qZA(),e.TgZ(10,"td"),e.YNc(11,zn,1,0,"i",25),e._uU(12),e.ALo(13,"truncate"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.YNc(16,Wn,3,3,"td",1),e.YNc(17,Xn,3,3,"td",1),e.qZA()}if(2&t){const n=r.item,o=e.oxw(4);e.Q6J("ngClass",e.VKq(16,et,n.destinataire&&!n.destinataire.lu)),e.xp6(4),e.Q6J("ngIf",n.destinataire),e.xp6(1),e.hij(" ",e.xi3(6,10,n.dateCreation,"dd/MM/y \xe0 H:mm")," "),e.xp6(3),e.Q6J("ngIf",n.eleves.length>3),e.xp6(1),e.Q6J("ngIf",n.eleves.length<=3),e.xp6(2),e.Q6J("ngIf",n.urlFichier&&""!==n.urlFichier),e.xp6(1),e.hij(" ",e.xi3(13,13,n.contenu,e.DdM(18,nt))," "),e.xp6(3),e.Oqu(n.type),e.xp6(1),e.Q6J("ngIf",!0===o.showAllCtrl.value),e.xp6(1),e.Q6J("ngIf",!0===o.showAllCtrl.value)}}function ot(t,r){if(1&t&&(e.TgZ(0,"div",15)(1,"ed-smart-table",16),e.YNc(2,jn,12,2,"ng-template",17),e.YNc(3,tt,18,19,"ng-template",18),e.qZA()()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("datas",n.listeCorrespondances)("pagination",!0)}}function it(t,r){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,Nn,3,0,"button",4),e._UZ(2,"div",5),e.YNc(3,wn,4,1,"div",6),e.YNc(4,Yn,3,2,"div",7),e.YNc(5,ot,4,2,"div",8),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==n.carnetUser.carnetCorrespondance?null:n.carnetUser.carnetCorrespondance.parametrage.saisieCorrespondanceActif),e.xp6(2),e.Q6J("ngIf",(null==n.carnetUser.listeElevesSelected?null:n.carnetUser.listeElevesSelected.length)>0),e.xp6(1),e.Q6J("ngIf",0===(null==n.listeCorrespondances?null:n.listeCorrespondances.length)),e.xp6(1),e.Q6J("ngIf",(null==n.listeCorrespondances?null:n.listeCorrespondances.length)>0)}}function rt(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ed-edit-correspondance",38),e.NdJ("correspondanceAdded",function(i){e.CHM(n);const c=e.oxw(2);return e.KtG(c.onCorrespondanceAdded(i))})("correspondanceCancel",function(i){e.CHM(n);const c=e.oxw(2);return e.KtG(c.onCorrespondanceCancel(i))}),e.qZA()}}function at(t,r){if(1&t&&(e.ynx(0),e.YNc(1,it,6,4,"div",2),e.YNc(2,rt,1,0,"ng-template",null,3,e.W1O),e.BQk()),2&t){const n=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",!o.isModeAjout)("ngIfElse",n)}}let ct=(()=>{class t extends((0,a.kCV)()){constructor(n,o,i,c,d,g){super(),this.carnetCorrespondanceService=n,this.carnetCorrespondanceUserStore=o,this.modalService=i,this.carnetCorrespondanceBadgesStore=c,this.authStore=d,this.loaderService=g,this.isModeAjout=!1,this.listeCorrespondances=[],this.showAllCtrl=new l.NI(!1)}ngOnInit(){const n=this.showAllCtrl.valueChanges.pipe((0,tn.O)(this.showAllCtrl.value),(0,b.w)(i=>i?(this.loader=this.loaderService.show(this),this.carnetCorrespondanceService.getCarnetCorrespondance(this.authStore.currentUser.id,this.authStore.currentUser.typeCompte,this.carnetCorrespondanceUserStore.getCarnetCorrespondanceUser(this.authStore.variantForCurrentUser).idEntity,this.carnetCorrespondanceUserStore.getCarnetCorrespondanceUser(this.authStore.variantForCurrentUser).typeEntity,!0,!0).pipe((0,Q.d)(null),(0,f.x)(()=>this.loaderService.hide(this)))):(0,y.of)(i)),(0,b.w)(()=>(0,y.of)(this.showAllCtrl.value))),o=this.carnetCorrespondanceUserStore.selectCarnetCorrespondanceUser(this.authStore.variantForCurrentUser);(0,on.a)([n,o]).pipe((0,u.b)(([i,c])=>{this.carnetUser=new a.BiX(c),Object.isExists(c)&&Object.isExists(c.listeCorrespondancesDisplayed)&&(this.listeCorrespondances=c.listeCorrespondancesDisplayed.filter(d=>i||d.auteur.id===this.authStore.currentUser.id&&d.auteur.role===this.authStore.currentUser.typeCompte||Object.isExists(d.destinataire)&&d.destinataire.id===this.authStore.currentUser.id&&d.destinataire.type===this.authStore.currentUser.typeCompte).map(d=>new a.tPi(d)))}),(0,A.R)(this.componentDestroyed$)).subscribe()}openDetailCorrespondance(n){const o={id:this.modalService.getModalsCount()+1,initialState:{correspondance:n},class:"modal-lg",providers:[{provide:a.Il9,useValue:this.carnetCorrespondanceBadgesStore},{provide:a.$z9,useValue:this.carnetCorrespondanceUserStore}]};this.modalService.show(En,o)}isCorrespondanceSignee(n){return Object.isExists(n.signature)&&""!==n.signature.dateValidation}onCorrespondanceAdded(n){this.isModeAjout=!n}onCorrespondanceCancel(n){this.isModeAjout=!n}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(a.HmK),e.Y36(a.$z9),e.Y36(C.tT),e.Y36(a.Il9),e.Y36(a.CnD),e.Y36(x.S))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-correspondances"]],features:[e.qOj],decls:2,vars:2,consts:[["id","panel-correspondances","stTable","",3,"ngBusy"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formEdit",""],["type","button","class","btn btn-primary btn-sm float-end",3,"click",4,"ngIf"],[1,"clearfix"],["class","form-check",4,"ngIf"],["class","jumbotron",4,"ngIf"],["class","table-responsive mt-3",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm","float-end",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"form-check"],["type","checkbox","id","checkShowAll",1,"form-check-input",3,"formControl"],["for","checkShowAll",1,"form-check-label","fw-normal"],[1,"jumbotron"],[1,"table-responsive","mt-3"],[1,"table","table-hover","ed-table",3,"datas","pagination"],["edSmartTableHeaderTmp",""],["edSmartTableBodyTmp",""],[1,"screen-reader"],["stSort","dateCreation",1,"sortable-header"],["stSort","type",1,"sortable-header"],[1,"cliquable",3,"ngClass","click"],["type","button","aria-label","Consulter le d\xe9tail de la correspondance",3,"click"],["class","icon-ed_recu","title","Correspondance re\xe7u",4,"ngIf"],["class","fa fa-paperclip","aria-hidden","true",4,"ngIf"],["title","Correspondance re\xe7u",1,"icon-ed_recu"],["class","fa fa-check text-success","title","La correspondance a \xe9t\xe9 sign\xe9e par tous les \xe9l\xe8ves",4,"ngIf"],["title","La correspondance a \xe9t\xe9 sign\xe9e par tous les \xe9l\xe8ves",1,"fa","fa-check","text-success"],["aria-label","La correspondance n'a pas \xe9t\xe9 sign\xe9e par tous les \xe9l\xe8ves","title","La correspondance n'a pas \xe9t\xe9 sign\xe9e par tous les \xe9l\xe8ves",1,"fa","fa-close","text-danger"],[1,"margin-whitespace"],["class","cc-eleve-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cc-eleve-item"],["class","fa fa-check text-success","title","La correspondance a \xe9t\xe9 sign\xe9e",4,"ngIf"],["aria-label","La correspondance n'a pas \xe9t\xe9 sign\xe9e","class","fa fa-close text-danger","title","La correspondance n'a pas \xe9t\xe9 sign\xe9e",4,"ngIf"],["title","La correspondance a \xe9t\xe9 sign\xe9e",1,"fa","fa-check","text-success"],["aria-label","La correspondance n'a pas \xe9t\xe9 sign\xe9e","title","La correspondance n'a pas \xe9t\xe9 sign\xe9e",1,"fa","fa-close","text-danger"],["aria-hidden","true",1,"fa","fa-paperclip"],[3,"correspondanceAdded","correspondanceCancel"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e.YNc(1,at,4,2,"ng-container",1),e.qZA()),2&n&&(e.Q6J("ngBusy",o.loader),e.xp6(1),e.Q6J("ngIf",o.carnetUser))},dependencies:[p.mk,p.sg,p.O5,l.Wl,l.JJ,l.oH,S.DC,M.L,P.c,J.C,v.r,v.w,Jn,a.$t3,a.ifA,a.W70,h.$],styles:["#panel-correspondances[_ngcontent-%COMP%]   tr.unread[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:4px solid #0c9ed0;color:#0c9ed0;font-weight:700}"]}),t})();var st=s(34002);function dt(t,r){if(1&t&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.Q6J("ngValue",n),e.xp6(1),e.hij(" ",n.libelle," ")}}function lt(t,r){if(1&t&&(e.TgZ(0,"option",27),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.Q6J("ngValue",n),e.xp6(1),e.hij(" ",n.libelle," ")}}function pt(t,r){1&t&&(e.TgZ(0,"div",28),e._uU(1," Vous avez d\xe9pass\xe9 le nombre de caract\xe8res autoris\xe9s pour la saisie "),e.qZA())}function ut(t,r){1&t&&(e.TgZ(0,"div",4)(1,"div",29),e._uU(2,"Vous devez s\xe9lectionner au moins un \xe9l\xe8ve pour pouvoir valider votre saisie"),e.qZA()())}const gt=function(t){return{"has-error":t}};function _t(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"form",1,2),e.NdJ("ngSubmit",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.showConfirmAjout())}),e.TgZ(2,"h3",3),e._uU(3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"div",4)(7,"div",6)(8,"label",7),e._uU(9,"Type de sanction"),e.qZA(),e.TgZ(10,"select",8,9),e.NdJ("ngModelChange",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.newDemandeSanction.type=i)}),e._UZ(12,"option"),e.YNc(13,dt,2,2,"option",10),e.ALo(14,"trackByProperty"),e.qZA()()(),e.TgZ(15,"div",4)(16,"div",6)(17,"label",11),e._uU(18,"Motif"),e.qZA(),e.TgZ(19,"select",12,13),e.NdJ("ngModelChange",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.newDemandeSanction.motif=i)}),e._UZ(21,"option"),e.YNc(22,lt,2,2,"option",10),e.ALo(23,"trackByProperty"),e.qZA()()(),e.TgZ(24,"div",14)(25,"div",5)(26,"label",15),e._uU(27,"D\xe9tail pour la famille"),e.qZA(),e.TgZ(28,"textarea",16,17),e.NdJ("ngModelChange",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.newDemandeSanction.contenu=i)}),e.qZA()()(),e.TgZ(30,"div",4)(31,"div",5)(32,"label",18),e._uU(33," Travail \xe0 faire "),e.TgZ(34,"small",19),e._uU(35),e.qZA()(),e.TgZ(36,"textarea",20,21),e.NdJ("ngModelChange",function(i){e.CHM(n);const c=e.oxw();return e.KtG(c.newDemandeSanction.travailAFaire=i)}),e.qZA(),e.YNc(38,pt,2,0,"div",22),e.qZA()(),e.YNc(39,ut,3,0,"div",23),e.TgZ(40,"div",24)(41,"div",5)(42,"button",25),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.cancel())}),e._uU(43,"Annuler"),e.qZA(),e.TgZ(44,"button",26),e._uU(45," Enregistrer "),e.qZA()()()()()()}if(2&t){const n=e.MAs(1),o=e.MAs(29),i=e.oxw();e.Q6J("ngBusy",i.loader),e.xp6(3),e.AsE("Nouvelle demande de sanction (",i.carnetUser.listeElevesSelected.length," \xe9l\xe8ve",i.carnetUser.listeElevesSelected.length>1?"s":"",")"),e.xp6(7),e.Q6J("ngModel",i.newDemandeSanction.type),e.xp6(3),e.Q6J("ngForOf",i.carnetUser.carnetCorrespondance.typesSanction)("ngForTrackBy",e.lcZ(14,18,"$index")),e.xp6(6),e.Q6J("ngModel",i.newDemandeSanction.motif),e.xp6(3),e.Q6J("ngForOf",i.carnetUser.carnetCorrespondance.motifsSanction)("ngForTrackBy",e.lcZ(23,20,"$index")),e.xp6(2),e.Q6J("ngClass",e.VKq(22,gt,o.invalid||o.pristine)),e.xp6(4),e.Q6J("ngModel",i.newDemandeSanction.contenu),e.xp6(7),e.AsE(" (Nombre de caract\xe8res restants : ",i.newDemandeSanction.travailAFaire.length," / ",null==i.carnetUser.carnetCorrespondance?null:i.carnetUser.carnetCorrespondance.parametrage.nbCaractMaxTravailAFaireSanction,") "),e.xp6(1),e.Q6J("ngModel",i.newDemandeSanction.travailAFaire)("edMaxlength",null==i.carnetUser.carnetCorrespondance?null:i.carnetUser.carnetCorrespondance.parametrage.nbCaractMaxTravailAFaireSanction),e.xp6(2),e.Q6J("ngIf",i.newDemandeSanction.travailAFaire.length>(null==i.carnetUser.carnetCorrespondance?null:i.carnetUser.carnetCorrespondance.parametrage.nbCaractMaxTravailAFaireSanction)),e.xp6(1),e.Q6J("ngIf",0===i.carnetUser.listeElevesSelected.length),e.xp6(5),e.Q6J("disabled",n.pristine||n.invalid||0===i.carnetUser.listeElevesSelected.length)}}let mt=(()=>{class t{constructor(n,o,i,c,d,g,_){this.carnetCorrespondanceUserStore=n,this.modalService=o,this.carnetCorrespondanceService=i,this.uiService=c,this.loaderService=d,this.cd=g,this.authStore=_,this.listeElevesSelected=[],this.demandeSanctionAdded=new e.vpe,this.newDemandeSanction=new a.qth}ngOnInit(){this.carnetUser$=this.carnetCorrespondanceUserStore.selectCarnetCorrespondanceUser(this.authStore.variantForCurrentUser).pipe((0,u.b)(n=>{this.carnetUser=n}))}showConfirmAjout(){const n="\xe9l\xe8ve"+(this.carnetUser.listeElevesSelected.length>1?"s":""),o={id:this.modalService.getModalsCount()+1,initialState:{title:"Cr\xe9ation d'une nouvelle demande de sanction",message:`<p>\xcates-vous vraiment s\xfbr de vouloir envoyer cette demande de sanction \xe0 <strong>${this.carnetUser.listeElevesSelected.length} ${n}</strong> ?</p>\n                  <p><i>${this.newDemandeSanction.contenu}</i></p>\n                  <p class="text-danger">Attention ! Une fois cr\xe9\xe9e <strong>vous ne pourrez plus modifier ou supprimer la demande de sanction</strong></p>`}};this.modalService.show(U.z,o),this.modalService.onHide.pipe((0,Z.q)(1),(0,u.b)(i=>{i===q.G.validation&&this.saveDemandeSanction()})).subscribe()}saveDemandeSanction(){0!==this.carnetUser.listeElevesSelected.length&&(this.loader=this.loaderService.show(this),this.cd.markForCheck(),this.carnetCorrespondanceService.ajouterSaisie(this.carnetUser.idEntity,this.carnetUser.typeEntity,this.newDemandeSanction,this.carnetUser.listeElevesSelected).pipe((0,u.b)(()=>{this.demandeSanctionAdded.emit(!0),this.uiService.notifyEvent(a.DOJ.genericSuccess,"Enregistrement de votre demande de sanction effectu\xe9 !","Carnet de correspondance","icon-ed_carnetcorrespondance")}),(0,E.K)(()=>(this.demandeSanctionAdded.emit(!1),this.uiService.notifyEvent(a.DOJ.genericError,"Une erreur est survenue","Carnet de correspondance"),T.E)),(0,f.x)(()=>this.loaderService.hide(this))).subscribe())}cancel(){this.demandeSanctionAdded.emit(!1)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(a.$z9),e.Y36(C.tT),e.Y36(a.HmK),e.Y36(a.VLf),e.Y36(x.S),e.Y36(e.sBO),e.Y36(a.CnD))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-edit-demande-sanction"]],outputs:{demandeSanctionAdded:"demandeSanctionAdded"},decls:2,vars:3,consts:[["novalidate","","name","formAjoutSanction",3,"ngBusy","ngSubmit",4,"ngIf"],["novalidate","","name","formAjoutSanction",3,"ngBusy","ngSubmit"],["formAjoutSanction","ngForm"],[1,"text-center"],[1,"row"],[1,"col-lg-12"],[1,"col-lg-6"],["for","selectTypeSanction",1,"form-label"],["id","selectTypeSanction","name","selectTypeSanction",1,"form-control","form-select",3,"ngModel","ngModelChange"],["selectTypeSanction","ngModel"],[3,"ngValue",4,"ngFor","ngForOf","ngForTrackBy"],["for","motifSanction",1,"form-label"],["id","motifSanction","name","motifSanction",1,"form-control","form-select",3,"ngModel","ngModelChange"],["motifSanction","ngModel"],[1,"row",3,"ngClass"],["for","contenu",1,"form-label"],["id","contenu","placeholder","Indiquer la raison de la sanction","name","contenu","rows","5","required","",1,"form-control",3,"ngModel","ngModelChange"],["contenu","ngModel"],["for","travailAFaire",1,"form-label"],[1,"d-print-none"],["id","travailAFaire","placeholder","Indiquer le travail \xe0 faire si n\xe9cessaire","name","travailAFaire","rows","5",1,"form-control",3,"ngModel","edMaxlength","ngModelChange"],["travailAFaire","ngModel"],["class","text-danger",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","mt-3"],["name","btnAnnuler","type","button",1,"btn","btn-danger","float-start",3,"click"],["name","btnValider","type","submit",1,"btn","btn-success","float-end",3,"disabled"],[3,"ngValue"],[1,"text-danger"],[1,"col-lg-12","text-danger","text-end"]],template:function(n,o){1&n&&(e.YNc(0,_t,46,24,"form",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,o.carnetUser$))},dependencies:[p.mk,p.sg,p.O5,l._Y,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.On,l.F,S.DC,st.v,p.Ov,h.$],changeDetection:0}),t})();function ft(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.isModeAjout=!0)}),e._UZ(1,"i",11),e._uU(2," Ajouter une demande de sanction "),e.qZA()}}function ht(t,r){if(1&t&&(e.TgZ(0,"h3"),e._uU(1),e.qZA()),2&t){const n=e.oxw(3).ngIf;e.xp6(1),e.AsE(" Aucune demande de sanction pour les \xe9l\xe8ves s\xe9lectionn\xe9s (",null==n.listeElevesSelected?null:n.listeElevesSelected.length," \xe9l\xe8ve",(null==n.listeElevesSelected?null:n.listeElevesSelected.length)>1?"s":"",") ")}}function vt(t,r){1&t&&(e.TgZ(0,"h3"),e._uU(1,"Veuillez s\xe9lectionner un \xe9l\xe8ve dans la liste"),e.qZA())}function Ct(t,r){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,ht,2,2,"h3",2),e.YNc(2,vt,2,0,"h3",2),e.qZA()),2&t){const n=e.oxw(2).ngIf;e.xp6(1),e.Q6J("ngIf",(null==n.listeElevesSelected?null:n.listeElevesSelected.length)>0),e.xp6(1),e.Q6J("ngIf",0===(null==n.listeElevesSelected?null:n.listeElevesSelected.length))}}function Et(t,r){1&t&&(e.TgZ(0,"tr")(1,"th",16),e._uU(2,"Date"),e.qZA(),e.TgZ(3,"th",17),e._uU(4,"El\xe8ve"),e.qZA(),e.TgZ(5,"th",18),e._uU(6,"Type"),e.qZA(),e.TgZ(7,"th",19),e._uU(8,"Motif"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"D\xe9tail pour la famille"),e.qZA(),e.TgZ(11,"th",20),e._uU(12,"Traitement"),e.qZA()())}function xt(t,r){if(1&t&&(e.TgZ(0,"p"),e._UZ(1,"br")(2,"i",21),e.TgZ(3,"span",22),e._uU(4,"Travail \xe0 faire :"),e.qZA(),e._uU(5),e.qZA()),2&t){const n=e.oxw().item;e.xp6(5),e.hij(" ",n.travailAFaire," ")}}function St(t,r){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"edDate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"displayNom"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.YNc(13,xt,6,1,"p",2),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA()()),2&t){const n=r.item;e.xp6(2),e.Oqu(e.xi3(3,7,n.dateCreation,"dd/MM/y \xe0 H:mm")),e.xp6(3),e.Oqu(e.xi3(6,10,n,!0)),e.xp6(3),e.Oqu(n.type.libelle),e.xp6(2),e.Oqu(n.motif.libelle),e.xp6(2),e.hij(" ",n.contenu," "),e.xp6(1),e.Q6J("ngIf",n.travailAFaire),e.xp6(2),e.hij(" ",n.isTraiteVS?"Trait\xe9e":"En attente"," ")}}function At(t,r){if(1&t&&(e.TgZ(0,"ed-smart-table",13),e.YNc(1,Et,13,0,"ng-template",14),e.YNc(2,St,16,13,"ng-template",15),e.qZA()),2&t){const n=e.oxw(3);e.Q6J("datas",n.listeSanctions)("pagination",!0)}}function bt(t,r){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,ft,3,0,"button",5),e._UZ(2,"div",6),e.YNc(3,Ct,3,2,"div",7),e.TgZ(4,"div",8),e.YNc(5,At,3,2,"ed-smart-table",9),e.qZA()()),2&t){const n=e.oxw().ngIf,o=e.oxw();e.xp6(1),e.Q6J("ngIf",!o.isModeAjout),e.xp6(2),e.Q6J("ngIf",!o.isModeAjout&&0===(null==n.listeDemandesSanctionDisplayed?null:n.listeDemandesSanctionDisplayed.length)),e.xp6(2),e.Q6J("ngIf",!o.isModeAjout&&(null==o.listeSanctions?null:o.listeSanctions.length)>0)}}function Tt(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"ed-edit-demande-sanction",23),e.NdJ("demandeSanctionAdded",function(i){e.CHM(n);const c=e.oxw(2);return e.KtG(c.onDemandeSanctionAdded(i))}),e.qZA()}}function yt(t,r){if(1&t&&(e.ynx(0),e.YNc(1,bt,6,3,"div",3),e.YNc(2,Tt,1,0,"ng-template",null,4,e.W1O),e.BQk()),2&t){const n=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",!o.isModeAjout)("ngIfElse",n)}}let Zt=(()=>{class t{constructor(n,o){this.carnetCorrespondanceUserStore=n,this.authStore=o,this.isModeAjout=!1,this.listeSanctions=[]}ngOnInit(){this.carnetUser$=this.carnetCorrespondanceUserStore.selectCarnetCorrespondanceUser(this.authStore.variantForCurrentUser).pipe((0,u.b)(n=>{Object.isExists(n)&&Object.isExists(n.listeDemandesSanctionDisplayed)&&(this.listeSanctions=n.listeDemandesSanctionDisplayed.map(o=>new a.qth(o)))}))}onDemandeSanctionAdded(n){this.isModeAjout=!1}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(a.$z9),e.Y36(a.CnD))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ed-demandes-sanction"]],decls:4,vars:3,consts:[["id","panel-sanctions","stTable",""],["table","stTable"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["formAjout",""],["type","button","class","btn btn-primary btn-sm float-end margin-bottom-10",3,"click",4,"ngIf"],[1,"clearfix"],["class","jumbotron",4,"ngIf"],[1,"table-responsive"],["class","table table-hover ed-table",3,"datas","pagination",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-sm","float-end","margin-bottom-10",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],[1,"jumbotron"],[1,"table","table-hover","ed-table",3,"datas","pagination"],["edSmartTableHeaderTmp",""],["edSmartTableBodyTmp",""],["stSort","dateCreation",1,"sortable-header"],["stSort","nom",1,"sortable-header"],["stSort","libelleType",1,"sortable-header"],["stSort","libelleMotif",1,"sortable-header"],["stSort","isTraiteVS",1,"sortable-header"],["aria-hidden","true",1,"icon-ed_cahierdetexte"],[1,"text-bold","margin-whitespace"],[3,"demandeSanctionAdded"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0,1),e.YNc(2,yt,4,2,"ng-container",2),e.ALo(3,"async"),e.qZA()),2&n&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,o.carnetUser$)))},dependencies:[p.O5,M.L,P.c,J.C,v.r,v.w,mt,p.Ov,a.$t3,a.ifA],encapsulation:2}),t})();const Ut=[{path:"",component:X,children:[{path:":typeEntity/:idEntity",component:nn,canActivateChild:[R.a],children:[{path:"",redirectTo:"correspondances",pathMatch:"full"},{path:"correspondances",data:{guardTypes:[a.dcH.ENSEIGNANT,a.dcH.PERSONNEL]},component:ct},{path:"demandesSanction",data:{guardTypes:[a.dcH.ENSEIGNANT,a.dcH.PERSONNEL]},component:Zt},{path:"accompagementPedagogique",data:{guardTypes:[a.dcH.ENSEIGNANT,a.dcH.PERSONNEL]},component:Oe}]}]}];let qt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(Ut),m.Bz]}),t})();var Mt=s(99658),Dt=s(65628),Pt=s(16917),Jt=s(37351),Nt=s(39499),wt=s(96272),Ft=s(78452),It=s(29402);let Yt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[{provide:It.I,useFactory:()=>(0,Ft.of)([])}],imports:[qt,Mt.m,Dt.K,Pt.C,Jt.Z,Nt.Y,wt.Q]}),t})()}}]);